<!DOCTYPE html>
<html lang="en-US">
<head>
<title>ERDDAP - Set Up Your Own ERDDAP</title>
<meta charset="UTF-8">
<link rel="shortcut icon" href="https://coastwatch.pfeg.noaa.gov/erddap/images/favicon.ico">
<link href="erddap2.css" rel="stylesheet" type="text/css">
<meta name="viewport" content="width=device-width, initial-scale=1">
</head>

<body> 
<table class="compact nowrap" style="width:100%; background-color:#128CB5;"> 
  <tr> 
    <td style="text-align:center; width:80px;"><a rel="bookmark"
      href="https://www.noaa.gov/"><img 
      title="National Oceanic and Atmospheric Administration" 
      src="../images/noaab.png" alt="NOAA"
      style="vertical-align:middle;"></a></td> 
    <td style="text-align:left; font-size:x-large; color:#FFFFFF; ">
      <strong>ERDDAP</strong>
      <br><small><small><small>Easier access to scientific data</small></small></small>
      </td> 
    <td style="text-align:right; font-size:small;"> 
      &nbsp; &nbsp;
      <br>Brought to you by 
      <a title="National Oceanic and Atmospheric Administration" rel="bookmark"
      href="https://www.noaa.gov">NOAA</a>  
      <a title="National Marine Fisheries Service" rel="bookmark"
      href="https://www.fisheries.noaa.gov">NMFS</a>  
      <a title="Southwest Fisheries Science Center" rel="bookmark"
      href="https://swfsc.noaa.gov">SWFSC</a> 
      <a title="Environmental Research Division" rel="bookmark"
      href="https://swfsc.noaa.gov/textblock.aspx?Division=ERD&amp;id=1315&amp;ParentMenuId=200">ERD</a>  
      &nbsp; &nbsp;
      </td> 
  </tr> 
</table>

<div class="standard_width"> 

<!-- &nbsp;
<br><button type="button" onClick="history.go(-1);return true;">Back</button> -->

<h1 style="text-align:center;">Embed a Graph in a Web Page</h1> 
If you are a web page author, you can embed an ERDDAP Make A Graph image URL directly 
in one of your web pages with an HTML 
<a rel="help" href="https://www.w3schools.com/tags/tag_img.asp">&lt;img&gt; tag<img 
      src="../images/external.png" alt=" (external link)" 
      title="This link to an external website does not constitute an endorsement."></a>.
<ol>
<li>In ERDDAP, <!-- not a link; encourage users to use the erddap installation that got them here -->
   search for a dataset of interest.
  <br>&nbsp;
<li>Click on the dataset's <kbd>graph</kbd> link to see the Make A Graph web page.
  <br>&nbsp;
<li>Modify the graph until it looks like you want it to.
  <br>&nbsp;
<li>Specify the <kbd>File Type</kbd> (for example, .png) and get the URL 
  from the <kbd>view the URL</kbd> textfield.
  <br>&nbsp;
<li>You can make additional changes to the image by adding other commands to the URL.   For example, you can add commands to specify any image size, remove excess
  whitespace at the bottom of the image, and/or
  choose to view the graph without the legend. See the 
<a href="https://coastwatch.pfeg.noaa.gov/erddap/griddap/documentation.html#GraphicsCommands">griddap documentation</a> or
<a href="https://coastwatch.pfeg.noaa.gov/erddap/tabledap/documentation.html#GraphicsCommands">tabledap documentation</a>.
  <br>&nbsp;
<li>In preparation for using the URL in the HTML &lt;img&gt; tag, 
  you must encode all instances of <kbd>&amp;</kbd> in the URL as <kbd>&amp;amp;</kbd> .
  <br>&nbsp;
<li><a class="selfLink" id="PercentEncoded" href="#PercentEncoded" rel="bookmark">In preparation for using the URL</a>
    in the HTML &lt;img&gt; tag, you must  
    <a rel="help" href="https://en.wikipedia.org/wiki/Percent-encoding">percent encode<img 
    src="../images/external.png" alt=" (external link)" 
    title="This link to an external web site does not constitute an endorsement."/></a> the special characters in the query part of the
    URL (other than the initial '&amp;' and the main '='
    in constraints) into the form %HH, 
    where HH is the 2 digit hexadecimal value of the character.
    Usually, you just need to convert a few of the punctuation characters: % into %25, 
    &amp; into %26, " into %22, &lt; into %3C, = into %3D, &gt; into %3E, + into %2B,
    | into %7C, [ into %5B, ] into %5D, space into %20, 
    and convert all characters above #127 into their UTF-8 form and then percent encode
    each byte of the UTF-8 form into the %HH format (ask a programmer for help).
    <br>For example, <kbd>&amp;stationID&gt;="41004"</kbd>
    <br>becomes &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<kbd>&amp;stationID%3E=%2241004%22</kbd>
    <br>Note that percent encoding is generally required when you access ERDDAP
      via software other than a browser. Browsers usually handle percent encoding for you.
    <br>In some situations, you need to percent encode all characters other than
    A-Za-z0-9_-!.~'()*, but still don't percent encode the initial '&amp;' or the main '='
    in constraints.
    <br>Programming languages have tools to do this (for example, see Java's
      <a rel="help" href="https://docs.oracle.com/javase/8/docs/api/index.html?java/net/URLEncoder.html">java.net.URLEncoder<img 
      src="../images/external.png" alt=" (external link)" 
      title="This link to an external web site does not constitute an endorsement."/></a>
    and JavaScript's
      <a rel="help" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/encodeURIComponent">encodeURIComponent()<img 
      src="../images/external.png" alt=" (external link)" 
      title="This link to an external web site does not constitute an endorsement."/></a>) 
      and there are
    <br><a rel="help" href="https://www.url-encode-decode.com/">web sites that percent encode/decode for you<img 
      src="../images/external.png" alt=" (external link)" 
      title="This link to an external web site does not constitute an endorsement."/></a>.
  <br>&nbsp;
<li>For gridded datasets, you may change the time dimension's value in the
  URL to <kbd>(last)</kbd> so that
  the image will always show data for the latest date/time instead of a 
  specific date/time.
  <p>Or, for tabular datasets, you may change the time constraint in the URL 
   to something like
  <kbd>time&gt;now-2days</kbd> 
  so that the image will always show the data from 2 days ago until now.
  (<a href="https://coastwatch.pfeg.noaa.gov/erddap/tabledap/documentation.html#now">more information</a>)
  <p>Or, for tabular datasets, you may change the time constraint in the URL 
   to something like
  <kbd>time&gt;max(time)-2days</kbd> 
  so that the image will always show the last 2 days worth of data from the dataset.
  (<a href="https://coastwatch.pfeg.noaa.gov/erddap/tabledap/documentation.html#max">more information</a>)
<li>Make an img tag in your HTML document which refers to that modified URL, 
  for example

<pre>
&lt;img src="https://coastwatch.pfeg.noaa.gov/erddap/griddap/erdBAssta5day.png?sst%5B(last)%5D%5B(0.0)%5D%5B(22.0):(50.0)%5D%5B(225.0):(255.0)%5D&amp;amp;.draw=surface&amp;amp;.vars=longitude%7Clatitude%7Csst&amp;amp;.colorBar=Rainbow%7CC%7CLinear%7C8%7C32%7C" alt="SST, Blended, West US (Experimental, 5 Day Composite)"&gt;</pre>

<p>Or, if you want to be fancy, here is an example that includes "largest" and "edit" links. 
Note that the URLs have different file extensions (.largePng, .graph, and .png).

<pre>
&lt;a href="https://coastwatch.pfeg.noaa.gov/erddap/griddap/erdBAssta5day.largePng?sst%5B(last)%5D%5B(0.0)%5D%5B(22.0):(50.0)%5D%5B(225.0):(255.0)%5D&amp;amp;.draw=surface&amp;amp;.vars=longitude%7Clatitude%7Csst&amp;amp;.colorBar=Rainbow%7CC%7CLinear%7C8%7C32%7C"&gt;largest&lt;/a&gt;
&lt;a href="https://coastwatch.pfeg.noaa.gov/erddap/griddap/erdBAssta5day.graph?sst%5B(last)%5D%5B(0.0)%5D%5B(22.0):(50.0)%5D%5B(225.0):(255.0)%5D&amp;amp;.draw=surface&amp;amp;.vars=longitude%7Clatitude%7Csst&amp;amp;.colorBar=Rainbow%7CC%7CLinear%7C8%7C32%7C"&gt;edit image / download data&lt;/a&gt;
&lt;br&gt;
&lt;img src="https://coastwatch.pfeg.noaa.gov/erddap/griddap/erdBAssta5day.png?sst%5B(last)%5D%5B(0.0)%5D%5B(22.0):(50.0)%5D%5B(225.0):(255.0)%5D&amp;amp;.draw=surface&amp;amp;.vars=longitude%7Clatitude%7Csst&amp;amp;.colorBar=Rainbow%7CC%7CLinear%7C8%7C32%7C" alt="SST, Blended, West US (Experimental, 5 Day Composite)"&gt;
</pre>

<p>That example makes these links and this image:
<p><a href="https://coastwatch.pfeg.noaa.gov/erddap/griddap/erdBAssta5day.largePng?sst%5B(last)%5D%5B(0.0)%5D%5B(22.0):(50.0)%5D%5B(225.0):(255.0)%5D&amp;.draw=surface&amp;.vars=longitude%7Clatitude%7Csst&amp;.colorBar=Rainbow%7CC%7CLinear%7C8%7C32%7C">largest</a>
<a href="https://coastwatch.pfeg.noaa.gov/erddap/griddap/erdBAssta5day.graph?sst%5B(last)%5D%5B(0.0)%5D%5B(22.0):(50.0)%5D%5B(225.0):(255.0)%5D&amp;.draw=surface&amp;.vars=longitude%7Clatitude%7Csst&amp;.colorBar=Rainbow%7CC%7CLinear%7C8%7C32%7C">edit image / download data</a>
<br>
<img src="https://coastwatch.pfeg.noaa.gov/erddap/griddap/erdBAssta5day.png?sst%5B(last)%5D%5B(0.0)%5D%5B(22.0):(50.0)%5D%5B(225.0):(255.0)%5D&amp;.draw=surface&amp;.vars=longitude%7Clatitude%7Csst&amp;.colorBar=Rainbow%7CC%7CLinear%7C8%7C32%7C" alt="ERDDAP: SST, Blended, West US (Experimental, 5 Day Composite)">
</ol>


<!-- ******* -->
<h2><a class="selfLink" id="contact" href="#contact" rel="bookmark">Contact</a></h2>
Questions, comments, suggestions?  Please send an email to 
  <kbd>bob dot simons at noaa dot gov</kbd>
and include the ERDDAP URL directly related to your question or comment.

<p><a class="selfLink" id="ERDDAPMailingList" href="#ERDDAPMailingList" rel="bookmark">Or,
you can join the ERDDAP Google Group / Mailing List</a> by visiting
<a class="N" rel="help"
href="https://groups.google.com/forum/#!forum/erddap">https://groups.google.com/forum/#!forum/erddap<img 
  src="../images/external.png" alt=" (external link)" 
  title="This link to an external web site does not constitute an endorsement."/></a> 
and clicking on "Apply for membership". 
Once you are a member, you can post your question there
or search to see if the question has already been asked and answered. 

<br>&nbsp;
<hr>
<p>ERDDAP, Version 2.00
<br><a rel="bookmark" href="https://coastwatch.pfeg.noaa.gov/erddap/legal.html">Disclaimers</a> | 
    <a rel="bookmark" href="https://coastwatch.pfeg.noaa.gov/erddap/legal.html#privacyPolicy">Privacy Policy</a>

</div>
</body>
</html>
