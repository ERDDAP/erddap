<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" 
  "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>ERDDAP - Working with the datasets.xml File</title>
<link rel="shortcut icon" href="http://coastwatch.pfeg.noaa.gov/erddap/images/favicon.ico">
<link href="../images/erddap.css" rel="stylesheet" type="text/css">
</head>

<body> 
<table bgcolor="#128CB5" border="0" cellpadding="2" cellspacing="0" width="100%"> 
  <tr> 
    <td align="center" style="width:100px;"> &nbsp;
      <img src="http://coastwatch.pfeg.noaa.gov/erddap/images/noaab.png" alt="NOAA" align="middle"> &nbsp;
      </td> 
    <td align="left">
      <font color="#FFFFFF">
      <font size="+2"><b>ERDDAP</b></font>
      <br>Easier access to scientific data</font>
      </td> 
    <td align="right"><font size="-1"> 
      <br>Brought to you by 
      <a title="National Oceanic and Atmospheric Administration" 
      rel="bookmark" href="http://www.noaa.gov">NOAA</a>
      <a title="National Marine Fisheries Service"               
      rel="bookmark" href="http://www.nmfs.noaa.gov">NMFS</a> 
      <a title="Southwest Fisheries Science Center"              
      rel="bookmark" href="http://swfsc.noaa.gov">SWFSC</a>
      <a title="Environmental Research Division" 
      rel="bookmark" href="http://swfsc.noaa.gov/textblock.aspx?Division=ERD&amp;id=1315&amp;ParentMenuId=200">ERD</a>
      &nbsp; &nbsp;
      </font></td> 
  </tr> 
</table>

<table style="width:640px; border-style:outset; border-width:0px; padding:0px; " 
  cellspacing="0"> 
<tr>
<td>

&nbsp;
<form action="">
<input type="button" value="Back" onClick="history.go(-1);return true;">
</form>

<h1 align="center">Working with the datasets.xml File</h1>

[This web page will only be of interest to ERDDAP administrators.]
<p>After you have followed the ERDDAP 
<a rel="help" href="http://coastwatch.pfeg.noaa.gov/erddap/download/setup.html">installation instructions</a>, 
you must edit the datasets.xml file 
in [tomcat]/content/erddap/ to describe the datasets that your ERDDAP installation will serve. 

<h2>Table of Contents</h2>
<ul>
<li><a rel="help" href="#introduction"><b>Introduction</b></a> (Please read all of this.)
  <ul>
  <li><a rel="help" href="#effort">Some Assembly Required</a> 
  <li><a rel="help" href="#Tools">Tools</a>
  <li><a rel="help" href="#basicStructure">The basic structure of the datasets.xml file</a>
    <br>&nbsp;
  </ul>

<li><a rel="help" href="#notes">Notes</a> (Please read all of this.)
  <ul>
  <li><a rel="help" href="#encodingSpecialCharacters">Encoding Special Characters</a>
  <li><a rel="help" href="#noSyntaxErrors">XML doesn't tolerate syntax errors.</a>
  <li><a rel="help" href="#diagnoseProblems">Other Ways To Help Diagnose Problems With Datasets</a>
  <li><a rel="help" href="#LLAT">The longitude, latitude, altitude, and time (LLAT) variables are special.</a>
  <li><a rel="help" href="#dataStructures">Why just two basic data structures?</a>
  <li><a rel="help" href="#differentDimensions">What if the grid variables in the source dataset DON'T share the 
      same axis variables?</a>
  <li><a rel="help" href="#projections">Projected Gridded Data</a>
    <br>&nbsp;
  </ul>
<li><a rel="help" href="#datasetTypes"><b>List of Dataset Types</b></a> (Read as needed)
  <br>&nbsp;

<li><a rel="help" href="#datasetDescriptions">Detailed Descriptions of Dataset Types</a> (Read as needed)
  <br>&nbsp;

<li><a rel="help" href="#details">Details</a> (Read as needed)
  <ul>
  <li><a rel="help" href="#convertToPublicSourceUrl"><tt>&lt;convertToPublicSourceUrl&gt;</tt></a>
  <li><a rel="help" href="#requestBlacklist"><tt>&lt;requestBlacklist&gt;</tt></a>
  <li><a rel="help" href="#subscriptionEmailBlacklist"><tt>&lt;subscriptionEmailBlacklist&gt;</tt></a>
  <li><a rel="help" href="#user"><tt>&lt;user&gt;</tt></a>

  <li><a rel="help" href="#dataset"><tt>&lt;dataset&gt;</tt></a> 
    <ul>
    <li><a rel="help" href="#datasetID"><tt>datasetID="..."</tt></a>
    <li><a rel="help" href="#active"><tt>active="..."</tt></a>

    <li><a rel="help" href="#accessibleTo"><tt>&lt;accessibleTo&gt;</tt></a>
    <li><a rel="help" href="#altitudeMetersPerSourceUnit"><tt>&lt;altitudeMetersPerSourceUnit&gt;</tt></a>
    <li><a rel="help" href="#fgdcFile"><tt>&lt;fgdcFile&gt;</tt></a>
    <li><a rel="help" href="#iso19115File"><tt>&lt;iso19115File&gt;</tt></a>
    <li><a rel="help" href="#onChange"><tt>&lt;onChange&gt;</tt></a>

    <li><a rel="help" href="#reloadEveryNMinutes"><tt>&lt;reloadEveryNMinutes&gt;</tt></a>
    <li><a rel="help" href="#sourceCanConstrainStringEQNE"><tt>&lt;sourceCanConstrainStringEQNE&gt;</tt></a>
    <li><a rel="help" href="#sourceCanConstrainStringGTLT"><tt>&lt;sourceCanConstrainStringGTLT&gt;</tt></a>
    <li><a rel="help" href="#sourceCanConstrainStringRegex"><tt>&lt;sourceCanConstrainStringRegex&gt;</tt></a>
    <li><a rel="help" href="#sourceNeedsExpandedFP_EQ"><tt>&lt;sourceNeedsExpandedFP_EQ&gt;</tt></a>
    <li><a rel="help" href="#sourceUrl"><tt>&lt;sourceUrl&gt;</tt></a>

    <li><a rel="help" href="#addAttributes"><tt>&lt;addAttributes&gt;</tt></a> 
    <li><a rel="help" href="#globalAttributes">Global Attributes / Global <tt>&lt;addAttributes&gt;</tt></a>
      <!-- ul>
      <li><a rel="help" href="#cdm_data_type">cdm_data_type</a>
      <li><a rel="help" href="#globalDrawLandMask">drawLandMask</a>
      <li><a rel="help" href="#history">history</a>
      <li><a rel="help" href="#infoUrl">infoUrl</a>
      <li><a rel="help" href="#institution">institution</a>
      <li><a rel="help" href="#license">license</a>
      <li><a rel="help" href="#sourceUrlAttribute">sourceUrl</a>
      <li><a rel="help" href="#subsetVariables">subsetVariables</a>
      <li><a rel="help" href="#summary">summary</a>
      <li><a rel="help" href="#title">title</a>
      </ul -->
    <li><a rel="help" href="#axisVariable"><tt>&lt;axisVariable&gt;</tt></a>
    <li><a rel="help" href="#dataVariable"><tt>&lt;dataVariable&gt;</tt></a>
    <li><a rel="help" href="#variableAttributes">Variable Attributes / Variable <tt>&lt;addAttributes&gt;</tt></a>
      <!-- ul>
      <li><a rel="help" href="#actual_range">actual_range</a>
      <li><a rel="help" href="#colorBar">Color Bar Attributes</a>
      <li><a rel="help" href="#data_min">data_min and data_max</a>
      <li><a rel="help" href="#variableDrawLandMask">drawLandMask</a>
      <li><a rel="help" href="#ioos_category">ioos_category</a>
      <li><a rel="help" href="#long_name">long_name</a>
      <li><a rel="help" href="#missing_value">missing_value and _FillValue</a>
      <li><a rel="help" href="#scale_factor">scale_factor and add_offset</a>
      <li><a rel="help" href="#standard_name">standard_name</a>
      <li><a rel="help" href="#units">units</a>
      </ul -->
      <br>&nbsp;
    </ul>
  </ul>
<li><a rel="bookmark" href="http://coastwatch.pfeg.noaa.gov/erddap/download/setup.html#disclaimers">Disclaimers</a>
  <br>&nbsp;
<li><a rel="bookmark" href="#contact">Contact</a> 
</ul>

<br>&nbsp;
<hr>
<h2><a name="introduction">Introduction</a></h2>

<p><a name="effort"><b>Some Assembly Required</b></a> - 
Setting up a dataset in ERDDAP isn't just a matter of pointing to the dataset's
directory or URL. You have to write a chunk of XML for datasets.xml which describes the dataset.
<ul>
<li>For gridded datasets, in order to make the dataset conform to ERDDAP's data structure for gridded data,
  you have to identify a subset of the dataset's variables which share the same dimensions.
   (<a rel="help" href="#dataStructures">Why?</a> <a rel="help" href="#differentDimensions">How?</a>)
<li>The dataset's current metadata is imported automatically.
  But if you want to modify that metadata or add other metadata, you have to specify it in datasets.xml.
  And ERDDAP needs other metadata, including <a rel="help" href="#globalAttributes">global attributes</a>
    (such as infoUrl, institution, 
  sourceUrl, summary, and title) and <a rel="help" href="#variableAttributes">variable attributes</a> 
    (such as long_name and units).
  Just as the metadata that is currently in the dataset adds descriptive information to the dataset,
  the metadata requested by ERDDAP adds descriptive information to the dataset.
  The additional metadata is a good addition to your dataset and helps ERDDAP do a better job of 
  presenting your data to users who aren't familiar with it.
<li>ERDDAP needs you to do special things with the 
  <a rel="help" href="#LLAT">longitude, latitude, altitude, and time variables</a>.
</ul>
If you buy into these ideas and expend the effort to create the XML for datasets.xml,
you get all the advantages of ERDDAP, including:
<ul>
  <li>Full text search for datasets
  <li>Search for datasets by category
  <li>Data Access Forms so you can request subset of data in lots of different file formats
  <li>Forms to request graphs and maps
  <li>Web Map Service (WMS) for gridded datasets
  <li>RESTful access to your data
</ul>
Making the datasets.xml takes considerable effort for the first few datasets, but <b>it gets easier</b>.
After the first dataset, you can use often re-use a lot of your work for the next dataset.
Fortunately, there are two <a rel="help" href="#Tools">Tools</a> to help you create the XML for each 
dataset in datasets.xml.
And if you get stuck, please send an email with the details to <tt>bob dot simons at noaa dot gov</tt>.

<p><a name="Tools"><b>Tools</b></a> - 
   There are two command line programs which are tools to help you create the XML 
   for each dataset that you want your ERDDAP to serve.
   Once you have ERDDAP installed in Tomcat and Tomcat has unpacked the erddap.war file,
   you can find these programs in the [tomcat]/webapps/erddap/WEB-INF directory.
   There are Linux/Unix shell scripts (the program name, with no extension) and
   Windows .bat files for each program.
   When you run each program, it will ask you questions.
   For each question, type a response, then press Enter. 
   Or press ^C to exit a program at any time.
   The tools print various diagnostic messages:
    <ul>
    <li>The word "error" is used when something went so wrong that the procedure failed to complete.
      Although it is annoying to get an error, the error forces you to deal with the problem.
    <li>The word "warning" is used when something went wrong, but the procedure was able to complete. 
      These are pretty rare.
    <li>Anything else is just an informative message. 
      You can add <tt>-verbose</tt> to the GenerateDatasetsXml or DasDds command line to get 
      additional informative messages, which sometimes helps solve problems.
    </ul>

   <p>The two tools are a big help, but you still must read all of these instructions on this page carefully
   and make important decisions yourself. 

    <ul>
    <li><a name="GenerateDatasetsXml"><b>GenerateDatasetsXml</b></a> 
      is a command line program that can generate a rough draft
      of the dataset XML for almost any type of datasets.
      When you use the GenerateDatasetsXml program:
      <ol>
      <li>GenerateDatasetsXml asks you a series of questions so that it can access the dataset's source.
      <li>If you answer the questions correctly, GenerateDatasetsXml will connect to the dataset's source
         and gather basic information (e.g., variable names).
      <li>GenerateDatasetsXml will generate and print a rough draft of the dataset XML for that dataset
        and put the information on the system clipboard.
      <li>You can then paste it into your datasets.xml file and start to edit it.
      <li>You can then use DasDds (see below) to repeatedly test the XML for that dataset.
      </ol>
      Often, one of your answers won't be what GenerateDatasetsXml needs.
      You can then try again, with revised answers to the questions, 
      until GenerateDatasetsXml can successfully connect to the dataset.
      If you use "GenerateDatasetsXml -verbose", it will print more diagnostic messages than usual.

      <p>DISCLAIMER:
      The chunk of datasets.xml made by GenerateDatasetsXml isn't perfect.
      YOU MUST READ AND EDIT THE XML BEFORE USING IT IN A PUBLIC ERDDAP.
      GenerateDatasetsXml relies on a lot of rules-of-thumb which aren't always correct.
      YOU ARE RESPONSIBLE FOR ENSURING THE CORRECTNESS OF THE XML THAT YOU
      ADD TO ERDDAP'S datasets.xml FILE.

      <p><a name="EDDGridFromThreddsCatalog">EDDGridFromThreddsCatalog</a> - 
      In general, the options in GenerateDatasetsXml generate a datasets.xml chunk
      for one dataset from one specific data source. An exception to this is the 
      EDDGridFromThreddsCatalog option. 
      It generates all of the datasets.xml chunks needed for all of the EDDGridFromDap datasets 
      that it can find by crawling recursively through a THREDDS (sub) catalog.
      There are many forms of THREDDS catalog URLs.
      This option REQUIRES a THREDDS .xml URL with <tt>/catalog/</tt> in it, for example,
      <br>http://oceanwatch.pfeg.noaa.gov/thredds/catalog/catalog.xml or
      <br>http://oceanwatch.pfeg.noaa.gov/thredds/catalog/Satellite/aggregsatMH/chla/catalog.xml
      <br>(note that the comparable .html catalog is at
      <br>http://oceanwatch.pfeg.noaa.gov/thredds/Satellite/aggregsatMH/chla/catalog.html ).
      <br>If you have problems with EDDGridFromThreddsCatalog:
      <ul>
      <li>Make sure the URL you are using is valid, includes <tt>/catalog/</tt>,
        and ends with /catalog.xml .
      <li>If possible, use a public URL (e.g., with oceanwatch.pfeg.noaa.gov) in the
        URL, not a private numeric IP address (e.g., with 12.34.56.78).
        If the THREDDS is only accessible privately, you can use
        <a rel="help" href="#convertToPublicSourceUrl"><tt>&lt;convertToPublicSourceUrl&gt;</tt></a>
        so ERDDAP users see the public URL, even though ERDDAP gets data from the 
        private URL. 
      <li>Look in the log file, [bigParentDirectory]/logs/log.txt, for error messages.
      <li><a rel="help" href="#diagnoseProblems">Send an email to Bob</a> with as much information as possible.
        <br>&nbsp;
      </ul>      

    <li><a name="DasDds"><b>DasDds</b></a> is a command line program that you can use
      after you have created a first attempt at the XML for a new dataset in datasets.xml.
      With DasDds, you can repeatedly test and refine the XML.
      When you use the DasDds program:
      <ol>
      <li>DasDds asks you for the datasetID for the dataset you are working on.
      <li>DasDds tries to create the dataset with that datasetID.
        <ul>
        <li>It always prints lots of diagnostic messages.
        <li>It always deletes all /dataset/ files for the dataset (for safety) before trying
          to create the dataset.  So for aggregated datasets, you might want to adjust the 
          fileNameRegex temporarily to limit the number of files the data constructor finds.
        <li>If it fails (for whatever reason), it will show you the error message.
          Read the diagnostic messages and the error message carefully.
          Then you can make a change to the XML and let DasDds try to create the dataset again.
        </ul>
      <li>If DasDds can create the dataset, DasDds will then show you the .das and .dds for the dataset
        and put the information on the system clipboard. Often, you will want to make some small 
        change to the dataset's XML to clean up the dataset's metadata.
      </ol>
      By going through this cycle repeatedly, you will eventually revise the dataset's XML
      so that the dataset can be created and so that the dataset's metadata is as you want it to be.
      If you use "DasDds -verbose", it will print more diagnostic messages than usual.
    </ul>

<p><b><a name="basicStructure">The basic structure</a> of the datasets.xml file is:</b>
<pre>
&lt;?xml version="1.0" encoding="ISO-8859-1" ?&gt;
&lt;erddapDatasets&gt;
  <a rel="help" href="#convertToPublicSourceUrl">&lt;convertToPublicSourceUrl /&gt;</a> &lt;!-- 0 or more --&gt;
  <a rel="help" href="#requestBlacklist">&lt;requestBlacklist&gt;</a>...&lt;/requestBlacklist&gt; &lt;!-- 0 or 1 --&gt;
  <a rel="help" href="#subscriptionEmailBlacklist">&lt;subscriptionEmailBlacklist&gt;</a>...&lt;/subscriptionEmailBlacklist&gt; &lt;!-- 0 or 1 --&gt;
  <a rel="help" href="#user">&lt;user username="..." password="..." roles="..." /&gt;</a> &lt;!-- 0 or more --&gt;
  &lt;<a rel="help" href="#datasetTypes">dataset</a>&gt;...&lt;/dataset&gt; &lt;!-- 1 or more --&gt;
&lt;/erddapDatasets&gt;
</pre>
It is possible that other encodings will be allowed in the future, but for now, only ISO-8859-1 is recommended.


<br>&nbsp;
<hr>
<h2><a name="notes">Notes</a></h2>
Working with the datasets.xml file is a non-trivial project. 
Please read this entire web page carefully, especially these notes.

<ul>
<li><b>Hint</b> - It is often easier to generate the XML for a dataset by making a copy of a working 
dataset description in dataset.xml and then modifying it.
<br>&nbsp;

<li><b><a name="encodingSpecialCharacters">Encoding</a> Special Characters</b> - Since datasets.xml is an XML file, you need to encode "&amp;", "&lt;", and "&gt;" 
  in any content as "&amp;amp;", "&amp;lt;", and "&amp;gt;".
  <br>Wrong: <tt>&lt;title&gt;Time &amp; Tides&lt;/title&gt;</tt>
  <br>Right: &nbsp;&nbsp;<tt>&lt;title&gt;Time &amp;amp; Tides&lt;/title&gt;</tt> 
<br>&nbsp;

<li><b><a name="noSyntaxErrors">XML</a> doesn't tolerate syntax errors.</b> After you edit the dataset.xml file, it is a good idea 
to verify that the result is well-formed XML by pasting the XML text into an XML checker like
<a rel="help" href="http://www.xml.com/pub/a/tools/ruwf/check.html">RUWF</a>.
<br>&nbsp;

<li><b><a name="diagnoseProblems">Other</a> <a name="errorMessages">Ways</a>
  To Diagnose Problems With Datasets</b>
<br>In addition to the two main <a rel="help" href="#Tools">Tools</a>, 
<ul>
<li><a rel="help" href="http://coastwatch.pfeg.noaa.gov/erddap/download/setup.html#log">log.txt</a> 
  is a log file with all of ERDDAP's diagnostic messages.
<li>The <a rel="help" href="http://coastwatch.pfeg.noaa.gov/erddap/download/setup.html#dailyReport">Daily Report</a> 
    has more information than the status page, including a list of datasets that 
  didn't load and the exceptions (errors) they generated.
<li>The <a rel="help" href="http://coastwatch.pfeg.noaa.gov/erddap/download/setup.html#statusPage">Status Page</a> 
  is a quick way to check ERDDAP's status from any web browser.
  It includes a list of datasets that didn't load (although not the related exceptions) and 
  taskThread statistics (showing the progress of 
    <a rel="help" href="#EDDGridCopy">EDDGridCopy</a> and 
    <a rel="help" href="#EDDTableCopy">EDDTableCopy</a> datasets). 
<li>If you get stuck, please send an email with the details to <tt>bob dot simons at noaa dot gov</tt>.
<br>&nbsp;
</ul>

<li><b><a name="LLAT">The longitude, latitude, altitude, and time (LLAT)</a> variables names are special</b>.
  <ul>
  <li>LLAT variables are made known to ERDDAP if the axis variable's (for EDDGrid datasets) or data
    variable's (for EDDTable datasets) destinationName is "longitude", "latitude", "altitude", or "time".
  <li>We strongly encourage you to use these standard names for these variables whenever possible.
    If you don't use these special variable names, ERDDAP won't recognize their significance and, for example, 
    will make a graph instead of a map if the x axis variable is lon and the y axis variable is lat.
  <li>Use the destinationNames "longitude" and "latitude" only if the units are degrees_east 
    and degrees_north, respectively.
    If your data doesn't fit these requirements, use different variable names 
    (e.g., lonRadians, latRadians).
  <li>Use the destinationName "altitude" only if the data is the distance above or below sea level.
    Use 
    <a rel="help" href="#altitudeMetersPerSourceUnit"><tt>&lt;altitudeMetersPerSourceUnit&gt;</tt></a>
    to convert the data to meter above sea level (e.g., use -1 for data that was
    originally depth in meters).
    If you know the 
    <a rel="help" href="http://www.oostethys.org/best-practices/verticalcrs">vertical&nbsp;datum</a>, 
    please specify it in the metadata.    
    If your data doesn't fit these requirements, 
    use a different destinationName (e.g., aboveGround, depth,
    distanceToBottom).
  <li>Use the destinationName "time" only for variables that include the entire date+time 
    (or date, if that is all there is).
    If, for example, there are separate columns for date and timeOfDay, don't use the variable name "time".
    See <a rel="help" href="#units">units</a> for a discussion of time units.
  <li>ERDDAP will automatically add lots of metadata to LLAT variables (e.g., "ioos_category", "units", 
    and several standards-related attributes like "_CoordinateAxisType"). 
  <li>ERDDAP will automatically, on-the-fly, add lots of global metadata related to the LLAT values 
    of the selected data subset (e.g., "geospatial_lon_min"). 
  <li>Clients that support these metadata standards will be able to take advantage of the added metadata
    to position the data in time and space.
  <li>Clients will find it easier to generate queries that include LLAT variables because the variable's 
    names are the same in all relevant datasets.
  <li>LLAT variables are treated specially by Make A Graph. For example, if the X Axis variable is 
    "longitude" and the Y Axis variable is "latitude", you will get a map (using a standard
    projection, and with a land mask, political boundaries, etc.) instead of a graph.
  <li>If you have longitude and latitude data expressed in different units and thus 
    with different destinationNames, e.g.,
    lonRadians and latRadians, Make A Graph will make graphs (e.g., time series) instead of maps.
  <li><a name="timeVariable">The</a> time variable and related <a rel="help" href="#units">timeStamp variables</a> are unique in that they
    always convert data values from the source's time format (what ever it is) into a numeric value
    (seconds since 1970-01-01T00:00:00Z) or a String value (ISO 8601:2004(E) format), depending on the
    situation.
  <li>Note that ERDDAP does NOT follow the CF standard when converting "years since" and
    "months since" time values to "seconds since". The CF standard defines a year as a 
    fixed, single value: 3.15569259747e7 seconds. And CF defines a month as year/12.
    Unfortunately, most/all datasets that we have seen that use "years since" or 
    "months since" clearly intend the values to be calendar years or calendar months. 
    For example, "3 months since 1970-01-01" is clearly intended to mean 1970-04-01.
    So, ERDDAP interprets "years since" and "months since" as calendar years and months,
    and does not follow the strict CF standard.
  <li>When a user requests time data, they can request it by specifying the time as a numeric value
    (seconds since 1970-01-01T00:00:00Z) or a String value (ISO 8601:2004(E) format).
  <li>See <a rel="help" href="#units">units</a> for more information about time and timeStamp variables.
  <li>ERDDAP has a utility to 
    <a rel="help" href="http://coastwatch.pfeg.noaa.gov/erddap/convert/time.html">Convert
    a Numeric Time to/from a String Time</a>.
  <li>See <a rel="help" href="http://coastwatch.pfeg.noaa.gov/erddap/convert/time.html#erddap">How ERDDAP
     Deals with Time</a>.
    <br>&nbsp;
  </ul>

<li><b><a name="dataStructures">Why</a> just two basic data structures?</b>
  <ul>
  <li>Since it is difficult for human clients and computer clients to deal with a complex set of 
    possible dataset structures, ERDDAP uses just two basic data structures: 
    <ul>
    <li>a <a rel="help" href="http://coastwatch.pfel.noaa.gov/erddap/griddap/documentation.html#dataModel">gridded 
    data structure</a> (for example, for satellite data and model data) and 
    <li>a <a rel="help" href="http://coastwatch.pfel.noaa.gov/erddap/tabledap/documentation.html#dataModel">tabular 
    data structure</a> (for example, for in-situ buoy, station, and trajectory data).
    </ul>
  <li>Certainly, not all data can be expressed in these structures, but much of it can. 
    Tables, in particular, are very flexible data structures
    (look at the success of relational database programs).
  <li>This makes data queries easier to construct.
  <li>This makes data responses have a simple structure, which makes it easier to serve the data 
    in a wider variety of standard file types (which often just support simple data structures). 
    This is the main reason that we set up ERDDAP this way.
  <li>This, in turn, makes it very easy for us (or anyone) to write client software which works with all
    ERDDAP datasets.
  <li>This makes it easier to compare data from different sources. 
  <li>We are very aware that if you are used to working with data in other data structures 
    you may initially think that this approach is simplistic or insufficient.
    But all data structures have tradeoffs. None is perfect. 
    Even the do-it-all structures have their downsides: working with them is complex and 
    the files can only be written or read with special software libraries.
    If you accept ERDDAP's approach enough to try to work with it, you may find that it has its
    advantages (notably the support for multiple file types that can hold the data responses).
    The 
    <a rel="help" href="http://coastwatch.pfel.noaa.gov/erddap/images/erddapTalk/erddapTechTalk.html">ERDDAP slide show</a>
    (particularly the
    <a rel="help" href="http://coastwatch.pfel.noaa.gov/erddap/images/erddapTalk/erddapTechTalk.html#dataStructures">data
    structures slide</a>)
    talk a lot about these issues.
  <li>And even if this approach sounds odd to you, most ERDDAP clients will never notice --
    they will simply see that all of the datasets have a nice simple structure
    and they will be thankful that they can get data from a wide variety of sources returned in a
    wide variety of file formats.
    <br>&nbsp;
  </ul>

<li><b><a name="differentDimensions">What</a> if the grid variables in the source dataset DON'T share the same axis variables?</b>
  In EDDGrid datasets, all data variables MUST use (share) all of the axis variables. 
  So if a source dataset has some variables with one set of dimensions, and other variables with
  a different set of dimensions, you will have to make two datasets in ERDDAP.
  For example, you might make one ERDDAP dataset entitled "Some Title (at surface)" to hold variables
  that just use [time][latitude][longitude] dimensions and make another ERDDAP dataset entitled 
  "Some Title (at depths)" to hold the variables that use [time][altitude][latitude][longitude].
  Or perhaps you can change the data source to add a dimension with a single value (for example,
  altitude=0) to make the variables consistent. 
  <br>&nbsp;

<li><b><a name="projections">Projected Gridded Data</a></b>
  - Modelers (and others) often work with gridded data on various
  non-cylindrical projections (e.g., conic, polar stereographic). 
  Some end users want the projected data so there is no loss of information. 
  For those clients, ERDDAP can serve the data, as is, if the ERDDAP administrator breaks the 
  original dataset into a few datasets, with each part including variables which share the same
  axis variables. 
  Yes, that seems odd to people involved and it is different from most OPeNDAP servers.
  But ERDDAP emphasizes making the data available in many formats. 
  That is possible because ERDDAP uses/requires a more uniform data structure. 
  Although it is a little awkward (i.e., different that expected), ERDDAP can distribute the projected data.

<p>[Yes, ERDDAP could have looser requirements for the data structure, but keep the requirements for
  the output formats. But that would lead to confusion among many users, particularly newbies,
  since many seemingly valid requests for data with different structures would be invalid
  because the data wouldn't fit into the file type. 
  We keep coming back to the current system's design.]

<p>Some end users want lat lon geographic data (plate carree) for ease-of-use in different situations. 
  For that, we encourage the ERDDAP administrator to re-project the data onto a geographic
  (plate carree) projection and serve that form of the data as a different dataset. 
  Then both types of users are happy.

</ul>

<br>&nbsp;
<hr>
<p><b><a name="datasetTypes">List</a> of Types Datasets</b>
Datasets fall into two categories.  (<a rel="help" href="#dataStructures">Why?</a>)
<ul>
<li><a name="EDDGrid"><b>EDDGrid</b></a> datasets handle gridded data. 
  <ul>
  <li>In EDDGrid datasets, data variables are multi-dimensional arrays of data.
  <li>There MUST be an axis variable for each dimension.
    Axis variables MUST be specified in the order that the data variables use them.
  <li>In EDDGrid datasets, all data variables MUST use (share) all of the axis variables. 
    <br>(<a rel="help" href="#dataStructures">Why?</a> <a rel="help" href="#differentDimensions">What if they don't?</a>)
  <li>See the more complete description of the 
    <a rel="help" href="http://coastwatch.pfeg.noaa.gov/erddap/griddap/documentation.html#dataModel">EDDGrid data model</a>.
  <li>The EDDGrid dataset types are:
      <ul>
      <li><a rel="help" href="#EDDGridFromDap">EDDGridFromDap</a> handles gridded data from DAP servers.
      <li><a rel="help" href="#EDDGridFromErddap">EDDGridFromErddap</a> handles gridded data from a remote ERDDAP.
      <li><a rel="help" href="#EDDGridFromEtopo">EDDGridFromEtopo</a> just handles the built-in ETOPO topography data.
      <li><a rel="help" href="#EDDGridFromFiles">EDDGridFromFiles</a> is the superclass of all EDDGridFrom...Files classes.
      <li><a rel="help" href="#EDDGridFromNcFiles">EDDGridFromNcFiles</a> aggregates data from a group of local NetCDF 
        .nc files.
      <li><a rel="help" href="#EDDGridSideBySide">EDDGridSideBySide</a> aggregates two or more EDDGrid datasets side 
        by side.
      <li><a rel="help" href="#EDDGridAggregateExistingDimension">EDDGridAggregateExistingDimension</a> 
           aggregates two or more EDDGrid datasets based 
        on different values of the first dimension.
      <li><a rel="help" href="#EDDGridCopy">EDDGridCopy</a> makes a local copy of any EDDGrid's data and serves data from 
           the
        local copy.
        <br>&nbsp;
      </ul>
  </ul>
<li><a name="EDDTable"><b>EDDTable</b></a> datasets handle tabular data. 
  <ul>
  <li>Tabular data can be represented as a table with rows and columns. 
    Each column (a data variable) has a name, a set of attributes, and stores just one type of data.
  <li>See the more complete description of the 
    <a rel="help" href="http://coastwatch.pfeg.noaa.gov/erddap/tabledap/documentation.html#dataModel">EDDTable data model</a>.
  <li>The EDDTable dataset types are:
      <ul>
      <li><a rel="help" href="#EDDTableFromAsciiFiles">EDDTableFromAsciiFiles</a> aggregates data from 
      comma- or tab-separated tabular ASCII 
        data files.
      <li><a rel="help" href="#EDDTableFromAsciiService">EDDTableFromAsciiService</a> is the superclass
        of all EDDTableFromAsciiService... classes. 
      <li><a rel="help" href="#EDDTableFromAsciiServiceNOS">EDDTableFromAsciiServiceNOS</a> handles data from
        some of the NOAA NOS web services.
      <!-- li><a rel="help" href="#EDDTableFromBMDE">EDDTableFromBMDE</a> handles tabular data from BMDE servers. -->
      <li><a rel="help" href="#EDDTableFromDapSequence">EDDTableFromDapSequence</a> handles tabular data 
        from DAP sequence servers.
      <li><a rel="help" href="#EDDTableFromDatabase">EDDTableFromDatabase</a> handles tabular data from one database table.
      <li><a rel="help" href="#EDDTableFromErddap">EDDTableFromErddap</a> handles tabular data from a remote ERDDAP.
      <li><a rel="help" href="#EDDTableFromFiles">EDDTableFromFiles</a> is the superclass of all EDDTableFrom...Files classes.
      <!--li><a rel="help" href="#EDDTableFromMWFS">EDDTableFromMWFS</a> handles tabular data from microWFS servers. -->
      <li><a rel="help" href="#EDDTableFromHyraxFiles">EDDTableFromHyraxFiles</a> aggregates data from 
          files with several variables with shared 
        dimensions served by a 
          <a rel="help" href="http://www.opendap.org/download/hyrax.html">Hyrax OPeNDAP server</a>.
      <li><a rel="help" href="#EDDTableFromNcFiles">EDDTableFromNcFiles</a> aggregates data from 
          .nc files with several variables 
        with shared dimensions.
      <li><a rel="help" href="#EDDTableFromNcCFFiles">EDDTableFromNcCFFiles</a> aggregates data from 
        .nc files which use one of the file formats specified by the 
        <a href="http://cf-pcmdi.llnl.gov/documents/cf-conventions/1.6/cf-conventions.html#discrete-sampling-geometries">CF Discrete Sampling Geometries</a> 
        conventions.
      <li><a rel="help" href="#EDDTableFromThreddsFiles">EDDTableFromThreddsFiles</a> aggregates data from 
          files with several variables with
        shared dimensions served by a 
          <a rel="help" href="http://www.unidata.ucar.edu/projects/THREDDS/">THREDDS OPeNDAP server</a>.
      <li><a rel="help" href="#EDDTableFromNOS">EDDTableFromNOS</a> handles tabular data from NOS XML servers.
      <li><a rel="help" href="#EDDTableFromOBIS">EDDTableFromOBIS</a> handles tabular data from OBIS servers.
      <li><a rel="help" href="#EDDTableFromSOS">EDDTableFromSOS</a> handles tabular data from SOS servers.
      <li><a rel="help" href="#EDDTableCopy">EDDTableCopy</a> makes a local copy of any EDDTable's data 
         and serves data from the 
        local copy.
      </ul>
  </ul>
</ul>

<br>&nbsp;
<hr>
<h2><a name="datasetDescriptions">Detailed</a> Descriptions of Dataset Types</h2>


<p><a name="EDDGridFromDap"><b>EDDGridFromDap</b></a> handles grid variables from 
<a rel="help" href="http://opendap.org/">DAP</a> servers.
<ul>
<li>You can gather the information you need to create the XML for an EDDGridFromDap dataset by looking 
  at the source dataset's DDS and DAS files in your browser (by adding .das and .dds to the sourceUrl,
  for example, 
<a href="http://thredds1.pfeg.noaa.gov/thredds/dodsC/satellite/BA/ssta/5day.dds">http://thredds1.pfeg.noaa.gov/thredds/dodsC/satellite/BA/ssta/5day.dds</a>).
<li>EDDGridFromDap can get data from any multi-dimensional variable from a DAP data server.
  (Previously, EDDGridFromDap was limited to variables designated as "grid"'s, but that is no longer
  a requirement.)
<li>The skeleton XML for an EDDGridFromDap dataset is:

<pre>
&lt;dataset type="EDDGridFromDap" <a rel="help" href="#datasetID">datasetID</a>="..." <a rel="help" href="#active">active</a>="..." &gt;
  <a rel="help" href="#sourceUrl">&lt;sourceUrl&gt;</a>...&lt;/sourceUrl&gt;
  <a rel="help" href="#accessibleTo">&lt;accessibleTo&gt;</a>...&lt;/accessibleTo&gt; &lt;!-- 0 or 1 --&gt;
  <a rel="help" href="#reloadEveryNMinutes">&lt;reloadEveryNMinutes&gt;</a>...&lt;/reloadEveryNMinutes&gt;
  <a rel="help" href="#fgdcFile">&lt;fgdcFile&gt;</a>...&lt;/fgdcFile&gt; &lt;!-- 0 or 1 --&gt;
  <a rel="help" href="#iso19115File">&lt;iso19115File&gt;</a>...&lt;/iso19115File&gt; &lt;!-- 0 or 1 --&gt;
  <a rel="help" href="#onChange">&lt;onChange&gt;</a>...&lt;/onChange&gt; &lt;!-- 0 or more --&gt;
  <a rel="help" href="#altitudeMetersPerSourceUnit">&lt;altitudeMetersPerSourceUnit&gt;</a>...&lt;/altitudeMetersPerSourceUnit&gt; 
  <a rel="help" href="#globalAttributes">&lt;addAttributes&gt;</a>...&lt;/addAttributes&gt;
  <a rel="help" href="#axisVariable">&lt;axisVariable&gt;</a>...&lt;/axisVariable&gt; &lt;!-- 1 or more --&gt;
  <a rel="help" href="#dataVariable">&lt;dataVariable&gt;</a>...&lt;/dataVariable&gt; &lt;!-- 1 or more --&gt;
&lt;/dataset&gt;
</pre>
</ul>


<p><a name="EDDGridFromErddap"><b>EDDGridFromErddap</b></a> handles gridded data from 
a remote ERDDAP server.
<br><a name="EDDTableFromErddap"><b>EDDTableFromErddap</b></a> handles tabular data from 
a remote ERDDAP server.
<ul>
<li>EDDGridFromErddap and EDDTableFromErddap behave differently from all other types of datasets in ERDDAP.
  <ul>
  <li>Like other types of datasets, these datasets get information about the dataset from the source
    and keep it in memory.
  <li>Like other types of datasets, when ERDDAP searches for datasets, displays the Data Access Form, 
    or displays the Make A Graph form, ERDDAP uses the information about the dataset which is in memory.
  <li>Unlike other types of datasets, when ERDDAP receives a request for data or images from these datasets,
    ERDDAP
     <a rel="help" href="http://en.wikipedia.org/wiki/URL_redirection">redirects</a>
     the request to the remote ERDDAP server. The result is:
     <ul>
    <li>This is very efficient (CPU, memory, and bandwidth), because otherwise 
      <ol>
      <li>The composite ERDDAP has to send the request to the other ERDDAP (which takes time).
      <li>The other ERDDAP has to get the data, reformat it, and transmit the data to the composite
        ERDDAP.
      <li>The composite ERDDAP has to receive the data (using bandwidth), reformat it (using CPU and
        memory), and transmit the data to the user (using bandwidth).
      </ol>
      By redirecting the request and allowing the other ERDDAP to send the response directly to the user, 
      the composite ERDDAP spends essentially no CPU time, memory, or bandwidth on the request.
    <li>The redirect is transparent to the user regardless of the client software (a browser or any
      other software or command line tool).
     </ul>
  </ul>
<li>Normally, when an EDDGridFromErddap and EDDTableFromErddap are (re)loaded on your ERDDAP, they try
  to add a subscription to the remote dataset via the remote ERDDAP's email/URL subscription system.
  That way, whenever the remote dataset changes, the remote ERDDAP contacts the 
     <a rel="help" href="http://coastwatch.pfeg.noaa.gov/erddap/download/setup.html#setDatasetFlag">setDatasetFlag URL</a>
  on your ERDDAP so that the local dataset is reloaded ASAP and so that the local dataset always
  mimics the remote dataset.
  So, the first time this happens, you should get an email requesting that you validate the subscription.
  However, if the local ERDDAP can't send an email or if the remote ERDDAP's email/URL subscription
  system isn't active, you should email the remote ERDDAP administrator and request that s/he manually
  add 
    <tt><a rel="help" href="#onChange">&lt;onChange&gt;</a>...&lt;/onChange&gt;</tt>
    tags to all of the relevant datasets to call your dataset's 
    <a rel="help" href="http://coastwatch.pfeg.noaa.gov/erddap/download/setup.html#setDatasetFlag">setDatasetFlag URLs</a>. 
  See your ERDDAP daily report for a list of setDatasetFlag URLs, but just send the ones for
  EDDGridFromErddap and EDDTableFromErddap datasets to the remote ERDDAP administrator.
<li>EDDGridFromErddap and EDDTableFromErddap are the basis for
  <a rel="help" href="http://coastwatch.pfeg.noaa.gov/erddap/download/setup.html#clusters">clusters and federations</a> 
  of ERDDAPs, which efficiently distribute the CPU usage (mostly for making maps), memory usage, 
  dataset storage, and bandwidth usage of a large data center.
<li>EDDGridFromErddap and EDDTableFromErddap can't be used with remote datasets that require logging in
  (because they use <a rel="help" href="#accessibleTo"><tt>&lt;accessibleTo&gt;</tt></a>).
<li>For security reasons, EDDGridFromErddap and EDDTableFromErddap don't support the 
  <a rel="help" href="#accessibleTo"><tt>&lt;accessibleTo&gt;</tt></a> tag.
  See ERDDAP's 
    <a rel="help" href="http://coastwatch.pfeg.noaa.gov/erddap/download/setup.html">security system</a>
    for restricting access to some datasets to some users.
<li>The skeleton XML for an EDDGridFromErddap dataset is very simple, because the intent is just to mimic
  the remote dataset which is already suitable for use in ERDDAP:
<pre>
&lt;dataset type="EDDGridFromErddap" <a rel="help" href="#datasetID">datasetID</a>="..." <a rel="help" href="#active">active</a>="..." &gt;
  <a rel="help" href="#sourceUrl">&lt;sourceUrl&gt;</a>...&lt;/sourceUrl&gt;
  <a rel="help" href="#reloadEveryNMinutes">&lt;reloadEveryNMinutes&gt;</a>...&lt;/reloadEveryNMinutes&gt;
  <a rel="help" href="#fgdcFile">&lt;fgdcFile&gt;</a>...&lt;/fgdcFile&gt; &lt;!-- 0 or 1 --&gt;
  <a rel="help" href="#iso19115File">&lt;iso19115File&gt;</a>...&lt;/iso19115File&gt; &lt;!-- 0 or 1 --&gt;
  <a rel="help" href="#onChange">&lt;onChange&gt;</a>...&lt;/onChange&gt; &lt;!-- 0 or more --&gt;
&lt;/dataset&gt;
</pre>
<li>The skeleton XML for an EDDTableFromErddap dataset is very simple, because the intent is just to mimic
  the remote dataset, which is already suitable for use in ERDDAP:
<pre>
&lt;dataset type="EDDTableFromErddap" <a rel="help" href="#datasetID">datasetID</a>="..." <a rel="help" href="#active">active</a>="..." &gt;
  <a rel="help" href="#sourceUrl">&lt;sourceUrl&gt;</a>...&lt;/sourceUrl&gt;
  <a rel="help" href="#reloadEveryNMinutes">&lt;reloadEveryNMinutes&gt;</a>...&lt;/reloadEveryNMinutes&gt;
  <a rel="help" href="#fgdcFile">&lt;fgdcFile&gt;</a>...&lt;/fgdcFile&gt; &lt;!-- 0 or 1 --&gt;
  <a rel="help" href="#iso19115File">&lt;iso19115File&gt;</a>...&lt;/iso19115File&gt; &lt;!-- 0 or 1 --&gt;
  <a rel="help" href="#onChange">&lt;onChange&gt;</a>...&lt;/onChange&gt; &lt;!-- 0 or more --&gt;
&lt;/dataset&gt;
</pre>
</ul>


<p><a name="EDDGridFromEtopo"><b>EDDGridFromEtopo</b></a> just serves the 
<a rel="help" href="http://www.ngdc.noaa.gov/mgg/global/global.html">ETOPO1 Global 1-Minute Gridded Elevation Data Set</a> 
  (Ice Surface, grid registered, binary, 2byte int: etopo1_ice_g_i2.zip) which is 
  distributed with ERDDAP.
<ul>
<li>Only two datasetID's are supported for EDDGridFromEtopo, so that you can access the data with
  longitude values -180 to 180, or longitude values 0 to 360. 
<li>There are never any sub tags, since the data is already described within ERDDAP. 
<li>So the two options for EDDGridFromEtopo datasets are (literally):
<pre>
  &lt;!-- etopo180 serves the data from longitude -180 to 180 --&gt;
  &lt;dataset type="EDDGridFromEtopo" datasetID="etopo180" /&gt; 
  &lt;!-- etopo360 serves the data from longitude 0 to 360 --&gt;
  &lt;dataset type="EDDGridFromEtopo" datasetID="etopo360" /&gt; 
</pre>
</ul>

<p><a name="EDDGridFromFiles"><b>EDDGridFromFiles</b></a> is the superclass of all
EDDGridFrom...Files classes. 
You can't use EDDGridFromFiles directly. 
Instead, you can use subclasses of EDDGridFromFiles to handle specific file types:
   <ul>
   <li><a rel="help" href="#EDDGridFromNcFiles">EDDGridFromNcFiles</a> handles data from gridded 
      <a rel="help" href="http://en.wikipedia.org/wiki/GRIB">GRIB .grb</a> files,
      <a rel="help" href="http://www.hdfgroup.org/">HDF .hdf 4 (and 5?)</a> files,
      <a rel="help" href="http://www.unidata.ucar.edu/software/netcdf/">NetCDF .nc</a> files.
      This may work with other file types (e.g., BUFR), we just haven't tested it -- 
      please send us some sample files if you are interested.
   </ul>
Currently, no other file types are supported. 
But it is usually relatively easy to support other file types. Contact us if you have requests.
Or, if your data is in an old file format that you would like to move away from, 
we recommend converting the files to be NetCDF .nc files. NetCDF is a widely supported format, 
allows fast random access to the data, and is already supported by ERDDAP.

<p>Details - The following information applies to all of the subclasses of EDDGridFromFiles.
<ul>
<li><b>Aggregation</b> - This class aggregates data from local files. 
  The resulting dataset appears as if all of the file's data had been combined.
  The local files all MUST have the same dataVariables (as defined in the dataset's datasets.xml).
  All of the dataVariables MUST use the same axisVariables/dimensions (as defined in the dataset's
  datasets.xml).
  The files will be aggregated based on the first (left-most) dimension, sorted in ascending order.
  Each file MAY have data for one or more values of the first dimension, but there can't be any
  overlap between files.
  If a file has more than one value for the first dimension, the values MUST be sorted in ascending
  order, with no ties.
  All files MUST have exactly the same values for all of the other dimensions.
  All files MUST have exactly the same <a rel="help" href="#units">units</a> metadata for all axisVariables
  and dataVariables.
  For example, the dimensions might be [time][altitude][latitude][longitude], and the files might
  have the data for one time (or more) value(s) per file.
  The big advantages of aggregation are: <ul>
    <li>The size of the aggregated data set can be much larger than a single file can be conveniently (~2GB).
    <li>For near-real-time data, it is easy to add a new file with the latest chunk of data.
      You don't have to rewrite the entire dataset.
    </ul>
<li><b>Directories</b> - The files MAY be in one directory, or in a directory and its subdirectories (recursively).
  Note that if there are a large number of files (e.g., &gt;1000), the operating system (and thus 
  EDDGridFromFiles) will operate much more efficiently if you store the files in a series of
  subdirectories.
<li><b>Cached File Information</b> - When an EDDGridFromFiles dataset is first loaded, 
  EDDGridFromFiles reads information from all of the relevant files 
  and creates tables in memory with information about each valid file and each invalid file
  (one file per row). 
  <ul>
  <li>The tables are also stored on disk, as .json files in [bigParentDirectory]/dataset in
    files named:
    <br>&nbsp;&nbsp;[datasetID].dirs.json (which holds a list of unique directory names),
    <br>&nbsp;&nbsp;[datasetID].files.json (which holds the table with each valid file's information),
    <br>&nbsp;&nbsp;[datasetID].bad.json (which holds the table with each bad file's information).
  <li>The copy of the file information tables on disk is also useful when ERDDAP is shut down and restarted: 
    it saves EDDGridFromFiles from having to re-read all of the data files.
  <li>You shouldn't ever need to delete or work with these files.
    You can delete these files (but why?).
    If you ever do need to delete these files (why?), you can do it when ERDDAP is running. 
    (Then set a flag.)
  <li>If you want to encourage ERDDAP to update the stored dataset information 
    (for example, if you just added, removed, or changed some files to the dataset's data directory), 
    use the 
      <a rel="help" href="http://coastwatch.pfeg.noaa.gov/erddap/download/setup.html#flag">flag system</a>
      to force ERDDAP to update the cached file information.
  </ul>
<li><b>Handling Requests</b> - 
    When a client's request for data is processed, EDDGridFromFiles can quickly look 
  in the table with the valid file information to see which files have the requested data.
<li><b>Updating the Cached File Information</b> - Whenever the dataset is reloaded, the cached file
  information is updated.
  <ul>
    <li>The dataset is reloaded periodically as determined by the 
      <tt>&lt;reloadEveryNMinutes&gt;</tt> 
      in the dataset's information in datasets.xml.
    <li>The dataset is reloaded as soon as possible whenever ERDDAP detects that you have added,
       removed, <a rel="help" href="http://en.wikipedia.org/wiki/Touch_(Unix)">touch'd</a> 
        (to change the file's lastModified time), or changed a datafile.
    <li>The dataset is reloaded as soon as possible if you use the 
        <a rel="help" href="http://coastwatch.pfeg.noaa.gov/erddap/download/setup.html#flag">flag system</a>.
    </ul>
  When the dataset is reloaded, ERDDAP compares the currently available files to the cached file
  information tables.
  New files are read and added to the valid files table.
  Files that no longer exist are dropped from the valid files table.
  Files where the file timestamp has changed are read and their information is updated.
  The new tables replace the old tables in memory and on disk.
<li><b>Bad Files</b> - The table of bad files and the reasons the files were declared bad (corrupted file, 
  missing variables, etc.) is emailed to the emailEverythingTo email address (probably you)
  every time the dataset is reloaded. You should replace or repair these files as soon as possible.
<li><b>FTP Trouble/Advice</b> - If you FTP new data files to the ERDDAP server while ERDDAP is running,
  there is the chance that ERDDAP will be reloading the dataset during the FTP process.
  It happens more often than you might think!
  If it happens, the file will appear to be valid (it has a valid name), but the file isn't yet valid.
  If ERDDAP tries to read data from that invalid file, the resulting error will cause the file
  to be added to the table of invalid files.
  This is not good.
  To avoid this problem, use a temporary file name when FTP'ing the file, e.g., ABC2005.nc_TEMP .
  Then, the fileNameRegex test (see below) will indicate that this is not a relevant file.
  After the FTP process is complete, rename the file to the correct name.
  The renaming process will cause the file to become relevant in an instant.
<li><b>The skeleton XML</b> for all EDDGridFromFiles subclasses is:
<pre>
&lt;dataset type="EDDGridFrom...Files" <a rel="help" href="#datasetID">datasetID</a>="..." <a rel="help" href="#active">active</a>="..." &gt;
  <a rel="help" href="#accessibleTo">&lt;accessibleTo&gt;</a>...&lt;/accessibleTo&gt; &lt;!-- 0 or 1 --&gt;
  <a rel="help" href="#reloadEveryNMinutes">&lt;reloadEveryNMinutes&gt;</a>...&lt;/reloadEveryNMinutes&gt;
  <a rel="help" href="#fgdcFile">&lt;fgdcFile&gt;</a>...&lt;/fgdcFile&gt; &lt;!-- 0 or 1 --&gt;
  <a rel="help" href="#iso19115File">&lt;iso19115File&gt;</a>...&lt;/iso19115File&gt; &lt;!-- 0 or 1 --&gt;
  <a rel="help" href="#onChange">&lt;onChange&gt;</a>...&lt;/onChange&gt; &lt;!-- 0 or more --&gt;
  <a rel="help" href="#altitudeMetersPerSourceUnit">&lt;altitudeMetersPerSourceUnit&gt;</a>...&lt;/altitudeMetersPerSourceUnit&gt; 
  &lt;fileDir&gt;...&lt;/fileDir&gt; &lt;-- The directory (absolute) with the data files. --&gt;
  &lt;recursive&gt;true|false&lt;/recursive&gt; &lt;-- Indicates if subdirectories
    of fileDir have data files, too. --&gt;
  &lt;fileNameRegex&gt;...&lt;/fileNameRegex&gt; &lt;-- A <a rel="help" href="http://download.oracle.com/javase/1.4.2/docs/api/java/util/regex/Pattern.html">regular expression</a> 
    (<a rel="help" href="http://www.vogella.de/articles/JavaRegularExpressions/article.html">tutorial</a>) describing valid data files names, 
    e.g., ".*\.nc" for all .nc files. --&gt;
  &lt;metadataFrom&gt;...&lt;/metadataFrom&gt; &lt;-- The file to get 
    metadata from ("first" or "last" (the default) based on file's 
    lastModifiedTime). --&gt;
  <a rel="help" href="#globalAttributes">&lt;addAttributes&gt;</a>...&lt;/addAttributes&gt;
  <a rel="help" href="#axisVariable">&lt;axisVariable&gt;</a>...&lt;/axisVariable&gt; &lt;!-- 1 or more --&gt;
  <a rel="help" href="#dataVariable">&lt;dataVariable&gt;</a>...&lt;/dataVariable&gt; &lt;!-- 1 or more --&gt;
&lt;/dataset&gt;
</pre>
</ul>

<p><a name="EDDGridFromNcFiles"><b>EDDGridFromNcFiles</b></a> aggregates data from local, gridded, 
      <a rel="help" href="http://en.wikipedia.org/wiki/GRIB">GRIB .grb and .grb2</a> files,
      <a rel="help" href="http://www.hdfgroup.org/">HDF .hdf 4 (and 5?)</a>
files,
    <a rel="help" href="http://www.unidata.ucar.edu/software/netcdf/">NetCDF .nc</a> files.
This may work with other file types (e.g., BUFR), we just haven't tested it -- please send us
some sample files.

<p>Note that for GRIB files, ERDDAP will make a .gbx index file the first time it reads each GRIB file.
So the GRIB files must be in a directory where the "user" that ran Tomcat has read+write permission.

<p>See this class' superclass, <a rel="help" href="#EDDGridFromFiles">EDDGridFromFiles</a>, for information
on how to use this class and how this class works.


<p><a name="EDDGridSideBySide"><b>EDDGridSideBySide</b></a> 
aggregates two or more EDDGrid datasets (the children) side by side.
<ul>
<li>The resulting dataset has all of the variables from all of the child datasets.
<li>The parent dataset and all of the child datasets MUST have different datasetIDs.
  If any names in a family are exactly the same, the dataset will fail to load
  (with the error message that the values of the aggregated axis are not in sorted order).
<li>All children MUST have the same source values for axisVariables[1+] (e.g., latitude, longitude). 
<li>The children may have different source values for axisVariables[0] (e.g., time), but they are
  usually largely the same.
<li>The parent dataset will appear to have all of the axisVariables[0] source values from all of the children.
<li>For example, this lets you combine a source dataset with a vector's u-component and another source
  dataset with a vector's v-component, so the combined data can be served.
<li>Children created by this method are held privately.
  They are not separately accessible datasets (e.g., by client data requests or by 
    <a rel="help" href="http://coastwatch.pfeg.noaa.gov/erddap/download/setup.html#flag">flag files</a>).
<li>The only allowed sub tags are <tt>&lt;dataset&gt;</tt> tags specifying the child datasets. 
<li>The global metadata and settings for the parent comes from the global metadata and settings for
  the first child.
<li>If there is an exception while creating the first child, the parent will not be created.
<li>If there is an exception while creating other children, this sends an email to
  <tt>emailEverythingTo</tt> (as specified in 
  <a rel="help" href="http://coastwatch.pfeg.noaa.gov/erddap/download/setup.html#setup.xml">setup.xml</a>) 
  and continues with the other children.
<li>The skeleton XML for an EDDGridSideBySide dataset is:
<pre>
&lt;dataset type="EDDGridSideBySide" <a rel="help" href="#datasetID">datasetID</a>="..." <a rel="help" href="#active">active</a>="..." &gt;
  &lt;dataset&gt;...&lt;/dataset&gt; &lt;!-- 2 or more --&gt;
  <a rel="help" href="#accessibleTo">&lt;accessibleTo&gt;</a>...&lt;/accessibleTo&gt; &lt;!-- 0 or 1 --&gt;
  <a rel="help" href="#fgdcFile">&lt;fgdcFile&gt;</a>...&lt;/fgdcFile&gt; &lt;!-- 0 or 1 --&gt;
  <a rel="help" href="#iso19115File">&lt;iso19115File&gt;</a>...&lt;/iso19115File&gt; &lt;!-- 0 or 1 --&gt;
  <a rel="help" href="#onChange">&lt;onChange&gt;</a>...&lt;/onChange&gt; &lt;!-- 0 or more --&gt;
&lt;/dataset&gt;
</pre>
</ul>

<p><a name="EDDGridAggregateExistingDimension"><b>EDDGridAggregateExistingDimension</b></a> 
aggregates two or more EDDGrid datasets based on different
  values of the first dimension.
<ul>
<li>For example, one child dataset might have 366 values (for 2004) for the time dimension and another
  child might have 365 values (for 2005) for the time dimension.
<li>All the values for all of the other dimensions (e.g., latitude, longitude) MUST be identical
  for all of the children.
<li>The parent dataset and the child dataset MUST have different datasetIDs.
  If any names in a family are exactly the same, the dataset will fail to load
  (with the error message that the values of the aggregated axis are not in sorted order).
<li>Currently, the child dataset MUST be an EDDGridFromDap dataset and MUST have
  the lowest values of the aggregated dimension (usually the oldest time values). 
  All of the other children MUST be almost identical datasets (differing just in the values
  for the first dimension) and are specified by just their sourceUrl.
<li>The aggregate dataset gets its metadata from the first child.
<li><tt>ensureAxisValuesAreEqual</tt> - This tag is OPTIONAL. 
  If true (the default), the non-first-axis values MUST be exactly equal in all children. 
  If false, some minor variation is allowed(for example, it would allow 0.1 in one child and
  0.1000000002 in another).
  Only use <tt>false</tt> if you need to and if you are certain that the variation that is present 
  is acceptable to you.
<li>The <a rel="help" href="#GenerateDatasetsXml">GenerateDatasetsXml program</a> can make a rough draft of the 
    datasets.xml for an
  EDDGridAggregateExistingDimension based on a set of files served by a Hyrax or THREDDS server.
  For example, use this input for the program (the "/1988" in the URL makes the example run faster):<tt>
  <br>&nbsp;&nbsp;EDDType? EDDGridAggregateExistingDimension
  <br>&nbsp;&nbsp;Server type (hyrax or thredds)? hyrax
  <br>&nbsp;&nbsp;Parent URL (e.g., for hyrax, ending in "contents.html"; 
  <br>&nbsp;&nbsp;&nbsp;&nbsp;for thredds, ending in "catalog.xml")
  <br>&nbsp;&nbsp;? http://dods.jpl.nasa.gov/opendap/ocean_wind/ccmp/L3.5a/data/
  <br>&nbsp;&nbsp;&nbsp;&nbsp;flk/1988/contents.html
  <br>&nbsp;&nbsp;File name regex (e.g., ".*\.nc")? month.*flk\.nc\.gz
  <br>&nbsp;&nbsp;ReloadEveryNMinutes (e.g., 10080)? 10080</tt>
  <br>You can use the resulting <tt>&lt;sourceUrl&gt;</tt> tags or 
  delete them and uncomment the <tt>&lt;sourceUrl&gt;</tt> tag 
  (so that new files are noticed each time
  the dataset is reloaded.
<li>The skeleton XML for an EDDGridAggregateExistingDimension dataset is:

<pre>
&lt;dataset type="EDDGridAggregateExistingDimension" <a rel="help" href="#datasetID">datasetID</a>="..." 
    <a rel="help" href="#active">active</a>="..." &gt;
  &lt;dataset&gt;...&lt;/dataset&gt; &lt;!-- This is a regular <a rel="help" href="#EDDGridFromDap">EDDGridFromDap</a> 
    dataset description child with the lowest values for the aggregated dimensions. --&gt;
  <a rel="help" href="#sourceUrl">&lt;sourceUrl&gt;</a>...&lt;/sourceUrl&gt; &lt;!-- 0 or many; the sourceUrls for 
    other children.  These children must be listed in order of ascending values 
    for the aggregated dimension. --&gt;
  &lt;sourceUrls serverType="..." regex="..." recursive="true" 
    &gt;http://<i>someServer</i>/thredds/<i>someSubdirectory</i>/catalog.xml&lt;/sourceUrls&gt; 
    &lt;!-- 0 or 1. This specifies how to find the other children, instead 
    of using separate sourceUrl tags for each child.  The advantage of this
    is: new children will be detected each time the dataset is reloaded. 
    The serverType must be "thredds" or "hyrax".  
    An example of a <a rel="help" href="http://download.oracle.com/javase/1.4.2/docs/api/java/util/regex/Pattern.html">regular expression</a> (regex) (<a rel="help" href="http://www.vogella.de/articles/JavaRegularExpressions/article.html">tutorial</a>) is .*\.nc 
    recursive can be "true" or "false".  
    An example of a thredds catalogUrl is
    http://thredds1.pfeg.noaa.gov/thredds/catalog/Satellite/aggregsatMH/chla/catalog.xml
    An example of a hyrax catalogUrl is
    http://podaac-opendap.jpl.nasa.gov/opendap/allData/ccmp/L3.5a/monthly/flk/1988/contents.html
    When these children are sorted by file name, they must be in order of
    ascending values for the aggregated dimension. --&gt;
  &lt;ensureAxisValuesAreEqual&gt;true(the default) or 
    false&lt;ensureAxisValuesAreEqual&gt; 
  <a rel="help" href="#accessibleTo">&lt;accessibleTo&gt;</a>...&lt;/accessibleTo&gt; &lt;!-- 0 or 1 --&gt;
  <a rel="help" href="#fgdcFile">&lt;fgdcFile&gt;</a>...&lt;/fgdcFile&gt; &lt;!-- 0 or 1 --&gt;
  <a rel="help" href="#iso19115File">&lt;iso19115File&gt;</a>...&lt;/iso19115File&gt; &lt;!-- 0 or 1 --&gt;
  <a rel="help" href="#onChange">&lt;onChange&gt;</a>...&lt;/onChange&gt; &lt;!-- 0 or more --&gt;
&lt;/dataset&gt;
</pre>
</ul>


<p><a name="EDDGridCopy"><b>EDDGridCopy</b></a> makes and maintains a local copy of another EDDGrid's data and
serves data from the local copy.
<ul>
<li>EDDGridCopy (and for tabular data, <a rel="help" href="#EDDTableCopy">EDDTableCopy</a>)
    is a very easy to use and a very effective
  <b>solution to some of the biggest problems with serving data from remote data sources:</b>
  <ul>
  <li>Accessing data from a remote data source can be slow.
    <ul>
    <li>They may be slow because they are inherently slow (e.g., an inefficient type of server), 
    <li>because they are overwhelmed by too many requests,
    <li>or because your server or the remote server is bandwidth limited.
    </ul>
  <li>The remote dataset is sometimes unavailable (again, for a variety of reasons).
  <li>Relying on one source for the data doesn't scale well (e.g., when many users and many ERDDAPs
    utilize it).
    <br>&nbsp;
  </ul>

<li>How It Works - EDDGridCopy solves these problems by automatically making and maintaining 
  a local copy of the data and serving data from the local copy.
  ERDDAP can serve data from the local copy very, very quickly.
  And making a local copy relieves the burden on the remote server.
  And the local copy is a backup of the original, which is useful in case something happens to the
  original.

  <p>There is nothing new about making a local copy of a dataset. What is new here is that this class
  makes it *easy* to create and *maintain* a local copy of data from a *variety* of types 
  of remote data sources and *add metadata* while copying the data.

<li>Chunks of Data - EDDGridCopy makes the local copy of the data by requesting chunks of data from the
  remote <tt>&lt;dataset&gt;</tt> .
  There will be a chunk for each value of the leftmost axis variable.
  Note that EDDGridCopy doesn't rely on the remote dataset's index numbers for the axis -- those
  may change.

  <p>WARNING: If the size of a chunk of data is so big that it causes problems (&gt; 1GB?), EDDGridCopy
  can't be used. (Sorry, we hope to have a solution for this problem in the future.)

<li>Local Files - Each chunk of data is stored in a separate netCDF file in a subdirectory of
  [bigParentDirectory]/copy/<i>datasetID</i>/ (as specified in 
    <a rel="help" href="http://coastwatch.pfeg.noaa.gov/erddap/download/setup.html#setup.xml">setup.xml</a>).
  File names created from axis values are modified to make them file-name-safe 
  (e.g., hyphens are replaced by "x2D") -- this doesn't affect the actual data.
  <br>&nbsp;

<li>New Data - Each time EDDGridCopy is reloaded, it checks the remote <tt>&lt;dataset&gt;</tt> to see what
  chunks are available.
  If the file for a chunk of data doesn't already exist, a request to get the chunk is added to a queue.
  ERDDAP's <a name="taskThread">taskThread</a> processes all the queued requests for chunks of data, 
    one-by-one.
  You can see statistics for the taskThread's activity on the
     <a rel="help" href="http://coastwatch.pfeg.noaa.gov/erddap/download/setup.html#statusPage">Status Page</a> and in the 
     <a rel="help" href="http://coastwatch.pfeg.noaa.gov/erddap/download/setup.html#dailyReport">Daily Report</a>.
  (Yes, ERDDAP could assign multiple tasks to this process, but that would use up lots of the
  remote data source's bandwidth, memory, and CPU time, and lots of the local ERDDAP's bandwidth,
  memory, and CPU time, neither of which is a good idea.)

  <p>NOTE: The very first time an EDDGridCopy is loaded, (if all goes well) lots of requests for chunks
  of data will be added to the taskThread's queue, but no local data files will have been created.
  So the constructor will fail but taskThread will continue to work and create local files.
  If all goes well, the taskThread will make some local data files and the next attempt to 
  reload the dataset (in ~15 minutes) will succeed, but initially with a very limited amount of data.

  <p>WARNING: If the remote dataset is large and/or the remote server is slow
  (that's the problem, isn't it?!), it will take a long time to make a complete local copy.
  In some cases, the time needed will be unacceptable.
  For example, transmitting 1 TB of data over a T1 line (0.15 GB/s) takes at least 60 days,
  under optimal conditions.
  Plus, it uses lots of bandwidth, memory, and CPU time on the remote and local computers.
  The solution is to mail a hard drive to the administrator of the remote data set so that
  s/he can make a copy of the dataset and mail the hard drive back to you.
  Use that data as a starting point and EDDGridCopy will add data to it.
  (That is one way that <a rel="help" href="http://aws.amazon.com/importexport/">Amazon's EC2 Cloud Service</a> 
    handles the problem, even though their system
  has lots of bandwidth.)

  <p>WARNING: If a given value for the leftmost axis variable disappears from the remote dataset,
  EDDGridCopy does NOT delete the local copied file. If you want to, you can delete it yourself.

<li>Recommended use -
  <ol>
  <li>Create the <tt>&lt;dataset&gt;</tt> entry (the native type, not EDDGridCopy)
    for the remote data source. 
    <br><b>Get it working correctly, including all of the desired metadata.</b> 
  <li>If it is too slow, add XML code to wrap it in an EDDGridCopy dataset.
    <ul>
    <li>Use a different datasetID (perhaps by changing the datasetID of the old datasetID slightly).
    <li>Copy the <tt>&lt;accessibleTo&gt;, &lt;reloadEveryNMinutes&gt;</tt> and 
      <tt>&lt;onChange&gt;</tt> from the
      remote EDDGrid's XML to the EDDGridCopy's XML.
      (Their values for EDDGridCopy matter; their values for the inner dataset become irrelevant.)
    </ul>
  <li>ERDDAP will make and maintain a local copy of the data.
    <br>&nbsp;
  </ol>

<li>WARNING: EDDGridCopy assumes that the data values for each chunk don't ever change. 
  If/when they do, you need to manually delete the chunk files in 
     [bigParentDirectory]/copy/<i>datasetID</i>/
  which changed and <a rel="help" href="http://coastwatch.pfeg.noaa.gov/erddap/download/setup.html#flag">flag</a> 
     the dataset to be reloaded so that the deleted chunks will be replaced.
  If you have an email subscription to the dataset, you will get two emails:
  one when the dataset first reloads and starts to copy the data, 
  and another when the dataset loads again (automatically) and detects the new local data files.
  <br>&nbsp;

<li>Change Metadata - If you need to change any addAttributes or change the order of the variables
  associated with the source dataset:
  <ol>
  <li>Change the addAttributes for the source dataset in datasets.xml, as needed. 
  <li>Delete one of the copied files.
  <li>Set a <a rel="help" href="http://coastwatch.pfeg.noaa.gov/erddap/download/setup.html#flag">flag</a> 
    to reload the dataset immediately.
    If you do use a flag and you have an email subscription to the dataset, you will get two emails:
    one when the dataset first reloads and starts to copy the data, 
    and another when the dataset loads again (automatically) and detects the new local data files.
  <li>The deleted file will be regenerated with the new metadata. 
    If the source dataset is ever unavailable, the EDDGridCopy dataset will get metadata 
    from the regenerated file, since it is the youngest file.
    <br>&nbsp;
  </ol>

<li>Skeleton XML - The skeleton XML for an EDDGridCopy dataset is:
<pre>
&lt;dataset type="EDDGridCopy" <a rel="help" href="#datasetID">datasetID</a>="..." <a rel="help" href="#active">active</a>="..." &gt;
  <a rel="help" href="#accessibleTo">&lt;accessibleTo&gt;</a>...&lt;/accessibleTo&gt; &lt;!-- 0 or 1 --&gt;
  <a rel="help" href="#reloadEveryNMinutes">&lt;reloadEveryNMinutes&gt;</a>...&lt;/reloadEveryNMinutes&gt;
  <a rel="help" href="#fgdcFile">&lt;fgdcFile&gt;</a>...&lt;/fgdcFile&gt; &lt;!-- 0 or 1 --&gt;
  <a rel="help" href="#iso19115File">&lt;iso19115File&gt;</a>...&lt;/iso19115File&gt; &lt;!-- 0 or 1 --&gt;
  <a rel="help" href="#onChange">&lt;onChange&gt;</a>...&lt;/onChange&gt; &lt;!-- 0 or more --&gt;
  <a rel="help" href="#sourceNeedsExpandedFP_EQ">&lt;sourceNeedsExpandedFP_EQ&gt;</a>true(default)|false&lt;/sourceNeedsExpandedFP_EQ&gt;
  &lt;dataset&gt;...&lt;/dataset&gt; &lt;!-- 1 --&gt;
&lt;/dataset&gt;
</pre>
</ul>


<!-- THIS IS INACTIVE. THERE ARE NO KNOWN VALID DATASETS. TESTING IS NO LONGER DONE.
p><a name="EDDTableFromBMDE"><b>EDDTableFromBMDE</b></a> handles data from a
<a rel="help" href="http://www.avianknowledge.net/content/about/bird-monitoring-data-exchange">BMDE</a> server.
<ul>
<li>BMDE servers expect an XML request and return an XML response.
<li>All BMDE servers return XML responses with the same variables, as specified in the 
<a rel="help" href="http://akn.ornith.cornell.edu/Schemas/bmde/BMDE-Bandingv1.38.08.xsd">BMDE schema</a>.
  The BMDE schema defines 515 data variables(!), but most BMDE servers only return data in a few of the variables.
  You should ask the BMDE administrator for a list of the data variables which are active for a given sourceCode.
  Then, just create ERDDAP dataVariables for those variables.
  ERDDAP will check that each dataVariable's sourceName is a valid BMDE name (without the "bmde:" prefix).
  ERDDAP will add some standard <a rel="help" href="#globalAttributes">sourceAttributes</a> for each dataVariable,
    so you usually will not need to define any <a rel="help" href="#globalAttributes">addAttributes</a>. 
<li>The skeleton XML for an EDDTableFromBMDE dataset is:
<pre>
&lt;dataset type="EDDTableFromBMDE" <a rel="help" href="#datasetID">datasetID</a>="..." <a rel="help" href="#active">active</a>="..." &gt;
  <a rel="help" href="#sourceUrl">&lt;sourceUrl&gt;</a>...&lt;/sourceUrl&gt;
  <a rel="help" href="#sourceCode">&lt;sourceCode&gt;</a>...&lt;/sourceCode&gt;
    &lt;!- - If you read the XML response from the sourceUrl, the source code (e.g., prbo05) 
    is the value from one of the &lt;resource&gt;&lt;code&gt; tags. - -&gt;
  <a rel="help" href="#accessibleTo">&lt;accessibleTo&gt;</a>...&lt;/accessibleTo&gt; &lt;!- - 0 or 1 - -&gt;
  <a rel="help" href="#reloadEveryNMinutes">&lt;reloadEveryNMinutes&gt;</a>...&lt;/reloadEveryNMinutes&gt;
  <a rel="help" href="#fgdcFile">&lt;fgdcFile&gt;</a>...&lt;/fgdcFile&gt; &lt;!- - 0 or 1 - -&gt;
  <a rel="help" href="#iso19115File">&lt;iso19115File&gt;</a>...&lt;/iso19115File&gt; &lt;!- - 0 or 1 - -&gt;
  <a rel="help" href="#onChange">&lt;onChange&gt;</a>...&lt;/onChange&gt; &lt;!- - 0 or more - -&gt;
  <a rel="help" href="#altitudeMetersPerSourceUnit">&lt;altitudeMetersPerSourceUnit&gt;</a>...&lt;/altitudeMetersPerSourceUnit&gt;
  <a rel="help" href="#dataVariable">&lt;dataVariable&gt;</a>...&lt;/dataVariable&gt; &lt;!- - 1 or more - -&gt;

&lt;/dataset&gt;
</pre>
</ul -->


<p><a name="EDDTableFromDapSequence"><b>EDDTableFromDapSequence</b></a> handles variables within 
1- and 2-level sequences from 
<a rel="help" href="http://opendap.org/">DAP</a> servers such as 
<a rel="help" href="http://www.epic.noaa.gov/epic/software/dapper/">DAPPER</a>.
<ul>
<li>You can gather the information you need to create the XML for an EDDTableFromDapSequence dataset
  by looking at the source dataset's DDS and DAS files in your browser 
  (by adding .das and .dds to the sourceUrl, for example, 
  <a rel="help" href="http://dapper.pmel.noaa.gov/dapper/epic/tao_time_series.cdp.dds">http://dapper.pmel.noaa.gov/dapper/epic/tao_time_series.cdp.dds</a>).
<li>A variable is in a DAP sequence if the .dds response indicates that the data structure holding
  the variable is a "sequence" (case insensitive).
<li>In some cases, you will see a sequence within a sequence, a 2-level sequence -- 
  EDDTableFromDapSequence handles these, too.
<li>The skeleton XML for an EDDTableFromDapSequence dataset is:

<pre>
&lt;dataset type="EDDTableFromDapSequence" <a rel="help" href="#datasetID">datasetID</a>="..." <a rel="help" href="#active">active</a>="..." &gt;
  <a rel="help" href="#sourceUrl">&lt;sourceUrl&gt;</a>...&lt;/sourceUrl&gt;
  <a rel="help" href="#accessibleTo">&lt;accessibleTo&gt;</a>...&lt;/accessibleTo&gt; &lt;!-- 0 or 1 --&gt;
  <a rel="help" href="#reloadEveryNMinutes">&lt;reloadEveryNMinutes&gt;</a>...&lt;/reloadEveryNMinutes&gt;
  <a rel="help" href="#fgdcFile">&lt;fgdcFile&gt;</a>...&lt;/fgdcFile&gt; &lt;!-- 0 or 1 --&gt;
  <a rel="help" href="#iso19115File">&lt;iso19115File&gt;</a>...&lt;/iso19115File&gt; &lt;!-- 0 or 1 --&gt;
  <a rel="help" href="#onChange">&lt;onChange&gt;</a>...&lt;/onChange&gt; &lt;!-- 0 or more --&gt;
  <a rel="help" href="#altitudeMetersPerSourceUnit">&lt;altitudeMetersPerSourceUnit&gt;</a>...&lt;/altitudeMetersPerSourceUnit&gt;
  &lt;outerSequenceName&gt;...&lt;/outerSequenceName&gt;
    &lt;!-- The name of the outer sequence for DAP sequence data. 
    This tag is REQUIRED. --&gt;
  &lt;innerSequenceName&gt;...&lt;/innerSequenceName&gt;
    &lt;!-- The name of the inner sequence for DAP sequence data. 
    This tag is OPTIONAL; use it if the DAP data is a two level 
    sequence. --&gt;
  <a rel="help" href="#sourceNeedsExpandedFP_EQ">&lt;sourceNeedsExpandedFP_EQ&gt;</a>true(default)|false&lt;/sourceNeedsExpandedFP_EQ&gt;
  <a rel="help" href="#sourceCanConstrainStringEQNE">&lt;sourceCanConstrainStringEQNE&gt;</a>true|false&lt;/sourceCanConstrainStringEQNE&gt;
  <a rel="help" href="#sourceCanConstrainStringGTLT">&lt;sourceCanConstrainStringGTLT&gt;</a>true|false&lt;/sourceCanConstrainStringGTLT&gt;
  <a rel="help" href="#sourceCanConstrainStringRegex">&lt;sourceCanConstrainStringRegex&gt;</a>...&lt;/sourceCanConstrainStringRegex&gt;
  &lt;skipDapperSpacerRows&gt;...&lt;/skipDapperSpacerRows&gt;
    &lt;!-- skipDapperSpacerRows specifies whether the dataset 
    will skip the last row of each innerSequence other than the 
    last innerSequence (because Dapper servers put NaNs in the 
    row to act as a spacer).  This tag is OPTIONAL. The default 
    is false.  It is recommended that you set this to true for 
    all Dapper sources and false for all other data sources. --&gt;
  <a rel="help" href="#globalAttributes">&lt;addAttributes&gt;</a>...&lt;/addAttributes&gt;
  <a rel="help" href="#dataVariable">&lt;dataVariable&gt;</a>...&lt;/dataVariable&gt; &lt;!-- 1 or more --&gt;
&lt;/dataset&gt;
</pre>
</ul>

<p><a name="EDDTableFromDatabase"><b>EDDTableFromDatabase</b></a> handles data from one
database table or <a rel="help" href="http://en.wikipedia.org/wiki/View_(database)">view</a>.
<ul>
<li>If the data you want to serve is in two or more tables (and needs a JOIN to extract data), 
  you need to make a new table (or a view) with the JOINed/flattened information.
  Contact your database administrator.
<li>You must get the appropriate JDBC 3 or JDBC 4 driver .jar file and put it in 
  [tomcat]/webapps/erddap/WEB-INF/lib after you install ERDDAP.
  For Postgresql, we got the JDBC 4 driver from 
     <a rel="help" href="http://jdbc.postgresql.org/download.html">http://jdbc.postgresql.org</a>
  and we use "org.postgresql.Driver" for the <tt>&lt;driverName&gt;</tt> 
  in datasets.xml (see below).
  For SQL Server, you can get the JTDS JDBC driver from 
    <a rel="help" href="http://jtds.sourceforge.net">http://jtds.sourceforge.net</a>
  and use "net.sourceforge.jtds.jdbc.Driver" for the <tt>&lt;driverName&gt;</tt>.
<li>You can gather most of the information you need to create the XML for an EDDTableFromDatabase
  dataset by contacting the database administrator and by searching the web.
  The <tt>&lt;driverName&gt;</tt>, driver .jar file, <tt>&lt;connectionProperty&gt;</tt> 
  names (e.g., "user",
  "password", and "ssl"), and some of the connectionProperty values can be found by searching
  the web for "JDBC connection properties <i>databaseType</i>" (e.g., Oracle, MySQL, PostgreSQL).
<li>It is difficult to create the correct datasets.xml information needed for ERDDAP to establish
  a connection to the database.  Be patient. Be methodical.
  Search the web for examples of using JDBC to connect to your type of database.
  Work closely with the database administrator, who may have relevant experience.
  If the dataset fails to load, read the 
    <a rel="help" href="#errorMessages">error message</a> carefully to find out why.
<li><a name="databaseDate">Database</a> Date Time Data - 
  Some database date time columns have no explicit time zone.
  Such columns are trouble for ERDDAP. 
  Databases support the concept of a date (with or without a time) without a time zone, as an
  approximate range of time.
  But Java (and thus ERDDAP) only deal with instantaneous date+times with a timezone. 
  So you may know that the date time data is based on a local time zone (with or without daylight savings)
  or the  GMT/Zulu time zone, but Java (and ERDDAP) don't.
  We originally thought we could work around this problem (e.g, by specifying a time zone for the
  column), but the database+JDBC+Java interactions made this an unreliable solution.
  <ul>
  <li>So, ERDDAP requires that you store all date and date time data in the database table 
    with a database data type that corresponds to the JDBC type "timestamp with time zone" 
    (ideally, that uses the GMT/Zulu time zone). 
  <li>In ERDDAP's datasets.xml, in the <tt>&lt;dataVariable&gt;</tt> tag for this variable, set
    <br>&nbsp;&nbsp;<tt>&lt;dataType&gt;double&lt;/dataType&gt;</tt> 
    <br>and in <tt>&lt;addAttributes&gt;</tt> set
    <br>&nbsp;&nbsp;<tt>&lt;att name="units"&gt;seconds since 1970-01-01T00:00:00Z&lt;/att&gt;</tt> .
  <li>Suggestion: If the data is a time range, it is useful to have the timestamp values refer to 
  the center of the implied time range (e.g., noon).
  For example, if a user has other data for 2010-03-26T13:00Z and they want the closest database
  data, then the data for 2010-03-26T12:00Z (representing data for that date) is obviously the best 
  (as opposed to the midnight before or after, where it is less obvious which is best).
  <li>ERDDAP has a utility to 
    <a rel="help" href="http://coastwatch.pfeg.noaa.gov/erddap/convert/time.html">Convert
    a Numeric Time to/from a String Time</a>.
  <li>See <a rel="help" href="http://coastwatch.pfeg.noaa.gov/erddap/convert/time.html#erddap">How ERDDAP
     Deals with Time</a>.
  </ul>
<li>Security - When working with databases, you need to do things as safely and securely as possible
  to avoid allowing a malicious user to damage your database or gain access to data they shouldn't
  have access to.
  ERDDAP tries to do things in a secure way, too.
  <ul>
  <li>Consider replicating, on a different computer, the database and database tables 
    with the data that you want ERDDAP to serve.  
    (Yes, for commercial databases like Oracle, this involves
    additional licensing fees. But for open source databases, like PostgreSQL and MySQL,
    this costs nothing.)  This gives you a high level of security and also 
    prevents ERDDAP requests from slowing down the original database.
  <li>We encourage you to set up ERDDAP to connect to the database as a database user that only has
    access to the <b>relevant</b> database(s) and only has READ privileges.
  <li>We encourage you to set up the connection from ERDDAP to the database so that it 
    <ul>
    <li>always uses SSL, 
    <li>only allows connections from one IP address (or one block of addresses) and from the one
       ERDDAP user, and 
    <li>only transfers passwords in their MD5 hashed form.
    </ul>
  <li>[KNOWN PROBLEM]The connectionProperties (including the password!) are stored as plain text
    in datasets.xml.
    Only the administrator should have READ and WRITE access to this file!
    No other users of the computer should have READ or WRITE access to this file!
    We haven't found a way to allow the administrator to enter the database password during
    ERDDAP's startup in Tomcat (which occurs without user input), so the password must be
    accessible in a file.
  <li>When in ERDDAP, the password and other connection properties are stored in "private" 
    Java variables.
  <li>Requests from clients are parsed and checked for validity before generating the SQL requests
    for the database.
  <li>Requests to the database are made with SQL PreparedStatements, to prevent SQL injection.
  <li>Requests to the database are submitted with executeQuery (not executeStatement) to limit
    requests to be read-only (so attempted SQL injection to alter the database will fail for this
    reason, too).
  </ul>
<li>SQL - It is easy for ERDDAP to convert user requests into simple SQL PreparedStatements. 
    For example, the ERDDAP request<tt>
    <br>&nbsp;&nbsp;time,temperature&amp;time&gt;=2008-01-01T00:00:00&amp;time&lt;=2008-02-01T00:00:00</tt>
    <br>will be converted into the SQL PreparedStatement<tt>
    <br>&nbsp;&nbsp;SELECT time, temperature WHERE time >= 2008-01-01T00:00:00 AND
    <br>&nbsp;&nbsp;time <= 2008-02-01T00:00:00</tt>
    <br>ERDDAP requests with <tt>&amp;distinct()</tt> and/or <tt>&amp;orderBy(<i>variables</i>)</tt> will add
      <tt>DISTINCT</tt> and/or <tt>ORDER BY <i>variables</i></tt> to the SQL prepared statement. In general, this will greatly slow down the response from the database.
    <br>ERDDAP logs the PreparedStatement in 
    <a rel="help" href="http://coastwatch.pfeg.noaa.gov/erddap/download/setup.html#log">log.txt</a>
    as<tt> 
    <br>&nbsp;&nbsp;statement=<i>thePreparedStatement</i></tt>.

<li>Views - EDDTableFromDatabase is limited to getting data from one table, but that shouldn't be a problem.
  If a table of interest has foreign keys which link to other tables,
  we recommend that you ask the database administrator to create a 
      <a rel="help" href="http://en.wikipedia.org/wiki/View_(database)">VIEW</a>.
  Views "can join and simplify multiple tables into a single virtual table" (Wikipedia).
  Views are great because: 
  <ul>
  <li>They simplify queries (since the queries don't have to specify the JOINs, etc.).
  <li>They are efficient (since the database just has to set it up once).
  <li>They increase abstraction (since the database can be changed without having to change how the
    VIEW appears to the client).
  </ul>
<li>Speed - If speed is a problem:
  <ul>
  <li>Set the Fetch Size - Databases return the data to ERDDAP in chunks.
    By default, different databases return a different number of rows in the chunks.
    Often this number is very small and so very inefficient.
    For example, the default for Oracle is 10!
    Read the JDBC documentation for your database's JDBC driver
    to find the connection property to set
    in order to increase this, and add this to the dataset's description
    in datasets.xml. For example, 
    <br>For MySQL, use
    <br><tt>&lt;connectionProperty name="defaultFetchSize"&gt;4096&lt;/connectionProperty&gt;</tt>
    <br>For Oracle, use
    <br><tt>&lt;connectionProperty name="defaultRowPrefetch"&gt;4096&lt;/connectionProperty&gt;</tt>
    <br>For PostgreSQL, use
    <br><tt>&lt;connectionProperty name="defaultFetchSize"&gt;4096&lt;/connectionProperty&gt;</tt>
    <br>but feel free to change the number.  Note that setting the number too big will
    <br>cause ERDDAP to use lots of memory and be more likely to run out of memory.

  <li>ConnectionProperties - Each database has other connection properties which
    can be specified in datasets.xml. Many of these will affect the performance
    of the ERDDAP to database connection. Please read the documentation for 
    your database's JDBC driver to see the options.
    If you find connection properties that are useful, please 
    send an email with the details to <tt>bob dot simons at noaa dot gov</tt>.

  <li>Make a Table - You will probably get faster responses if you periodically
    (every day? whenever there is new data?) generate an actual table (similarly to how you
    generated the VIEW) and tell ERDDAP to get data from the table instead of the VIEW. 
    Since any request to the table can then be
    fulfilled without JOINing another table, the response will be much faster.
  <li>Optimize/Vacuum the Table -
    <br>MySQL will respond much faster if you use
    <a rel="help" href="http://dev.mysql.com/doc/refman/5.1/en/optimize-table.html">OPTIMIZE TABLE</a>.
    <br>PostgreSQL will respond much faster if you 
    <a rel="help" href="http://www.postgresql.org/docs/8.3/static/sql-vacuum.html">VACUUM</a> the table.
    <br>Oracle doesn't have or need an analogous command.
  <li>Connection Pooling - 
    ERDDAP currently doesn't use connection pooling. ERDDAP makes a new connection 
    to the database for each SQL query that it sends to the database. 
    This adds about 0.1 seconds per request (sometimes longer, e.g., for remote databases), 
    but is a more robust and safe approach.
    We may add optional connection pooling in the future.
  <li>If all else fails, consider storing the data in a collection of .nc files.
      If they are logically organized (each with data for a chunk of space and time), 
      ERDDAP can extract data from them very quickly.
  </ul>
<li>The skeleton XML for an EDDTableFromDapSequence dataset is:
<pre>
&lt;dataset type="EDDTableFromDatabase" <a rel="help" href="#datasetID">datasetID</a>="..." <a rel="help" href="#active">active</a>="..." &gt;
  <a rel="help" href="#sourceUrl">&lt;sourceUrl&gt;</a>...&lt;/sourceUrl&gt;
    &lt;!-- Put the database name at the end, for example, 
      "jdbc:postgresql://123.45.67.89:5432/databaseName". REQUIRED. --&gt;
  &lt;driverName&gt;...&lt;/driverName&gt;
    &lt;!-- The high-level name of the database driver, e.g., 
      "org.postgresql.Driver".  You need to put the actual database 
      driver .jar file (for example, postgresql.jdbc.jar) in 
      [tomcat]/webapps/erddap/WEB-INF/lib.  REQUIRED. --&gt;
  &lt;connectionProperty name="<i>name</i>"&gt;<i>value</i>&lt;/connectionProperty&gt;
    &lt;!-- The names (e.g., "user", "password", and "ssl") and values 
      of the properties needed for ERDDAP to establish the connection
      to the database.  0 or more. --&gt;
  &lt;catalogName&gt;...&lt;/catalogName&gt;
    &lt;!-- The name of the catalog which has the schema which has the 
      table, default = "".  OPTIONAL. --&gt;
  &lt;schemaName&gt;...&lt;/schemaName&gt; &lt;!-- The name of the 
    schema which has the table, default = "".  OPTIONAL. --&gt;
  &lt;tableName&gt;...&lt;/tableName&gt;  &lt;!-- The name of the 
    table, default = "".  REQUIRED. --&gt;
  &lt;orderBy&gt;...&lt;/orderBy&gt;  &lt;!-- A comma-separated list of
    sourceNames to be used in an ORDER BY clause at the end of the 
    every query sent to the database (unless the user's request
    includes an &amp;orderBy() filter, in which case the user's 
    orderBy is used).  The order of the sourceNames is important. 
    The leftmost sourceName is most important; subsequent 
    sourceNames are only used to break ties.  Only relevant 
    sourceNames are included in the ORDER BY clause for a given user 
    request.  If this is not specified, the order of the returned 
    values in not specified. Default = "".  OPTIONAL. --&gt;
  <a rel="help" href="#sourceNeedsExpandedFP_EQ">&lt;sourceNeedsExpandedFP_EQ&gt;</a>true(default)|false&lt;/sourceNeedsExpandedFP_EQ&gt;
  <a rel="help" href="#accessibleTo">&lt;accessibleTo&gt;</a>...&lt;/accessibleTo&gt; &lt;!-- 0 or 1 --&gt;
  <a rel="help" href="#reloadEveryNMinutes">&lt;reloadEveryNMinutes&gt;</a>...&lt;/reloadEveryNMinutes&gt;
  <a rel="help" href="#fgdcFile">&lt;fgdcFile&gt;</a>...&lt;/fgdcFile&gt; &lt;!-- 0 or 1 --&gt;
  <a rel="help" href="#iso19115File">&lt;iso19115File&gt;</a>...&lt;/iso19115File&gt; &lt;!-- 0 or 1 --&gt;
  <a rel="help" href="#onChange">&lt;onChange&gt;</a>...&lt;/onChange&gt; &lt;!-- 0 or more --&gt;
  <a rel="help" href="#altitudeMetersPerSourceUnit">&lt;altitudeMetersPerSourceUnit&gt;</a>...&lt;/altitudeMetersPerSourceUnit&gt;
  <a rel="help" href="#globalAttributes">&lt;addAttributes&gt;</a>...&lt;/addAttributes&gt;
  <a rel="help" href="#dataVariable">&lt;dataVariable&gt;</a>...&lt;/dataVariable&gt; &lt;!-- 1 or more.
     For date and timestamp database columns, set dataType=double and 
     units=seconds since 1970-01-01T00:00:00Z --&gt;
&lt;/dataset&gt;
</pre>
</ul>


<p><a name="EDDTableFromFiles"><b>EDDTableFromFiles</b></a> is the superclass of all
EDDTableFrom...Files classes. 
You can't use EDDTableFromFiles directly. 
Instead, you can use subclasses of EDDTableFromFiles to handle specific file types:
  <ul>
  <li><a rel="help" href="#EDDTableFromAsciiFiles">EDDTableFromAsciiFiles</a> aggregates data from comma-
       and tab-separated 
    tabular ASCII data files.
  <li><a rel="help" href="#EDDTableFromHyraxFiles">EDDTableFromHyraxFiles</a> aggregates data with several variables, 
      each with shared dimensions
    (e.g., time, altitude, latitude, longitude), and served by a 
      <a rel="help" href="http://www.opendap.org/download/hyrax.html">Hyrax OPeNDAP server</a>.
  <li><a rel="help" href="#EDDTableFromNcFiles">EDDTableFromNcFiles</a> aggregates data from .nc files 
      with several variables, 
    each with shared dimensions (e.g., time, altitude, latitude, longitude).
  <li><a rel="help" href="#EDDTableFromNcCFFiles">EDDTableFromNcCFFiles</a> aggregates data from 
    .nc files which use one of the file formats specified by the 
    <a href="http://cf-pcmdi.llnl.gov/documents/cf-conventions/1.6/cf-conventions.html#discrete-sampling-geometries">CF Discrete Sampling Geometries</a> 
    conventions.
  <li><a rel="help" href="#EDDTableFromThreddsFiles">EDDTableFromThreddsFiles</a> aggregates data from 
     files with several variables with
    shared dimensions served by a 
     <a rel="help" href="http://www.unidata.ucar.edu/projects/THREDDS/">THREDDS OPeNDAP server</a>.
  </ul>
Currently, no other file types are supported. 
But it is usually relatively easy to support other file types. Contact us if you have requests.
Or, if your data is in an old file format that you would like to move away from, 
we recommend converting the files to be NetCDF .nc files. NetCDF is a widely supported format, 
allows fast random access to the data, and is already supported by ERDDAP.

<p>Details - The following information applies to all of the subclasses of EDDTableFromFiles.
<ul>
<li><b>Aggregation</b> - This class aggregates data from local files. Each file holds a (relatively)
  small table of data.
  <ul>
  <li>The resulting dataset appears as if all of the file's tables had been combined
    (all of the rows of data from file #1, plus all of the rows from file #2, ...).
  <li>The files don't all have to have all of the specified variables.
  <li>The variables in all of the files MUST have the same values for the 
      <a rel="help" href="#add_offset">add_offset</a>,
      <a rel="help" href="#missing_value">missing_value</a>, 
      <a rel="help" href="#FillValue">_FillValue</a>, 
      <a rel="help" href="#scale_factor">scale_factor</a>, and 
      <a rel="help" href="#units">units</a> attributes (if any). 
    ERDDAP checks, but it is an imperfect test -- if there are different values, ERDDAP
    doesn't know which is correct and therefore which files are invalid.
  </ul>
<li><b>Directories</b> - The files can be in one directory, or in a directory and its subdirectories 
  (recursively).
  Note that if there are a large number of files (e.g., &gt;1000), the operating system
  (and thus EDDTableFromFiles) will operate much more efficiently if you store the files in a
  series of subdirectories.
<li><b>Cached File Information</b> - When an EDDTableFromFiles dataset is first loaded, 
  EDDTableFromFiles reads all of the relevant files and creates tables in memory with information
  about each valid file (one file per row, including the minimum and maximum value of each variable,
  even String variables) and each invalid file. 
  <ul>
  <li>The tables are also stored on disk, as .json files in [bigParentDirectory]/dataset
     in files named:
    <br>&nbsp;&nbsp;[datasetID].dirs.json (which holds a list of unique directory names) and
    <br>&nbsp;&nbsp;[datasetID].files.json (which holds the table with each valid file's information),
    <br>&nbsp;&nbsp;[datasetID].bad.json (which holds the table with each bad file's information).
  <li>The copy of the file information tables on disk is also useful when ERDDAP is shut down and
    restarted: it saves EDDTableFromFiles from having to re-read all of the data files.
  <li>You shouldn't ever need to delete or work with these files.
    You can delete these files (but why?).  You can use the 
      <a rel="help" href="http://coastwatch.pfeg.noaa.gov/erddap/download/setup.html#flag">flag system</a>
      to force ERDDAP to update
    the cached file information.
  </ul>
<li><b>Handling Requests</b> - ERDDAP tabular data requests can put constraints on any variable.
  <ul>
  <li>When a client's request for data is processed, EDDTableFromFiles can quickly look 
    in the table with the valid file information to see which files might have relevant data.
    For example, if each source file has the data for one fixed-location buoy, EDDTableFromFiles
    can very efficiently determine which files might have data within a given longitude range and
    latitude range.
  <li>Because the valid file information table includes the minimum and maximum value of every 
    variable for every valid file, EDDTableFromFiles can often handle other queries quite efficiently.
    For example, if some of the buoys don't have an air pressure sensor, and a client requests 
    data for <tt>airPressure!=NaN</tt>, EDDTableFromFiles can efficiently determine which buoys 
    have air pressure data.
  </ul>
<li><b>Updating the Cached File Information</b> - 
    Whenever the dataset is reloaded, the cached file
  information is updated.
  <ul>
    <li>The dataset is reloaded periodically as determined by the 
      <tt>&lt;reloadEveryNMinutes&gt;</tt> in the 
      dataset's information in datasets.xml.
    <li>The dataset is reloaded as soon as possible whenever ERDDAP detects that you have added,
       removed, 
        <a rel="help" href="http://en.wikipedia.org/wiki/Touch_(Unix)">touch'd</a> 
        (to change the file's lastModified time), or changed a datafile.
    <li>The dataset is reloaded as soon as possible if you use the 
        <a rel="help" href="http://coastwatch.pfeg.noaa.gov/erddap/download/setup.html#flag">flag system</a>.
    </ul>
  When the dataset is reloaded, ERDDAP compares the currently available files to the cached file
  information table.
  New files are read and added to the valid files table.
  Files that no longer exist are dropped from the valid files table.
  Files where the file timestamp has changed are read and their information is updated.
  The new tables replaces the old tables in memory and on disk.
<li><b>Bad Files</b> - The table of bad files and the reasons the files were declared bad (corrupted file, 
  missing variables, incorrect axis values, etc.) is emailed to the emailEverythingTo email address 
  (probably you) every time the dataset is reloaded.
  You should replace or repair these files as soon as possible.  
<li><b><a name="EDDTableFromFiles_NearRealTimeData">Near Real Time Data</a></b> - 
    EDDTableFromFiles treats requests for very recent data as a special case.
  The problem: If the files making up the dataset are updated frequently, it is likely that the
  dataset won't be updated every time a file is changed. So EDDTableFromFiles won't be aware of
  the changed files.
  (You could use the 
    <a rel="help" href="http://coastwatch.pfeg.noaa.gov/erddap/download/setup.html#flag">flag system</a>,
      but this might lead to ERDDAP reloading the dataset almost continually.
  So in most cases, we don't recommend it.)
  Instead, EDDTableFromFiles does two things to deal with this situation:
  <ol>
  <li>When the dataset is loaded, if the maximum value for the time variable is in the last 24 hours, 
    ERDDAP sets the maximum time to be NaN (meaning Now).
  <li> When ERDDAP gets a request for data within the last 20 hours (e.g., 8 hours ago until Now), 
    ERDDAP will search all files which have any data in the last 20 hours.
  </ol>
  Thus, ERDDAP doesn't need to have perfectly up-to-date data for all of the files in order to
  find the latest data.
  You should still set <a rel="help" href="#reloadEveryNMinutes"><tt>&lt;reloadEveryNMinutes&gt;</tt></a> 
  to a reasonably
       small value (e.g., 60),
  but it doesn't have to be tiny (e.g., 3).

  <p>Not recommended organization of near-real-time data in the files:
  If, for example, you have a dataset that stores data for numerous stations (or buoy, or ...)
  for many years, you could arrange the files so that, for example, there is one file per station.
  But then, every time new data for a station arrives, you have to read a large old file and
  write a large new file.
  And when ERDDAP reloads the dataset, it notices that some files have been modified, so it reads
  those files completely. 
  That is inefficient.

  <p>Recommended organization of near-real-time data in the files:
  We recommend that you store the data in chunks, e.g., all data for one station for
  one year (or one month).
  Then, when a new datum arrives, you only have to read and rewrite the file with this year's
  (or month's) data. 
  All of the files for previous years (or months) for that station remain unchanged.
  And when ERDDAP reloads the dataset, most files are unchanged; only a few, small files have
  changed and need to be read.
<li><b>FTP Trouble/Advice</b> - If you FTP new data files to the ERDDAP server while ERDDAP is running,
  there is the chance that ERDDAP will be reloading the dataset during the FTP process.
  It happens more often than you might think!
  If it happens, the file will appear to be valid (it has a valid name), but the file isn't valid.
  If ERDDAP tries to read data from that invalid file, the resulting error will cause the file to
  be added to the table of invalid files.
  This is not good.
  To avoid this problem, use a temporary file name when FTP'ing the file, e.g., ABC2005.nc_TEMP .
  Then, the fileNameRegex test (see below) will indicate that this is not a relevant file.
  After the FTP process is complete, rename the file to the correct name.
  The renaming process will cause the file to become relevant in an instant.
<li><b><a name="fileNameExtracts">File Name Extracts</a></b> - 
  EDDTableFromFiles has a system for extracting a String from each file name
  and using that to make a psuedo data variable.
  Currently, there is no system to interpret these Strings as dates/times.
  There are several XML tags to set up this system.
  If you don't need part or all of this system, just don't specify these tags or use "" values.
  <ul>
  <li><tt>preExtractRegex</tt> is a 
      <a rel="help" href="http://download.oracle.com/javase/1.4.2/docs/api/java/util/regex/Pattern.html">regular expression</a>
      (<a rel="help" href="http://www.vogella.de/articles/JavaRegularExpressions/article.html">tutorial</a>) 
      used to identify text to be removed
    from the start of the file name. 
    The removal only occurs if the regex is matched.
    This usually begins with "^" to match the beginning of the file name.
  <li><tt>postExtractRegex</tt> is a regular expression used to identify text to be removed from
    the end of the file name.
    The removal only occurs if the regex is matched.
    This usually ends with "$" to match the end of the file name.
  <li><tt>extractRegex</tt> If present, this regular expression is used after preExtractRegex and 
    postExtractRegex to identify a string to be extracted from the file name (e.g., the stationID).
    If the regex isn't matched, the entire file name is used (minus preExtract and postExtract).
    Use ".*" to match the entire file name that is left after preExtractRegex and postExtractRegex.
  <li><tt>columnNameForExtract</tt> is the data column name for the extracted Strings.
    A dataVariable with this sourceName must be in the dataVariables list (with any data type,
    but usually String).
  </ul>
  For example, if a dataset has files with names like 
  <tt>XYZAble.nc, XYZBaker.nc, XYZCharlie.nc,</tt> ...,
  and you want to create a new variable (<tt>stationID</tt>) when each file is read 
  which will have station ID values
  (<tt>Able, Baker, Charlie,</tt> ...) extracted from the file names, you could use these tags:
  <ul>
  <li><tt>&lt;preExtractRegex&gt;^XYZ&lt;/preExtractRegex&gt;</tt>
    <br>The initial ^ is a regular expression special character which 
    forces ERDDAP to look for <tt>XYZ</tt> at the beginning of the file name.
    This causes <tt>XYZ</tt>, if found at the beginning of the file name, to be removed
    (e.g., the file name <tt>XYZAble.nc</tt> becomes <tt>Able.nc</tt>).
  <li><tt>&lt;postExtractRegex&gt;\x2Enc$&lt;/postExtractRegex&gt;</tt> 
    <br>The $ at the end is a regular expression special character which 
    forces ERDDAP to look for <tt>.nc</tt> at the end of the file name.
    Since . is a regular expression special character (which matches any character), 
    it is encoded as <tt>\x2E</tt> here 
    (because 2E is the hexadecimal character number for a period).
    This causes <tt>.nc</tt>, if found at the end of the file name, to be removed
    (e.g., the partial file name <tt>Able.nc</tt> becomes <tt>Able</tt>).
  <li><tt>&lt;extractRegex&gt;.*&lt;/extractRegex&gt;</tt> 
    <br>The .* regular expression matches all remaining characters
    (e.g., the partial file name <tt>Able</tt> becomes the extract for the first file).
  <li><tt>&lt;columnNameForExtract&gt;stationID&lt;/columnNameForExtract&gt;</tt> 
    <br>This tells ERDDAP to create a new column called <tt>stationID</tt> when reading each file.
    Every row of data for a given file will have the text extracted 
    from its file name (e.g., <tt>Able</tt>) as the value in the <tt>stationID</tt> column.
  </ul>
  In most cases, there are numerous values for these extract tags that will yield the same results --
  regular expressions are very flexible. But in a few cases, there is just one 
  way to get the desired results.  
<li><b><a name="globalSourceNames"><tt>global:</tt></a> sourceNames</b> - 
  Global metadata in each file can be converted to be data.
  If the sourceName of a variable starts with
  <tt>global:</tt> (e.g., <tt>global:PI</tt>), when ERDDAP is reading the data from a file, 
  ERDDAP will look for a global attribute of that name (e.g., <tt>PI</tt>) and 
  create a column filled with the attribute's value.
<li><b>The skeleton XML</b> for all EDDTableFromFiles subclasses is:
<pre>
&lt;dataset type="EDDTableFrom...Files" <a rel="help" href="#datasetID">datasetID</a>="..." <a rel="help" href="#active">active</a>="..." &gt;
  &lt;nDimensions&gt;...&lt;/nDimensions&gt;  &lt;!-- This was used prior to ERDDAP 
    version 1.30, but is now ignored. --&gt;
  <a rel="help" href="#accessibleTo">&lt;accessibleTo&gt;</a>...&lt;/accessibleTo&gt; &lt;!-- 0 or 1 --&gt;
  <a rel="help" href="#reloadEveryNMinutes">&lt;reloadEveryNMinutes&gt;</a>...&lt;/reloadEveryNMinutes&gt;
  <a rel="help" href="#fgdcFile">&lt;fgdcFile&gt;</a>...&lt;/fgdcFile&gt; &lt;!-- 0 or 1 --&gt;
  <a rel="help" href="#iso19115File">&lt;iso19115File&gt;</a>...&lt;/iso19115File&gt; &lt;!-- 0 or 1 --&gt;
  <a rel="help" href="#onChange">&lt;onChange&gt;</a>...&lt;/onChange&gt; &lt;!-- 0 or more --&gt;
  <a rel="help" href="#altitudeMetersPerSourceUnit">&lt;altitudeMetersPerSourceUnit&gt;</a>...&lt;/altitudeMetersPerSourceUnit&gt; 
  &lt;fileDir&gt;...&lt;/fileDir&gt; &lt;-- The directory (absolute) with the data files. --&gt;
  &lt;recursive&gt;true|false&lt;/recursive&gt; &lt;-- Indicates if subdirectories
    of fileDir have data files, too. --&gt;
  &lt;fileNameRegex&gt;...&lt;/fileNameRegex&gt; &lt;-- A <a rel="help" href="http://download.oracle.com/javase/1.4.2/docs/api/java/util/regex/Pattern.html">regular expression</a> 
    (<a rel="help" href="http://www.vogella.de/articles/JavaRegularExpressions/article.html">tutorial</a>) describing valid data files names, e.g., ".*\.nc" for 
    all .nc files. --&gt;
  &lt;metadataFrom&gt;...&lt;/metadataFrom&gt; &lt;-- The file to get metadata
    from ("first" or "last" (the default) based on file's 
    lastModifiedTime). --&gt;
  &lt;columnNamesRow&gt;...&lt;/columnNamesRow&gt; &lt;-- (For 
    EDDTableFromAsciiFiles only) This specifies the number of the row
    with the column names in the files. (The first row is "1". 
    Default = 1.) --&gt;
  &lt;firstDataRow&gt;...&lt;/firstDataRow&gt; &lt;-- (For 
    EDDTableFromAsciiFiles only) This specifies the number of the first
    row with data in the files. (The first row is "1". default = 2.) --&gt;
  &lt;-- For the next four tags, see <a rel="help" href="#fileNameExtracts">File Name Extracts</a>. --&gt;
  &lt;preExtractRegex&gt;...&lt;/preExtractRegex&gt;
  &lt;postExtractRegex&gt;...&lt;/postExtractRegex&gt;
  &lt;extractRegex&gt;...&lt;/extractRegex&gt;
  &lt;columnNameForExtract&gt;...&lt;/columnNameForExtract&gt; 
  &lt;sortedColumnSourceName&gt;...&lt;/sortedColumnSourceName&gt; 
    &lt;-- The sourceName of the numeric column that the data files are 
    usually already sorted by within each file, e.g., "time".
    Use null or "" if no variable is suitable.
    It is ok if not all files are sorted by this column.
    If present, this can greatly speed up some data requests. 
    For EDDTableFromHyraxFiles, EDDTableFromNcFiles and 
    EDDTableFromThreddsFiles, this must be the leftmost axis 
    variable. --&gt;
  &lt;sortFilesBySourceNames&gt;...&lt;/sortFilesBySourceNames&gt;
    &lt;-- This is a space-separated list of source variable names 
    which specifies how the internal list of files should be sorted
    (in ascending order), for example "id time". 
    It is the minimum value of the specified columns in each file
    that is used for sorting.
    When a data request is filled, data is obtained from the files
    in this order. Thus it determines the overall order of the data
    in the response.  If you specify more than one column name, the
    second name is used if there is a tie for the first column; the
    third is used if there is a tie for the first and second columns; ...
    This is OPTIONAL (the default is fileDir+fileName order). --&gt;
  &lt;isLocal&gt;false&lt;isLocal&gt; &lt;!-- (may be true or false, 
    the default). This is only used by EDDTableFromNcCFFiles. It 
    indicates if the files are local (actual files) or remote 
    (accessed via the web). The two types are treated slightly 
    differently.
  <a rel="help" href="#sourceNeedsExpandedFP_EQ">&lt;sourceNeedsExpandedFP_EQ&gt;</a>true(default)|false&lt;/sourceNeedsExpandedFP_EQ&gt;
  <a rel="help" href="#globalAttributes">&lt;addAttributes&gt;</a>...&lt;/addAttributes&gt;
  <a rel="help" href="#dataVariable">&lt;dataVariable&gt;</a>...&lt;/dataVariable&gt; &lt;!-- 1 or more --&gt;
    &lt;-- For EDDTableFromHyraxFiles, EDDTableFromNcFiles, and 
    EDDTableFromThreddsFiles, the axis variables (e.g., time) needn't
    be first or in any specific order. --&gt;
&lt;/dataset&gt;
</pre>
</ul>

<!-- p><a name="EDDTableFromMWFS"><b>EDDTableFromMWFS</b></a> handles data from a 
<a rel="help" href="http://csc-s-ial-p.csc.noaa.gov/DTL/DTLProjects/microwfs/microWFS.html">microWFS</a> source.
<ul>
<li>This won't work for other WFS servers.
<li>The skeleton XML for an EDDTableFromMWFS dataset is:
<pre>
&lt;dataset type="EDDTableFromMWFS" <a rel="help" href="#datasetID">datasetID</a>="..." <a rel="help" href="#active">active</a>="..." &gt;
  <a rel="help" href="#sourceUrl">&lt;sourceUrl&gt;</a>...&lt;/sourceUrl&gt;
  <a rel="help" href="#accessibleTo">&lt;accessibleTo&gt;</a>...&lt;/accessibleTo&gt; &lt;!- - 0 or 1 - -&gt;
  <a rel="help" href="#reloadEveryNMinutes">&lt;reloadEveryNMinutes&gt;</a>...&lt;/reloadEveryNMinutes&gt;
  <a rel="help" href="#fgdcFile">&lt;fgdcFile&gt;</a>...&lt;/fgdcFile&gt; &lt;!- - 0 or 1 - -&gt;
  <a rel="help" href="#iso19115File">&lt;iso19115File&gt;</a>...&lt;/iso19115File&gt; &lt;!- - 0 or 1 - -&gt;
  <a rel="help" href="#onChange">&lt;onChange&gt;</a>...&lt;/onChange&gt; &lt;!- - 0 or more - -&gt;
  &lt;longitudeSourceMinimum&gt;...&lt;/longitudeSourceMinimum&gt; &lt;- - OPTIONAL - -&gt;
  &lt;longitudeSourceMaximum&gt;...&lt;/longitudeSourceMaximum&gt; &lt;- - OPTIONAL - -&gt;
  &lt;latitudeSourceMinimum&gt;...&lt;/latitudeSourceMinimum&gt; &lt;- - OPTIONAL - -&gt;
  &lt;latitudeSourceMaximum&gt;...&lt;/latitudeSourceMaximum&gt; &lt;- - OPTIONAL - -&gt;
  &lt;altitudeSourceMinimum&gt;...&lt;/altitudeSourceMinimum&gt; &lt;- - OPTIONAL - -&gt;
  &lt;altitudeSourceMaximum&gt;...&lt;/altitudeSourceMaximum&gt; &lt;- - OPTIONAL - -&gt;
  &lt;timeSourceMinimum&gt;...&lt;/timeSourceMinimum&gt; &lt;- - OPTIONAL, in YYYY-MM-DDThh:mm:ss format - -&gt;
  &lt;timeSourceMaximum&gt;...&lt;/timeSourceMaximum&gt; &lt;- - OPTIONAL, in YYYY-MM-DDThh:mm:ss format - -&gt;
  <a rel="help" href="#globalAttributes">&lt;addAttributes&gt;</a>...&lt;/addAttributes&gt;
  <a rel="help" href="#dataVariable">&lt;dataVariable&gt;</a>...&lt;/dataVariable&gt; &lt;!- - 1 or more - -&gt;
&lt;/dataset&gt;
</pre>
</ul -->

<p><a name="EDDTableFromAsciiFiles"><b>EDDTableFromAsciiFiles</b></a> aggregates data from
  comma- and tab-separated tabular ASCII data files.
<ul>
<li>Normally, the files will have column names on the first row and data starting on the second row.
  But you can use <tt>&lt;columnNamesRow&gt;</tt> and <tt>&lt;firstDataRow&gt;</tt> 
  in your datasets.xml file to
  a specify different row number.
<li>Note that ASCII files are not a very efficient way to store/retreive data. 
  For greater efficiency, save the files as .nc files (which one dimension, "row", shared by 
  all variables) instead.
<li>See this class' superclass, <a rel="help" href="#EDDTableFromFiles">EDDTableFromFiles</a>, for information
on how to use this class and how this class works.
</ul>

<p><a name="EDDTableFromHyraxFiles"><b>EDDTableFromHyraxFiles</b></a> aggregates data files with several variables, each with
  one or more shared dimensions (e.g., time, altitude, latitude, longitude), and served by a 
  <a rel="help" href="http://www.opendap.org/download/hyrax.html">Hyrax OPeNDAP server</a>.
<ul>
<li>In most cases, each file has multiple values for the leftmost dimension, e.g. time.
<li>The files often (but don't have to) have a single value for the other dimensions (e.g., altitude,
  latitude, longitude).
<li>The files may have character variables with an additional dimension (e.g., nCharacters).
<li>Hyrax servers can be identified by the "/dods-bin/nph-dods/" or "/opendap/" in the URL.
  <!-- For example, ??? -->
<li>This class screen-scrapes the Hyrax web pages with the lists of files in each directory.
  Because of this, it is very specific to the current format of Hyrax web pages.
  We will try to adjust ERDDAP quickly if/when future versions of Hyrax change how the files are listed.
<li>The <tt>&lt;fileDir&gt;</tt> setting is ignored. Since this class downloads
  and makes a local copy of each remote data file, ERDDAP forces the fileDir
  to be <tt>[bigParentDirectory]/copy/<i>datasetID</i>/</tt>.
<li>For <tt>&lt;sourceUrl&gt;</tt>, use the URL of the base directory of the dataset in the Hyrax server, for example,
  <br>  <tt>&lt;sourceUrl&gt;http://edac-dap.northerngulfinstitute.org/dods-bin/nph-dods/WCOS/nmsp/wcos/&lt;/sourceUrl&gt;</tt>
  <br>(although that server is no longer available).
  <br>The sourceUrl web page usually has "OPeNDAP Server Index of [directoryName]" at the top.
<li>Since this class always downloads and makes a local copy of each remote
  data file, you should never wrap this dataset in <a rel="help" href="#EDDTableCopy">EDDTableCopy</a>.
<li>See this class' superclass, <a rel="help" href="#EDDTableFromFiles">EDDTableFromFiles</a>, for information
on how to use this class and how this class works.
<li>See the 1D, 2D, 3D, and 4D examples for <a rel="help" href="#EDDTableFromNcFiles">EDDTableFromNcFiles</a>.
</ul>


<p><a name="EDDTableFromNcFiles"><b>EDDTableFromNcFiles</b></a> 
aggregates data from .nc files with several variables, each with one shared
  dimension (e.g., time) or more than one shared dimensions (e.g., time, altitude, latitude,
  longitude).
  The files must have the same dimension names.
  A given file may have multiple values for each of the dimensions and the values may be
  different in different files.
  The files may have character variables with an additional dimension (e.g., nCharacters).
  See this class' superclass, <a rel="help" href="#EDDTableFromFiles">EDDTableFromFiles</a>, 
  for information on how to use this class and how this class works.
<ul>
<li>1D Example:
  1D files are somewhat different from 2D, 3D, 4D, ... files.
  <ul>
  <li>You might have a set of .nc data files where each file has one month's worth of data from one
    drifting buoy.
  <li>Each file will have 1 dimension, e.g., time (size = [many]).
  <li>Each file will have one or more 1D variables which use that dimension, e.g., time, longitude,
    latitude, air temperature, ....
  <li>Each file may have 2D character variables, e.g., with dimensions (time,nCharacters).
  </ul>
<li>2D Example:
  <ul>
  <li>You might have a set of .nc data files where each file has one month's worth of data from one
    drifting buoy.
  <li>Each file will have 2 dimensions, e.g., time (size = [many]) and id (size = 1).
  <li>Each file will have 2 1D variables with the same names as the dimensions and using the
    same-name dimension, e.g., time(time), id(id).
    These 1D variables should be included in the list of <tt>&lt;dataVariable&gt;</tt>'s in the dataset's XML. 
  <li>Each file will have one or more 2D variables, e.g., longitude, latitude, air temperature, water
    temperature, ...
  <li>Each file may have 3D character variables, e.g., with dimensions (time,id,nCharacters).
  </ul>
<li>3D Example:
  <ul>
  <li>You might have a set of .nc data files where each file has one month's worth of data from one
    stationary buoy.
  <li>Each file will have 3 dimensions, e.g., time (size = [many]), lat (size = 1), and lon (size = 1).
  <li>Each file will have 3 1D variables with the same names as the dimensions and using the
    same-name dimension, e.g., time(time), lat(lat), lon(lon).
    These 1D variables should be included in the list of <tt>&lt;dataVariable&gt;</tt>'s in the dataset's XML. 
  <li>Each file will have one or more 3D variables, e.g., air temperature, water temperature, ...
  <li>Each file may have 4D character variables, e.g., with dimensions (time,lat,lon,nCharacters).
  <li>The file's name might have the buoy's name within the file's name.
  </ul>
<li>4D Example:
  <ul>
  <li>You might have a set of .nc data files where each file has one month's worth of data from one
    station. At each time point, the station takes readings at a series of depths.
  <li>Each file will have 4 dimensions, e.g., time (size = [many]), depth (size = [many]), lat (size = 1),
    and lon (size = 1).
  <li>Each file will have 4 1D variables with the same names as the dimensions and using the
    same-name dimension, e.g., time(time), depth(depth), lat(lat), lon(lon).
    These 1D variables should be included in the list of <tt>&lt;dataVariable&gt;</tt>'s in the dataset's XML. 
  <li>Each file will have one or more 4D variables, e.g., air temperature, water temperature, ...
  <li>Each file may have 5D character variables, e.g., with dimensions (time,depth,lat,lon,nCharacters).
  <li>The file's name might have the buoy's name within the file's name.
  </ul>
</ul>

<p><a name="EDDTableFromNcCFFiles"><b>EDDTableFromNcCFFiles</b></a> 
  aggregates data aggregates data from 
  .nc files which use one of the file formats specified by the 
  <a href="http://cf-pcmdi.llnl.gov/documents/cf-conventions/1.6/cf-conventions.html#discrete-sampling-geometries">CF Discrete Sampling Geometries</a>
  conventions.
  See this class' superclass, <a rel="help" href="#EDDTableFromFiles">EDDTableFromFiles</a>, 
  for information on how to use this class and how this class works.

  <p>The CF DSG conventions defines dozens of file formats and includes numerous
  minor variations. These class deals with all of the variations we are aware of, but
  we may have missed one (or more). So if this class can't read data from your CF DSG files,
  please email bob.simons at noaa.gov and include a sample file.

<p><a name="EDDTableFromThreddsFiles"><b>EDDTableFromThreddsFiles</b></a> aggregates data files 
  with several variables, 
  each with one or more shared dimensions (e.g., time, altitude, latitude, longitude), and
  served by a 
  <a rel="help" href="http://www.unidata.ucar.edu/projects/THREDDS/">THREDDS OPeNDAP server</a>.
<ul>
<li>In most cases, each file has multiple values for the leftmost dimension, e.g. time.
<li>The files often (but don't have to) have a single value for the other dimensions (e.g., altitude,
  latitude, longitude).
<li>The files may have character variables with an additional dimension (e.g., nCharacters).
<li>THREDDS servers can be identified by the "/thredds/" in the URLs.
  For example, 
  <br>http://data.nodc.noaa.gov/thredds/catalog/nmsp/wcos/catalog.html
<li>This class reads the catalog.xml files served by THREDDS with the lists of 
  <tt>&lt;catalogRefs&gt;</tt>
  (references to additional catalog.xml sub-files) and <tt>&lt;dataset&gt;</tt>s (data files).
<li>The <tt>&lt;fileDir&gt;</tt> setting is ignored. Since this class downloads
  and makes a local copy of each remote data file, ERDDAP forces the fileDir
  to be <tt>[bigParentDirectory]/copy/<i>datasetID</i>/</tt>.
<li>For <tt>&lt;sourceUrl&gt;</tt>, use the URL of the catalog.xml file for the dataset in the 
  THREDDS server,
  for example: 
  for this URL which may be used in a web browser,
  <br>http://data.nodc.noaa.gov/thredds/catalog/nmsp/wcos/catalog.html ,
  <br>use <tt>&lt;sourceUrl&gt;http://data.nodc.noaa.gov/thredds/catalog/nmsp/wcos/catalog.xml&lt;/sourceUrl&gt;</tt> .
<li>Since this class always downloads and makes a local copy of each remote
  data file, you should never wrap this dataset in <a rel="help" href="#EDDTableCopy">EDDTableCopy</a>.
<li>See this class' superclass, <a rel="help" href="#EDDTableFromFiles">EDDTableFromFiles</a>, 
  for information on how to use this class and how this class works.
<li>See the 1D, 2D, 3D, and 4D examples for <a rel="help" href="#EDDTableFromNcFiles">EDDTableFromNcFiles</a>.
</ul>

<p><a name="EDDTableFromNOS"><b>EDDTableFromNOS</b></a> handles data from a NOAA 
<a rel="help" href="http://opendap.co-ops.nos.noaa.gov/axis/">NOS</a> source,
which uses
  SOAP+XML for requests and responses.  It is very specific to NOAA NOS's XML.
  See the sample EDDTableFromNOS dataset in datasets2.xml.

<p><a name="EDDTableFromOBIS"><b>EDDTableFromOBIS</b></a> handles data from an
<a rel="help" href="http://www.iobis.org">Ocean Biogeographic Information System (OBIS)</a> server.
<ul>
<li>OBIS servers expect an XML request and return an XML response.
<li>Because all OBIS servers serve the same variables the same way
  (see the <a rel="help" href="http://www.iobis.org/tech/provider/questions">OBIS schema</a>),
  you don't have to specify much to set up an OBIS dataset in ERDDAP.
<li>You MUST include a "creator_email" attribute in the global addAttributes,
  since that information is used within the license.
  A suitable email address can be found by reading the XML response from the sourceURL.
<li>You may or may not be able to get the global attribute 
  <a rel="help" href="#subsetVariables"><tt>&lt;subsetVariables&gt;</tt></a> to work with
  a given OBIS server. If you try, just try one variable (e.g., ScientificName or Genus).
<li>The skeleton XML for an EDDTableFromOBIS dataset is:
<pre>
&lt;dataset type="EDDTableFromOBIS" <a rel="help" href="#datasetID">datasetID</a>="..." <a rel="help" href="#active">active</a>="..." &gt;
  <a rel="help" href="#sourceUrl">&lt;sourceUrl&gt;</a>...&lt;/sourceUrl&gt;
  <a rel="help" href="#sourceCode">&lt;sourceCode&gt;</a>...&lt;/sourceCode&gt;
    &lt;!-- If you read the XML response from the sourceUrl, the 
    source code (e.g., GHMP) is the value from one of the 
    &lt;resource&gt;&lt;code&gt; tags. --&gt;
  <a rel="help" href="#accessibleTo">&lt;accessibleTo&gt;</a>...&lt;/accessibleTo&gt; &lt;!-- 0 or 1 --&gt;
  <a rel="help" href="#reloadEveryNMinutes">&lt;reloadEveryNMinutes&gt;</a>...&lt;/reloadEveryNMinutes&gt;
  <a rel="help" href="#fgdcFile">&lt;fgdcFile&gt;</a>...&lt;/fgdcFile&gt; &lt;!-- 0 or 1 --&gt;
  <a rel="help" href="#iso19115File">&lt;iso19115File&gt;</a>...&lt;/iso19115File&gt; &lt;!-- 0 or 1 --&gt;
  <a rel="help" href="#onChange">&lt;onChange&gt;</a>...&lt;/onChange&gt; &lt;!-- 0 or more --&gt;
  &lt;-- All ...SourceMinimum and Maximum tags are OPTIONAL --&gt;
  &lt;longitudeSourceMinimum&gt;...&lt;/longitudeSourceMinimum&gt; 
  &lt;longitudeSourceMaximum&gt;...&lt;/longitudeSourceMaximum&gt; 
  &lt;latitudeSourceMinimum&gt;...&lt;/latitudeSourceMinimum&gt; 
  &lt;latitudeSourceMaximum&gt;...&lt;/latitudeSourceMaximum&gt; 
  &lt;altitudeSourceMinimum&gt;...&lt;/altitudeSourceMinimum&gt; 
  &lt;altitudeSourceMaximum&gt;...&lt;/altitudeSourceMaximum&gt; 
  &lt;-- For timeSource... tags, use YYYY-MM-DDThh:mm:ssZ format. --&gt;
  &lt;timeSourceMinimum&gt;...&lt;/timeSourceMinimum&gt; 
  &lt;timeSourceMaximum&gt;...&lt;/timeSourceMaximum&gt; 
  <a rel="help" href="#sourceNeedsExpandedFP_EQ">&lt;sourceNeedsExpandedFP_EQ&gt;</a>true(default)|false&lt;/sourceNeedsExpandedFP_EQ&gt;
  <a rel="help" href="#globalAttributes">&lt;addAttributes&gt;</a>...&lt;/addAttributes&gt; <!-- MUST include "creator_email" -->
&lt;/dataset&gt;
</pre>
</ul>

<p><a name="EDDTableFromSOS"><b>EDDTableFromSOS</b></a> handles data from a
Sensor Observation Service
(SWE/<a rel="help" href="http://www.opengeospatial.org/projects/groups/sensorweb">SOS</a>) server.
<ul>
<li>This dataset type aggregates data from a group of stations which are all served by one SOS server. 
<li>The stations all serve the same set of variables (although the source for each station doesn't
  have to serve all variables).
<li>SOS servers expect an XML request and return an XML response.
<li>It is not easy to generate the dataset XML for SOS datasets.
  To find the needed information, you must visit 
  sourceUrl+"?service=SOS&amp;request=GetCapabilities" in a browser; 
  look at the XML; make a GetObservation request by hand; 
  and look at the XML response to the request.
<li>SOS overview:
    <ul>
    <li>SWE (Sensor Web Enablement) and SOS (Sensor Observation Service) are
      <a rel="help" href="http://www.opengeospatial.org/projects/groups/sensorweb">OpenGIS&reg; standards</a>.
      That web site has the standards documents.
    <li>The OGC Web Services Common Specification ver 1.1.0 (OGC 06-121r3) covers construction of
      GET and POST queries (see section 7.2.3 and section 9).
    <li>If you send a getCapabilities xml request to a SOS server
      (sourceUrl + "?service=SOS&amp;request=GetCapabilities"), you get an xml result
      with a list of stations and the observedProperties that they have data for.
    <li>An observedProperty is a formal URI reference to a property. For example,
     urn:ogc:phenomenon:longitude:wgs84 or http://marinemetadata.org/cf#sea_water_temperature
    <li>An observedProperty isn't a variable.
    <li>More than one variable may have the same observedProperty (for example, insideTemp
      and outsideTemp might both have observedProperty 
      http://marinemetadata.org/cf#air_temperature).
    <li>If you send a getObservation xml request to a SOS server, you get an xml result with
      descriptions of field names in the response, field units, and the data.
      The field names will include longitude, latitude, depth(perhaps), and time.
    <li>Each dataVariable for an EDDTableFromSOS must include an "observedProperty" attribute,
      which identifies the observedProperty that must be requested from the server to
      get that variable. Often, several dataVariables will list the same composite
      observedProperty.
    <li>The dataType for each dataVariable may not be specified by the server.
      If so, you must look at the XML data responses from the server and assign appropriate 
      <a rel="help" href="#dataType"><tt>&lt;dataType&gt;</tt>s</a> in the ERDDAP dataset dataVariable
      definitions.
    <li>(At the time of writing this) some SOS servers respond to getObservation requests for
      more than one observedProperty by just returning results for the first of the
      observedProperties. (No error message!)
      See the constructor parameter <tt>requestObservedPropertiesSeparately</tt>.
    </ul>
<li>EDDTableFromSOS automatically adds 
  <br><tt>&lt;att name="<a rel="help" href="#subsetVariables">subsetVariables</a>"&gt;station_id, 
    longitude, latitude&lt;/att&gt;</tt>
  <br>to the dataset's global attributes when the dataset is created.
<li>SOS servers usually express units with the 
      <a rel="help" href="http://aurora.regenstrief.org/~ucum/ucum.html">UCUM</a> system.
  Most ERDDAP servers express units with the 
    <a rel="help" href="http://www.unidata.ucar.edu/software/udunits/udunits-2/udunits2.html">UDUNITS</a> system.
  If you need to convert between the two systems, you can use
  <a rel="help" href="http://coastwatch.pfeg.noaa.gov/erddap/convert/units.html">ERDDAP's web service to convert UCUM units to/from UDUNITS</a>.
<li>The skeleton XML for an EDDTableFromSOS dataset is:
<pre>
&lt;dataset type="EDDTableFromSOS" <a rel="help" href="#datasetID">datasetID</a>="..." <a rel="help" href="#active">active</a>="..." &gt;
  <a rel="help" href="#sourceUrl">&lt;sourceUrl&gt;</a>...&lt;/sourceUrl&gt;
  <a rel="help" href="#accessibleTo">&lt;accessibleTo&gt;</a>...&lt;/accessibleTo&gt; &lt;!-- 0 or 1 --&gt;
  <a rel="help" href="#reloadEveryNMinutes">&lt;reloadEveryNMinutes&gt;</a>...&lt;/reloadEveryNMinutes&gt;
  <a rel="help" href="#fgdcFile">&lt;fgdcFile&gt;</a>...&lt;/fgdcFile&gt; &lt;!-- 0 or 1 --&gt;
  <a rel="help" href="#iso19115File">&lt;iso19115File&gt;</a>...&lt;/iso19115File&gt; &lt;!-- 0 or 1 --&gt;
  <a rel="help" href="#onChange">&lt;onChange&gt;</a>...&lt;/onChange&gt; &lt;!-- 0 or more --&gt;
  &lt;stationIdSourceName&gt;...&lt;/stationIdSourceName&gt; &lt;!-- 0 or 1. 
    Default="station_id". --&gt;
  &lt;longitudeSourceName&gt;...&lt;/longitudeSourceName&gt;
  &lt;latitudeSourceName&gt;...&lt;/latitudeSourceName&gt;
  &lt;altitudeSourceName&gt;...&lt;/altitudeSourceName&gt;
  &lt;altitudeSourceMinimum&gt;...&lt;/altitudeSourceMinimum&gt; &lt;!-- 0 or 1 --&gt;
  &lt;altitudeSourceMaximum&gt;...&lt;/altitudeSourceMaximum&gt; &lt;!-- 0 or 1 --&gt;
  <a rel="help" href="#altitudeMetersPerSourceUnit">&lt;altitudeMetersPerSourceUnit&gt;</a>...&lt;/altitudeMetersPerSourceUnit&gt; 
  &lt;timeSourceName&gt;...&lt;/timeSourceName&gt;
  &lt;timeSourceFormat&gt;...&lt;/timeSourceFormat&gt;
    &lt;!-- timeSourceFormat MUST be either
    * For numeric data: a 
      <a rel="help" href="http://www.unidata.ucar.edu/software/udunits/udunits-2/udunits2.html">UDUnits</a>-compatible
      string (with the format 
      "<i>units</i> since <i>baseTime</i>") describing how to interpret
      source time values (e.g., "seconds since 1970-01-01T00:00:00Z"),
      where the base time is an ISO 8601:2004(E) formatted date time string 
      (YYYY-MM-DDThh:mm:ssZ).
    * For String String data: an org.joda.time.format.DateTimeFormat 
      string (which is mostly compatible with java.text.SimpleDateFormat)
      describing how to interpret string times  (e.g., the 
      ISO8601TZ_FORMAT "yyyy-MM-dd'T'HH:mm:ss'Z'").  See <a rel="help" href="http://joda-time.sourceforge.net/api-release/index.html">Joda Time</a> 
      and <a rel="help" href="http://joda-time.sourceforge.net/apidocs/org/joda/time/format/DateTimeFormat.html">DateTimeFormat</a> --&gt;
  &lt;observationOfferingIdRegex&gt;...&lt;/observationOfferingIdRegex&gt;
    &lt;!-- Only observationOfferings with IDs (usually the station names) 
    which match this <a rel="help" href="http://download.oracle.com/javase/1.4.2/docs/api/java/util/regex/Pattern.html">regular expression</a> (<a rel="help" href="http://www.vogella.de/articles/JavaRegularExpressions/article.html">tutorial</a>) will be included 
    in the dataset (".+" will catch all station names). --&gt;
  &lt;requestObservedPropertiesSeparately&gt;true|false(default)
    &lt;/requestObservedPropertiesSeparately&gt;
  <a rel="help" href="#sourceNeedsExpandedFP_EQ">&lt;sourceNeedsExpandedFP_EQ&gt;</a>true(default)|false&lt;/sourceNeedsExpandedFP_EQ&gt;
  <a rel="help" href="#globalAttributes">&lt;addAttributes&gt;</a>...&lt;/addAttributes&gt;
  <a rel="help" href="#dataVariable">&lt;dataVariable&gt;</a>...&lt;/dataVariable&gt; &lt;!-- 1 or more. 
    * Each dataVariable MUST include the <a rel="help" href="#dataType">dataType</a> tag.
    * Each dataVariable MUST include the observedProperty attribute. 
    * For IOOS SOS servers, *every* variable returned in the text/csv
      response MUST be included in this ERDDAP dataset definition. --&gt;
&lt;/dataset&gt;
</pre>
</ul>

<p><a name="EDDTableCopy"><b>EDDTableCopy</b></a> makes and maintains a local copy of another EDDTable's
data and serves
  data from the local copy.
<ul>
<li>EDDTableCopy (and for grid data, <a rel="help" href="#EDDGridCopy">EDDGridCopy</a>)
    is a very easy to use and a very effective
  <b>solution to some of the biggest problems with serving data from remote data sources:</b>
  <ul>
  <li>Accessing data from a remote data source can be slow.
    <ul>
    <li>They may be slow because they are inherently slow (e.g., an inefficient type of server), 
    <li>because they are overwhelmed by too many requests,
    <li>or because your server or the remote server is bandwidth limited.
    </ul>
  <li>The remote dataset is sometimes unavailable (again, for a variety of reasons).
  <li>Relying on one source for the data doesn't scale well (e.g., when many users and many 
    ERDDAPs utilize it).
    <br>&nbsp;
  </ul>

<li>How It Works - EDDTableCopy solves these problems by automatically making and maintaining 
  a local copy of the data and serving data from the local copy.
  ERDDAP can serve data from the local copy very, very quickly.
  And making and using a local copy relieves the burden on the remote server.
  And the local copy is a backup of the original, which is useful in case something happens
  to the original.

  <p>There is nothing new about making a local copy of a dataset. What is new here is that this 
  class makes it *easy* to create and *maintain* a local copy of data from a *variety* of types 
  of remote data sources and *add metadata* while copying the data.

<li><tt>&lt;extractDestinationNames&gt;</tt> - EDDTableCopy makes the local copy of the 
  data by requesting
  chunks of data from the remote dataset.
  EDDTableCopy determines which chunks to request by requesting the &amp;distinct() values
  for the <tt>&lt;extractDestinationNames&gt;</tt> (specified in the datasets.xml, see below), 
  which are the space-separated destination names of variables in the remote dataset.
  For example, 
  <br><tt>&lt;extractDestinationNames&gt;drifter profile&lt;/extractDestinationNames&gt;</tt> 
  <br>might
  yield distinct values combinations of drifter=tig17,profile=1017, drifter=tig17,profile=1095,
  ... drifter=une12,profile=1223, drifter=une12,profile=1251, .... 

  <p>In situations where one column (e.g., profile) may be all that is required to uniquely
  identify a group of rows of data, if there are a very large number of, e.g., profiles,
  it may be useful to also specify an additional  extractDestinationName (e.g., drifter)
  which serves to subdivide the profiles.
  That leads to fewer data files in a given directory, which may lead to faster access.

<li>Local Files - Each chunk of data is stored in a separate netCDF file in a subdirectory of
  [bigParentDirectory]/copy/<i>datasetID</i>/ (as specified in 
    <a rel="help" href="http://coastwatch.pfeg.noaa.gov/erddap/download/setup.html#setup.xml">setup.xml</a>).
  There is one subdirectory level for all but the last extractDestinationName. 
  For example, data for tig17+1017, would be stored in 
    <br>[bigParentDirectory]/copy/sampleDataset/tig17/1017.nc .
  <br>For example, data for une12+1251, would be stored in 
    <br>[bigParentDirectory]/copy/sampleDataset/une12/1251.nc .
  <br>Directory and file names created from data values are modified to make them file-name-safe 
  (e.g., spaces are replaced by "x20") -- this doesn't affect the actual data.
  <br>&nbsp;

<li>New Data - Each time EDDTableCopy is reloaded, it checks the remote dataset
  to see what distinct chunks are available.
  If the file for a chunk of data doesn't already exist, a request to get the chunk is
  added to a queue.
  ERDDAP's taskThread processes all the queued requests for chunks of data, one-by-one.
  You can see statistics for the taskThread's activity on the
     <a rel="help" href="http://coastwatch.pfeg.noaa.gov/erddap/download/setup.html#statusPage">Status Page</a> and in the 
     <a rel="help" href="http://coastwatch.pfeg.noaa.gov/erddap/download/setup.html#dailyReport">Daily Report</a>.
  (Yes, ERDDAP could assign multiple tasks to this process, but that would use up 
  lots of the remote data source's bandwidth, memory, and CPU time, and
  lots of the local ERDDAP's bandwidth, memory, and CPU time, neither of which is a good idea.)

  <p>NOTE: The very first time an EDDTableCopy is loaded, (if all goes well) 
  lots of requests for chunks of data will be added to the taskThread's queue,
  but no local data files will have been created.
  So the constructor will fail but taskThread will continue to work and create local files.
  If all goes well, the taskThread will make some local data files and the next attempt to reload
  the dataset (in ~15 minutes) will succeed, but initially with a very limited amount of data.

  <p>WARNING: If the remote dataset is large and/or the remote server is slow (that's the problem,
  isn't it?!), it will take a long time to make a complete local copy.
  In some cases, the time needed will be unacceptable.
  For example, transmitting 1 TB of data over a T1 line (0.15 GB/s) takes at least 60 days,
  under optimal conditions.
  Plus, it uses lots of bandwidth, memory, and CPU time on the remote and local computers.
  The solution is to mail a hard drive to the administrator of the remote data set so that
  s/he can make a copy of the dataset and mail the hard drive back to you.
  Use that data as a starting point and EDDTableCopy will add data to it.
  (That is how <a rel="help" href="http://aws.amazon.com/importexport/">Amazon's EC2 Cloud Service</a> handles the problem, even
  though their system has lots of bandwidth.)

  <p>WARNING: If a given combination of values disappears from remote dataset,
  EDDTableCopy does NOT delete the local copied file. If you want to, you can delete it yourself.

<li>Recommended Use -
  <ol>
  <li>Create the <tt>&lt;dataset&gt;</tt> entry (the native type, not EDDTableCopy) 
    for the remote data source. 
    <b>Get it working correctly, including all of the desired metadata.</b> 
  <li>If it is too slow, add XML code to wrap it in an EDDTableCopy dataset.
    <ul>
    <li>Use a different datasetID (perhaps by changing the datasetID of the old datasetID slightly).
    <li>Copy the <tt>&lt;accessibleTo&gt;, &lt;reloadEveryNMinutes&gt;</tt> and 
      <tt>&lt;onChange&gt;</tt> from the
      remote EDDTable's XML to the EDDTableCopy's XML.
      (Their values for EDDTableCopy matter; their values for the inner dataset become irrelevant.)
    <li>Create the <tt>&lt;extractDestinationNames&gt;</tt> tag (see above).
    <li><tt>&lt;orderExtractBy&gt;</tt> is an OPTIONAL space separated list of destination 
      variable names
      in the remote dataset.
      When each chunk of data is downloaded from the remote server, the chunk will be sorted by
      these variables (by the first variable, then by the second variable if the first variable
      is tied, ...).
      In some cases, ERDDAP will be able to extract data faster from the local data files
      if the first variable in the list is a numeric variable ("time" counts as a numeric variable).
      But choose the these variables in a way that is appropriate for the dataset.
    </ul>
  <li>ERDDAP will make and maintain a local copy of the data.
    <br>&nbsp;
  </ol>

<li>WARNING: EDDTableCopy assumes that the data values for each chunk don't ever change. 
  If/when they do, you need to manually delete the chunk files in 
     [bigParentDirectory]/copy/<i>datasetID</i>/
  which changed and <a rel="help" href="http://coastwatch.pfeg.noaa.gov/erddap/download/setup.html#flag">flag</a> 
     the dataset to be reloaded so that the deleted
  chunks will be replaced.
  If you have an email subscription to the dataset, you will get two emails:
  one when the dataset first reloads and starts to copy the data, 
  and another when the dataset loads again (automatically) and detects the new local data files.
  <br>&nbsp;

<li>Change Metadata - If you need to change any addAttributes or change the order of the
  variables associated with the source dataset:
  <ol>
  <li>Change the addAttributes for the source dataset in datasets.xml, as needed. 
  <li>Delete one of the copied files.
  <li>Set a <a rel="help" href="http://coastwatch.pfeg.noaa.gov/erddap/download/setup.html#flag">flag</a> 
    to reload the dataset immediately.
    If you do use a flag and you have an email subscription to the dataset, you will get two emails:
    one when the dataset first reloads and starts to copy the data, 
    and another when the dataset loads again (automatically) and detects the new local data files.
  <li>The deleted file will be regenerated with the new metadata. 
    If the source dataset is ever unavailable, the EDDTableCopy dataset will get metadata 
    from the regenerated file, since it is the youngest file.
    <br>&nbsp;
  </ol>

<li>Note that <a rel="help" href="#EDDGridCopy">EDDGridCopy</a> is very similar to EDDTableCopy, 
   but works with gridded datasets.
    <br>&nbsp;

<li>Skeleton XML - The skeleton XML for an EDDTableCopy dataset is:
<pre>
&lt;dataset type="EDDTableCopy" <a rel="help" href="#datasetID">datasetID</a>="..." <a rel="help" href="#active">active</a>="..." &gt;
  <a rel="help" href="#accessibleTo">&lt;accessibleTo&gt;</a>...&lt;/accessibleTo&gt; &lt;!-- 0 or 1 --&gt;
  <a rel="help" href="#reloadEveryNMinutes">&lt;reloadEveryNMinutes&gt;</a>...&lt;/reloadEveryNMinutes&gt;
  <a rel="help" href="#fgdcFile">&lt;fgdcFile&gt;</a>...&lt;/fgdcFile&gt; &lt;!-- 0 or 1 --&gt;
  <a rel="help" href="#iso19115File">&lt;iso19115File&gt;</a>...&lt;/iso19115File&gt; &lt;!-- 0 or 1 --&gt;
  <a rel="help" href="#onChange">&lt;onChange&gt;</a>...&lt;/onChange&gt; &lt;!-- 0 or more --&gt;
  &lt;extractDestinationNames&gt;...&lt;/extractDestinationNames&gt;  &lt;!-- 1 --&gt;
  &lt;orderExtractBy&gt;...&lt;/orderExtractBy&gt; &lt;!-- 0 or 1 --&gt;
  &lt;dataset&gt;...&lt;/dataset&gt; &lt;!-- 1 --&gt;
&lt;/dataset&gt;
</pre>
</ul>


<br>&nbsp;
<hr>
<h2><a name="details">Details</a></h2>

Here are detailed descriptions of common tags and attributes.
<ul>
<li><a name="convertToPublicSourceUrl"><tt><b>&lt;convertToPublicSourceUrl /&gt;</b></tt></a>
    is an optional tag within an <tt>&lt;erddapDatasets&gt;</tt> tag which contains a
    "<tt>from</tt>" and a "<tt>to</tt>" attribute which specify how to convert 
      a matching local sourceUrl into a public sourceUrl.
    "<tt>from</tt>" must have the form "<tt>[something]//[something]/</tt>".
      There can be 0 or more of these tags.
    For more information see <a rel="help" href="#sourceUrl"><tt>&lt;sourceUrl&gt;</tt></a>.
    For example,
    <br><tt>&lt;convertToPublicSourceUrl from="http://192.168.31.18/" to="http://oceanwatch.pfeg.noaa.gov/" /&gt;</tt>
    <br>will cause a matching local sourceUrl (such as
    http://192.168.31.18/thredds/dodsC/satellite/BA/ssta/5day)
    <br>into a public sourceUrl (http://oceanwatch.pfeg.noaa.gov/thredds/dodsC/satellite/BA/ssta/5day).
    <br>&nbsp;

<li><a name="requestBlacklist"><tt><b>&lt;requestBlacklist&gt;</b></tt></a>
    is an optional tag within an <tt>&lt;erddapDatasets&gt;</tt> tag which contains a
  comma-separated list of numeric IP addresses which will be immediately blacklisted.
  <ul>
  <li>You can also replace the last number in an IP address with * to block 0-255 (e.g., 123.45.67.*).
  <li>Any request from one of these addresses will receive an HTTP Error 403: Forbidden.
  <li>This can be used to fend off a 
    <a rel="help" href="http://en.wikipedia.org/wiki/Denial_of_service">Denial of Service attack</a> or an overly zealous 
    <a rel="help" href="http://en.wikipedia.org/wiki/Internet_bot">web robot</a>.
  <li>For example, 
    <br><tt>&lt;requestBlacklist&gt;98.76.54.321, 123.45.68.*&lt;/requestBlacklist&gt;</tt>
  <li>See your ERDDAP daily report for a list/tally of the most active allowed and blocked requesters. 
  <li>You can try to convert the IP numbers to domain names with free, reverse DNS, web services like 
    <a rel="help" href="http://www.hcidata.info/host2ip.htm">http://www.hcidata.info/host2ip.htm</a>.
    <br>&nbsp;
  </ul>

<li><a name="subscriptionEmailBlacklist"><tt><b>&lt;subscriptionEmailBlacklist&gt;</b></tt></a>
  is an optional tag within an <tt>&lt;erddapDatasets&gt;</tt> tag which contains
  a comma-separated list of email address which are immediately blacklisted from the 
  <a rel="help" href="http://coastwatch.pfeg.noaa.gov/erddap/subscriptions">subscription system</a>, for example
  <br><tt>&lt;subscriptionEmailBlacklist&gt;bob@badguy.com, john@badguy.com&lt;/subscriptionEmailBlacklist&gt;</tt>
  <br>If an email address on the list has subscriptions, the subscriptions will be cancelled.
  If an email address on the list tries to subscribe, the request will be refused.
  <br>&nbsp;

<li><a name="user"><tt><b>&lt;user&gt;</b></tt></a>
  is an OPTIONAL tag within an <tt>&lt;erddapDatasets&gt;</tt> tag that identifies a user's
  username, password, and roles (a comma-separated list).
  <ul>
  <li>This is part of ERDDAP's 
    <a rel="help" href="http://coastwatch.pfeg.noaa.gov/erddap/download/setup.html#security">security system</a>
    for restricting access to some datasets to some users.
  <li>Make a separate <tt>&lt;user&gt;</tt> tag for each user.
  <li>If setup.xml's <tt>&lt;authentication&gt;</tt> is <tt>openid</tt>, 
    use the user's OpenID URL as the username
    and don't specify a password.
    For example, if the user's OpenID URL is "http://jsmith.myopenid.com/", 
    the <tt>&lt;user&gt;</tt> tag is
    <br><tt>&lt;user username="http://jsmith.myopenid.com/" roles="role1, role2"/&gt;</tt>
    <br>OpenID is great because it frees you, the ERDDAP admin, from managing and dealing with passwords.
    A user's OpenID URL is public information, so there is no need to keep them secret.
  <li>The comma-separated list of roles specifies which roles you are assigning to the user.
    The "admin" role has a special meaning -- it identifies the ERDDAP administrator.
    Users with the admin role have special privileges.  But admins don't automatically get
    access to any of the private datasets.
  <li>The user will then have access to datasets that list one of these roles in the dataset's 
    <a rel="help" href="#accessibleTo"><tt>&lt;accessibleTo&gt;</tt></a> tag.
  <li>Thus, this is 
    <a rel="help" href="http://en.wikipedia.org/wiki/Role-based_access_control">role-based access control</a>.
  <li>If there is no <tt>&lt;user&gt;</tt> tag for a client, s/he will only be able to access public datasets,
    i.e., datasets which don't have an <a rel="help" href="#accessibleTo"><tt>&lt;accessibleTo&gt;</tt></a>
    tag.
  <li>If setup.xml's <tt>&lt;authentication&gt;</tt> is <tt>custom</tt>, 
    you need to specify the user and the
    password (at least 7 characters long) attributes in the <tt>&lt;user&gt;</tt> tag.
    <ul>
    <li>The passwords that users enter are case sensitive.
    <li>setup.xml's <tt>&lt;passwordEncoding&gt;</tt> determines how passwords are stored in the
      <tt>&lt;user&gt;</tt> tags in datasets.xml.  In order of increasing security, the options are: 
      <ul>
      <li>plaintext (NOT RECOMMENDED!) 
      <li><a rel="help" href="http://en.wikipedia.org/wiki/MD5">MD5</a> - the stored form of the password is made from 
        <tt>MD5(<i>password</i>)</tt>
      <li>UEPMD5 - (the default) the stored form of the password is made from 
        <tt>MD5(<i>UserName</i>:ERDDAP:<i>password</i>)</tt>
        The UserName and "ERDDAP" are used to 
          <a rel="help" href="http://en.wikipedia.org/wiki/Salt_(cryptography)">salt</a> the hash value, making
        it more difficult to decode. 
      </ul>
      (See  in setup.xml.)
    <li>On Windows, you can generate MD5 password digest values by downloading an MD5 program 
      (such as <a rel="help" href="http://www.fourmilab.ch/md5/">MD5</a>) and using (for example): 
      <tt>md5 -djsmith:ERDDAP:<i>actualPassword</i></tt>
    <li>On Linux/Unix, you can generate MD5 digest values by using the built-in md5sum program (for example):
      <br>  <tt>echo -n "jsmith:ERDDAP:<i>actualPassword</i>" | md5sum</tt>
    <li>Stored plaintext passwords are case sensitive. 
       The stored forms of MD5 and UEPMD5 passwords are not case sensitive.
    <li>For example (using UEPMD5), if username="jsmith" and password="myPassword", the
      <tt>&lt;user&gt;</tt> tag is:
      <br><tt>&lt;user username="jsmith" 
      <br>password="57AB7ACCEB545E0BEB46C4C75CEC3C30" 
      <br>roles="role1, role2" /&gt;</tt>
      <br>where the stored password was generated with
      <br><tt>md5 -djsmith:ERDDAP:myPassword</tt>
    </ul>
    <br>&nbsp;
  </ul> 

<li><a name="dataset"><tt><b>&lt;dataset&gt;</b></tt></a>
<p><b>Two attributes can appear within a <tt>&lt;dataset&gt;</tt> tag:</b>
<ul>
<li><a name="datasetID"><tt><b>datasetID="..."</b></tt></a> is a REQUIRED attribute within a 
  <tt>&lt;dataset&gt;</tt> tag which assigns a short
  (usually &lt;15 characters), unique, identifying name to a dataset.
    <ul>
    <li>Valid characters are A-Z, a-z, 0-9, _, and -, but we recommend starting with a letter and
      then just using A-Z, a-z, 0-9, and _.
    <li>DatasetID's are case sensitive, but DON'T create two datasetID's that
      only differ in upper/lower case letters.  It will cause problems
      on Windows computers (yours and/or a user's computer).
    <li>Best practices: We recommend using <a rel="help" href="http://en.wikipedia.org/wiki/CamelCase">camelCase</a>.
    <li>Best practices: We recommend that the first part be an acronym or abbreviation of the
      source institution's name and the second part be an acronym or abbreviation of the 
      dataset's name.
      When possible, we create a name which reflect's the source's name for the dataset.
      For example, we used <tt>datasetID="erdPHssta8day"</tt> for a dataset from the 
      NOAA NMFS SWFSC Environmental Research Division which is designated by the source
      to be satellite/PH/ssta/8day.
      <br>&nbsp;
    </ul>

<li><a name="active"><tt><b>active="..."</b></tt></a> is an OPTIONAL attribute within the <tt>&lt;dataset&gt;</tt> tag
  which indicates if a dataset is active (eligible for use in ERDDAP) or not.
  <ul>
  <li>Valid values are <tt>true</tt> (the default) and <tt>false</tt>.
  <li>Since the default is <tt>true</tt>, you don't need to use this attribute except to use
    <tt>active="false"</tt> 
    to force a 
        <a rel="help" href="http://coastwatch.pfeg.noaa.gov/erddap/download/setup.html#removingDatasets">dataset's removal</a> as soon as possible (if it is alive in ERDDAP) 
    and to tell ERDDAP not to try to load it in the future.
    <br>&nbsp;
  </ul>
</ul>

<p><b>Several tags can appear between the <tt>&lt;dataset&gt;</tt> and 
<tt>&lt;/dataset&gt;</tt> tags:</b>

<ul>
<li><a name="accessibleTo"><tt><b>&lt;accessibleTo&gt;</b></tt></a>
    is an OPTIONAL tag within a <tt>&lt;dataset&gt;</tt> 
    tag that specifies a space-separated list of 
  <a rel="help" href="#user">roles</a> which are allowed to have access to this dataset.
  <ul>
  <li>This is part of ERDDAP's 
    <a rel="help" href="http://coastwatch.pfeg.noaa.gov/erddap/download/setup.html#security">security system</a>
    for restricting access to some datasets to some users.
  <li>If this tag is not present, all users (even if they haven't logged in) will have access to
    this dataset.
  <li>If this tag is present, this dataset will only be visible and accessible 
    to logged-in users who have one of the specified roles.
    This dataset won't be visible to users who aren't logged in.
    <br>&nbsp;
  </ul> 

<li><a name="altitudeMetersPerSourceUnit"><tt><b>&lt;altitudeMetersPerSourceUnit&gt;</b></tt></a>
  is an OPTIONAL tag within a <tt>&lt;dataset&gt;</tt> tag that specifies a 
  number which is multiplied by the source altitude or depth values (after 
    <a rel="help" href="#scale_factor"><tt>scale_factor</tt>&nbsp;and&nbsp;<tt>add_offset</tt></a>
  have been applied) to convert them into altitude values (in meters above sea level).
  <ul>
  <li>For example, if the source is already measured in meters above sea level, use 1.
  <li>For example, if the source is measured in meters below sea level, use -1.
  <li>For example, if the source is measured in km above sea level, use 0.001.
  <li>This tag is OPTIONAL, but recommended. The default value is 1.
  <li>An example is:
    <br><tt>&lt;altitudeMetersPerSourceUnit&gt;-1&lt;/altitudeMetersPerSourceUnit&gt;</tt>
    <br>&nbsp;
  </ul>

<li><a name="fgdcFile"><tt><b>&lt;fgdcFile&gt;</b></tt></a> is an OPTIONAL tag
  within a <tt>&lt;dataset&gt;</tt> tag that tells ERDDAP to use a pre-made FGDC file
  that is somewhere on the server's file system
  instead of having ERDDAP try to generate the file.  Usage:<tt>
  <br>&lt;fgdcFile&gt;<i>fullFileName</i>&lt;/fgdcFile&gt;</tt>
  <br>If <tt><i>fullFileName</i></tt>="" or the file isn't found, 
    the dataset will have no FGDC metadata.
    So this is also useful if you want to suppress the FGDC metadata
    for a specific dataset.
  <br>Or, you can put <tt>&lt;fgdcActive&gt;false&lt;/fgdcActive&gt;</tt>
    in setup.xml to tell ERDDAP not to offer FGDC metadata for any dataset.
  <br>&nbsp;

<li><a name="iso19115File"><tt><b>&lt;iso19115File&gt;</b></tt></a> is an OPTIONAL tag
  within a <tt>&lt;dataset&gt;</tt> tag that tells ERDDAP to use a pre-made ISO 19115 file
  that is somewhere on the server's file system
  instead of having ERDDAP try to generate the file.  Usage:<tt>
  <br>&lt;iso19115File&gt;<i>fullFileName</i>&lt;/iso19115File&gt;</tt>
  <br>If <tt><i>fullFileName</i></tt>="" or the file isn't found, 
    the dataset will have no ISO 19115 metadata.
    So this is also useful if you want to suppress the ISO 19115 metadata
    for a specific dataset.
  <br>Or, you can put <tt>&lt;iso19115Active&gt;false&lt;/iso19115Active&gt;</tt>
    in setup.xml to tell ERDDAP not to offer ISO 19115 metadata for any dataset.
  <br>&nbsp;

<li><a name="onChange"><tt><b>&lt;onChange&gt;</b></tt></a>
  is an OPTIONAL tag within a <tt>&lt;dataset&gt;</tt> tag that specifies an action which 
  will be done when this dataset is created (when ERDDAP is restarted) and whenever 
  this dataset changes in any way.
  <ul>
  <li>Currently, for EDDGrid subclasses, any change to metadata or to an axis variable 
    (e.g., a new time point for near-real-time data) is considered a change,
    but a reloading of the dataset is not considered a change (by itself).
  <li>Currently, for EDDTable subclasses, any reloading of the dataset is considered a change.
  <li>Currently, only two types of actions are allowed:
    <ul>
    <li>http:// - If the action starts with "http://", ERDDAP will send an HTTP GET request to the
      specified URL. The response will be ignored.
      For example, the URL might tell some other web service to do something.
      <ul>
      <li>If the URL has a query part (after the "?"), it MUST be already 
        <a rel="help" href="http://en.wikipedia.org/wiki/Percent-encoding">percent encoded</a>.
        In practice, this can be very minimal percent encoding: 
        all you have to do is convert special characters in the right-hand-side values of any constraints:
        % into %25, &amp; into %26, ", into %22, = into %3D, + into %2B, and space into %20 (or +)
        and convert all characters above #126 to their %HH form (where HH is the 2-digit hex value).
        Unicode characters above #255 must be UTF-8 encoded and then each byte must be converted to
        %HH form (ask a programmer for help).
      <li>Since datasets.xml is an XML file, you also need to encode '&amp;', '&lt;', and '&gt;' in the URL
        as '&amp;amp;', '&amp;lt;', and '&amp;gt;'.
      <li>Example: For a URL that you might type into a browser as:
        <tt>http://www.company.com/webService?department=R%26D&amp;param2=value2</tt> 
        You should specify an <tt>&lt;onChange&gt;</tt> tag via (on one line)
        <br><tt>&lt;onChange&gt;http://www.company.com/webService?
        department=R%26D&amp;amp;param2=value2&lt;/onChange&gt;</tt> 
      </ul>
    <li>mailto: - If the action starts with "mailto:", ERDDAP will send an email to the subsequent
      email address indicating that the dataset has been updated/changed.
      <br>Example: <tt>&lt;onChange&gt;mailto:john.smith@company.com&lt;/onChange&gt;</tt>
    </ul>

    If you have a good reason for ERDDAP to support some other type of action, send us an email
    describing what you want.
  <li>This tag is OPTIONAL. There can be as many of these tags as you want.
  <li>This is analogous to ERDDAP's email/URL subscription system, but these actions aren't stored
    persistently (i.e., they are only stored in an EDD object).
  <li>To remove a subscription, just remove the <tt>&lt;onChange&gt;</tt> tag.
    The change will be noted the next time the dataset is reloaded.
    <br>&nbsp;
  </ul>

<li><a name="reloadEveryNMinutes"><tt><b>&lt;reloadEveryNMinutes&gt;</b></tt></a>
  is an OPTIONAL tag within a <tt>&lt;dataset&gt;</tt> tag that specifies how often the 
  dataset should be reloaded.
  <ul>
  <li>Generally, datasets that are updated frequently should be reloaded frequently, for example,
    every 60 minutes.
  <li>Datasets that are updated infrequently should be reloaded infrequently, for example,
    every 1440 minutes (daily) or 10080 minutes (weekly).
  <li>This tag is OPTIONAL, but recommended. The default is 10080.
  <li>An example is: <tt>&lt;reloadEveryNMinutes&gt;1440&lt;/reloadEveryNMinutes&gt;</tt>
  <li>Note that when a dataset is reloaded, all files in the 
      <i>bigParentDirectory</i>/cache/<i>datasetID</i>
    directory are deleted.
  <li>No matter what this is set to, a dataset won't be loaded more frequently than
    <tt>&lt;loadDatasetsMinMinutes&gt;</tt> (default = 15), as specified in 
     <a rel="help" href="http://coastwatch.pfeg.noaa.gov/erddap/download/setup.html#setup.xml">setup.xml</a>.
   So if you want datasets to be reloaded very frequently, you need to set both
     reloadEveryNMinutes and loadDatasetsMinMinutes to small values.
  <li>Don't set reloadEveryNMinutes to the same value as loadDatasetsMinMinutes,
    because the elapsed time is likely to be (for example) 14:58 or 15:02,
    so about half the time the dataset won't be reloaded. 
    Instead, use a smaller reloadEveryNMinutes value (e.g., 10).
  <li>Regardless of reloadEveryNMinutes, you can manually tell ERDDAP to reload a specific dataset
    as soon as possible via a
     <a rel="help" href="http://coastwatch.pfeg.noaa.gov/erddap/download/setup.html#flag">flag file</a>.
  <br>&nbsp;
  </ul>

<li><a name="sourceCanConstrainStringEQNE"><tt><b>&lt;sourceCanConstrainStringEQNE&gt;</b></tt></a>
  is an OPTIONAL tag within an EDDTable <tt>&lt;dataset&gt;</tt> tag that 
  specifies if the source can constrain String variables with the = and != operators.
  <ul>
  <li>For EDDTableFromDapSequence, this applies to the outer sequence String variables only.
    It is assumed that the source can't handle any constraints on inner sequence variables.
  <li>This tag is OPTIONAL. Valid values are <tt>true</tt> (the default) and <tt>false</tt>.
  <li>For EDDTableFromDapSequence OPeNDAP DRDS servers, this should be set to true (the default).
  <li>For EDDTableFromDapSequence Dapper servers, this should be set to false.
  <li>An example is:
    <br><tt>&lt;sourceCanConstrainStringEQNE&gt;true&lt;/sourceCanConstrainStringEQNE&gt;</tt>
    <br>&nbsp;
  </ul>

<li><a name="sourceCanConstrainStringGTLT"><tt><b>&lt;sourceCanConstrainStringGTLT&gt;</b></tt></a>
  is an OPTIONAL tag within an EDDTable <tt>&lt;dataset&gt;</tt> tag that 
  specifies if the source can constrain String variables with the &lt;, &lt;=, &gt;, and &gt;= operators.
  <ul>
  <li>For EDDTableFromDapSequence, this applies to the outer sequence String variables only.
     It is assumed that the source can't handle any constraints on inner sequence variables.
  <li>Valid values are <tt>true</tt> (the default) and <tt>false</tt>.
  <li>This tag is OPTIONAL. The default is <tt>true</tt>.
  <li>For EDDTableFromDapSequence OPeNDAP DRDS servers, this should be set to true (the default).
  <li>For EDDTableFromDapSequence Dapper servers, this should be set to false.
  <li>An example is: 
    <br><tt>&lt;sourceCanConstrainStringGTLT&gt;true&lt;/sourceCanConstrainStringGTLT&gt;</tt>
    <br>&nbsp;
  </ul>

<li><a name="sourceCanConstrainStringRegex"><tt><b>&lt;sourceCanConstrainStringRegex&gt;</b></tt></a>
  is an OPTIONAL tag within an EDDTable <tt>&lt;dataset&gt;</tt> tag that 
  specifies if the source can constrain String variables by regular expressions, and if so, 
  what the operator is.
  <ul>
  <li>Valid values are "=~" (the DAP standard), "~=" (mistakenly supported by many DAP servers), 
    or "" (indicating that the source doesn't support regular expressions).
  <li>This tag is OPTIONAL. The default is "".
  <li>For EDDTableFromDapSequence OPeNDAP DRDS servers, this should be set to "" (the default).
  <li>For EDDTableFromDapSequence Dapper servers, this should be set to "" (the default).
  <li>An example is:
    <br><tt>&lt;sourceCanConstrainStringRegex&gt;=~&lt;/sourceCanConstrainStringRegex&gt;</tt>
    <br>&nbsp;
  </ul>

<li><a name="sourceNeedsExpandedFP_EQ"><tt><b>&lt;sourceNeedsExpandedFP_EQ&gt;</b></tt></a>
  is an OPTIONAL tag within an EDDTable <tt>&lt;dataset&gt;</tt> tag that 
  specifies if the source needs help with queries with 
  <tt>&lt;numericVariable&gt;=&lt;floatingPointValue&gt;</tt> (and !=, &gt;=, &lt;=).
  <ul>
  <li>For some data sources, numeric queries involving =, !=, &lt;=, or &gt;= may not work as desired
    with floating point numbers.
    For example, a search for <tt>longitude=220.2</tt> may fail if the value is stored as 220.20000000000001.
  <li>This problem arises because floating point numbers are
    <a rel="help" href="http://www.cygnus-software.com/papers/comparingfloats/comparingfloats.htm">not represented exactly within computers</a>.
  <li>If sourceNeedsExpandedFP_EQ is set to true (the default), 
    ERDDAP modifies the queries sent to the data source to avoid this problem.
    It is always safe and fine to leave this set to true.
    <br>&nbsp;
  </ul>

<li><a name="sourceUrl"><tt><b>&lt;sourceUrl&gt;</b></tt></a> 
  is a REQUIRED tag within a <tt>&lt;dataset&gt;</tt> 
  tag that specifies the url source of the data.
  <ul>
  <li>For most dataset types, this is REQUIRED.  For others it is not an option. 
    See the dataset type's description for details.
  <li>For most datasets, this is the base of the url that is used to request data.
  <li>For example, for DAP servers, this is the url to which .dods, .das, .dds, or .html could be added.
  <li>If the URL has a query part (after the "?"), it MUST be already 
     <a rel="help" href="http://en.wikipedia.org/wiki/Percent-encoding">percent encoded</a>.
    In practice, this can be very minimal percent encoding: 
    all you have to do is convert special characters in the right-hand-side values of any constraints:
    % into %25, &amp; into %26, ", into %22, = into %3D, + into %2B, and space into %20 (or +)
    and convert all characters above #126 to their %HH form (where HH is the 2-digit hex value).
    Unicode characters above #255 must be UTF-8 encoded and then each byte must be converted 
    to %HH form (ask a programmer for help).
  <li>Since datasets.xml is an XML file, you MUST also encode '&amp;', '&lt;', and '&gt;' in the URL
    as '&amp;amp;', '&amp;lt;', and '&amp;gt;'.
  <li>An example is: 
    <br><tt>&lt;sourceUrl&gt;http://dapper.pmel.noaa.gov/dapper/epic/tao_time_series.cdp&lt;/sourceUrl&gt;</tt>
  <li>For most dataset types, ERDDAP adds the original sourceUrl (the "localSourceUrl" in the source code)
    to the <a rel="help" href="#globalAttributes">global attributes</a> (where it becomes the "publicSourceUrl" in the source code).
    When the data source is local files, ERDDAP adds sourceUrl="(local files)" to the global attributes
    as a security precaution.
    When the data source is a database, ERDDAP adds sourceUrl="(source database)" to the global 
    attributes as a security precaution.
    If some of your datasets use non-public sourceUrl's (usually because their computer is
    in your DMZ or on a local LAN) you can use
      <a rel="help" href="#convertToPublicSourceUrl"><tt>&lt;convertToPublicSourceUrl&gt;</tt></a>
      tags to specify 
    how to convert the local sourceUrls to public sourceUrls.
    <br>&nbsp;
  </ul>


<li><a name="addAttributes"><tt><b>&lt;addAttributes&gt;</b></tt></a> 
    is an OPTIONAL tag for each dataset and for each variable which lets ERDDAP
  administrators control the metadata attributes associated with a dataset and its variables.
  <ul>
  <li>ERDDAP combines the attributes from the dataset's source ("sourceAttributes")
    and the "addAttributes" which you define in datasets.xml (which have priority) 
    to make the "combinedAttributes", which are what ERDDAP users see. 
    Thus, you can use addAttributes to redefine the values of sourceAttributes, add new
    attributes, or remove attributes.
  <li>The <tt>&lt;addAttributes&gt;</tt> tag encloses 0 or more <tt><b>&lt;att&gt;</b></tt> subtags, 
     which are used
    to specify individual attributes. 
  <li>Each attribute consists of a name and a value (which has a specific data type, e.g., double). 
  <li>There can be only one attribute with a given name.
    If there are more, the last one has priority.
  <li>The value can be a single value or a space-separated list of values.

  <li>Syntax 
    <ul>
    <li>The order of the <tt>&lt;att&gt;</tt> 
      subtags within <tt>addAttributes</tt> is not important.
    <li>The <tt>&lt;att&gt;</tt> subtag format is 
      <br><tt>&lt;att name="<i>name</i>" [type="<i>type</i>"] &gt;<i>value</i>&lt;/att&gt;</tt>
    <li>If an &lt;att&gt; subtag has no value or a value of <tt>null</tt>, that attribute will be removed
      from the combined attributes.
      <br>For example, <tt>&lt;att name="rows" /&gt;</tt> will remove <tt>rows</tt> from the combined attributes.
      <br>For example, <tt>&lt;att name="coordinates"&gt;null&lt;/att&gt;</tt> will remove <tt>coordinates</tt>
      from the combined  attributes.
    <li>The OPTIONAL <tt>type</tt> value for <tt>&lt;att&gt;</tt> 
      subtags indicates the data type for the values.
      The default type is <tt>string</tt>.
      <ul>
      <li>Valid types for single values are
        <tt>byte, unsignedShort, short, int, long, float, double</tt>, 
        and <tt>string</tt>.
      <li>Valid types for space-separated lists of values (or single values) are 
        <tt>byteList,
        unsignedShortList, shortList, intList, longList, floatList, doubleList</tt>.
      <li>There is no <tt>stringList</tt>. Store the String values in a newline-separated String.
      <!-- li>Boolean values are case-insensitive. 
         For true, use "TRUE", "true", "T", or "t".
         For false, use "FALSE", "false", "F", or "f". -->
         <br>&nbsp;
      </ul> 
    </ul>
  </ul>

  <li><a name="globalAttributes"><b>Global Attributes / Global <tt>&lt;addAttributes&gt;</tt></b></a> - 
     <br><tt>&lt;addAttributes&gt;</tt> is an OPTIONAL tag within the 
       <tt>&lt;dataset&gt;</tt> tag which
       is used to
     change attributes that apply to the entire dataset.
     <ul>
     <li><b>Use the global <tt>&lt;addAttributes&gt;</tt> 
       to change the dataset's global attributes.</b>
       ERDDAP combines the global attributes from the dataset's source 
       (<tt><b>sourceAttributes</b></tt>)
       and the global <tt><b>addAttributes</b></tt> 
       which you define in datasets.xml (which have priority) 
       to make the global <tt><b>combinedAttributes</b></tt>, which are what ERDDAP users see. 
       Thus, you can use addAttributes to redefine the values of sourceAttributes, add new
       attributes, or remove attributes.
     <li>See the <a rel="help" href="#addAttributes"><tt><b>&lt;addAttributes&gt;</b></tt> information</a>
       which applies to 
       global and variable <tt><b>&lt;addAttributes&gt;</b></tt>.

     <li><a rel="help" href="http://www.fgdc.gov/">FGDC</a> and
       <a rel="help" href="http://en.wikipedia.org/wiki/Geospatial_metadata">ISO&nbsp;19115-2/19139</a>
       Metadata
       - Normally, ERDDAP will automatically generate
       ISO 19115 and FGDC XML metadata files for each dataset using information
       from the dataset's metadata. So, <b>good dataset metadata leads to good ERDDAP-generated 
       ISO 19115 and FGDC metadata. Please consider putting lots of time and effort into
       improving your datasets' metadata (which is a good thing to do anyway).</b>
       Most of the dataset metadata attributes which are used generate the ISO 19115 
       and FGDC metadata are from the 
       <a rel="help" href="http://www.unidata.ucar.edu/software/netcdf-java/formats/DataDiscoveryAttConvention.html">ACDD metadata standard</a> and are so noted below. 

     <li>Many global attributes are special in that ERDDAP looks for them and uses them in various ways.
       For example, a link to the infoUrl is included on web pages with lists of datasets, and
       other places, so that users can find out more about the dataset.
     <li>When a user selects a subset of data, globalAttributes related to the variable's 
       longitude, latitude, altitude, and time ranges (for example, Southernmost_Northing,
       Northernmost_Northing, time_coverage_start, time_coverage_end) are automatically
       generated or updated.
     <li>A simple sample global <tt>&lt;addAttributes&gt;</tt> is:<pre>
&lt;addAttributes&gt; 
  &lt;att name="Conventions"&gt;COARDS, CF-1.6, Unidata Dataset 
  Discovery v1.0&lt;/att&gt;
  &lt;att name="infoUrl"&gt;http://coastwatch.pfeg.noaa.gov/infog/
  PH_ssta_las.html&lt;/att&gt;
  &lt;att name="institution"&gt;NOAA CoastWatch, West Coast Node&lt;/att&gt;
  &lt;att name="title"&gt;SST, Pathfinder Ver 5.0, Day and Night, 
  Global, Science Quality (1 Day Composite)&lt;/att&gt;
  &lt;att name="cwhdf_version" /&gt;
&lt;/addAttributes&gt;  </pre>
     <li>Supplying this information helps ERDDAP do a better job and helps users understand the datasets.
       Please take the time to do a good job with metadata attributes. The users will thank you.
     </ul>

    <p><b>Comments about global attributes that are special in ERDDAP:</b>
    <br>&nbsp;
      <ul>

      <li><a name="acknowledgment"><b>acknowledgment</b></a> 
        (from the
        <a rel="help" href="http://www.unidata.ucar.edu/software/netcdf-java/formats/DataDiscoveryAttConvention.html">ACDD</a> 
        metadata standard) 
        is a RECOMMENDED way to acknowledge the group or groups that provided support 
        (notably, financial)
        for the project that created this data.

      <li><a name="cdm_altitude_proxy"><b>cdm_altitude_proxy</b></a> is just for EDDTable datasets 
        that don't have an altitude variable but do have 
        a variable that is a proxy for altitude (e.g., depth, pressure, sigma, bottleNumber),
        you may use this attribute to identify that variable.  For example,
        <br><tt>&lt;att name="cdm_altitude_proxy"&gt;depth&lt;/att&gt;</tt>
        <br>If the <a rel="help" href="#cdm_data_type">cdm_data_type</a> is Profile or TrajectoryProfile 
          and there is no altitude variable,
        cdm_altitude_proxy MUST be defined.
        If cdm_altitude_proxy is defined, ERDDAP will add the following metadata to the variable:
        <tt>_CoordinateAxisType=Height</tt> and <tt>axis=Z</tt>.

      <li><a name="cdm_data_type"><b>cdm_data_type</b></a> 
        (from the
        <a rel="help" href="http://www.unidata.ucar.edu/software/netcdf-java/formats/DataDiscoveryAttConvention.html">ACDD</a> 
        metadata standard) 
        is a global attribute that indicates the 
          Unidata <a rel="help" href="http://www.unidata.ucar.edu/software/netcdf/CDM/">Common Data Model</a>
        data type for the dataset.  The CDM standard is still evolving and may change again.
        The best overview of the different feature types (but out-of-date!) is currently
          <a rel="help" href="http://www.unidata.ucar.edu/software/netcdf-java/CDM/CDMfeatures.doc">Unidata's CDMfeatures.doc</a>.
        <br>ERDDAP complies with the newly ratified 
        <a rel="help" href="http://cf-pcmdi.llnl.gov/documents/cf-conventions/1.6/cf-conventions.html#discrete-sampling-geometries">Discrete&nbsp;Sampling&nbsp;Geometries</a> chapter of the 
        <a rel="help" href="http://cf-pcmdi.llnl.gov/documents/cf-conventions/1.6/cf-conventions.html">CF 1.6</a>
        metadata conventions
        (previously called the CF Point Observation Conventions).
        <ul>
        <li>Either the dataset's global <a rel="help" href="#globalAttributes">sourceAttributes</a> 
          or its global <tt>&lt;addAttributes&gt;</tt> MUST 
         include the cdm_data_type attribute.
         A few dataset types (like EDDTableFromObis) will set this automatically.
        <li>For EDDGrid datasets, the cdm_data_type options are Grid (the default and by far
          the most common type for EDDGrid datasets), MovingGrid, Other, Point, Profile, 
          RadialSweep, TimeSeries, TimeSeriesProfile, Swath, Trajectory, and TrajectoryProfile.
          Currently, EDDGrid does not require that any related metadata be specified,
          nor does it check that the data matches the cdm_data_type. That will probably 
          change in the near future.
        <li>EDDTable uses cdm_data_type in a rigorous way. If a dataset doesn't comply with
          the cdm_data_type's requirements, the dataset will fail to load and will generate an
          <a rel="help" href="#errorMessages">error message</a>. (That's a good thing, in the sense that
             the error message will tell
          you what is wrong so that you can fix it.)

          <p>For all of these datasets, in the <tt>Conventions</tt> and
            <tt>Metadata_Conventions</tt> global attributes, please refer to 
            CF-1.6 (not CF-1.0, 1.1, 1.2, 1.3, 1.4, or 1.5), 
            since CF-1.6 is the first version to include the changes related to 
            Discrete Sampling Geometry conventions.

          <p>For EDDTable datasets, the cdm_data_type options (and related requirements) are 
          <ul>
          <li>Point - for a dataset with unrelated points.
            <ul>
            <li>As with all cdm_data_types other than Other, Point datasets MUST have longitude,
              latitude, and time variables. 
            </ul>
          <li>Profile - for data from multiple depths at one or more longitude,latitude locations.
            <ul>
            <li>The dataset MUST include the globalAttribute cdm_profile_variables, where the
              value is a comma-separated list of variables with profile information.
            <li>One of the variables MUST have the attribute cf_role=profile_id
              to identify the variable that uniquely identifies the profiles.
              If no other variable is suitable, consider using the time variable.
            </ul>
          <li>TimeSeries - for data from a set of stations with fixed longitude,latitude(,altitude).
            <ul>
            <li>The dataset MUST include the globalAttribute cdm_timeseries_variables, where the
              value is a comma-separated list of variables with station information.
            <li>One of the variables MUST have the attribute cf_role=timeseries_id
              to identify the variable that uniquely identifies the stations.
            <li>It is okay if the longitude and latitude vary slightly over time.
              If the longitude and latitude don't vary, include them in the cdm_timeseries_variables.
              If they do vary, don't include them in the cdm_timeseries_variables.
            </ul>
          <li>TimeSeriesProfile - for profiles from a set of stations.
            <ul>
            <li>The dataset MUST include the globalAttribute cdm_timeseries_variables, where the
              value is a comma-separated list of variables with station information.
            <li>The dataset MUST include the globalAttribute cdm_profile_variables, where the
              value is a comma-separated list of variables with profile information.
            <li>One of the variables MUST have the attribute cf_role=timeseries_id
              to identify the variable that uniquely identifies the stations.
            <li>One of the variables MUST have the attribute cf_role=profile_id
              to identify the variable that uniquely identifies the profiles.
              (A given profile_id only has to be unique for a given timeseries_id.)
              If no other variable is suitable, consider using the time variable.
            </ul>
          <li>Trajectory - for data from a set of longitude,latitude(,altitude) paths called trajectories.
            <ul>
            <li>The dataset MUST include the globalAttribute cdm_trajectory_variables, where the
              value is a comma-separated list of variables with trajectory information.
            <li>One of the variables MUST have the attribute cf_role=trajectory_id
              to identify the variable that uniquely identifies the trajectories.
            </ul>
          <li>TrajectoryProfile - for profiles taken along trajectories. 
            <ul>
            <li>The dataset MUST include the globalAttribute cdm_trajectory_variables, where the
              value is a comma-separated list of variables with trajectory information.
            <li>The dataset MUST include the globalAttribute cdm_profile_variables, where the
              value is a comma-separated list of variables with profile information.
            <li>One of the variables MUST have the attribute cf_role=trajectory_id
              to identify the variable that uniquely identifies the trajectories.
            <li>One of the variables MUST have the attribute cf_role=profile_id
              to identify the variable that uniquely identifies the profiles.
              (A given profile_id only has to be unique for a given trajectory_id.)
              If no other variable is suitable, consider using the time variable.
            </ul>
          <li>Other - has no requirements. Use it if the dataset doesn't fit one of the other options.
          </ul>
          Related notes:
          <ul>
          <li>All EDDTable datasets with a cdm_data_type other than "Other" MUST have longitude,
            latitude, and time variables. 
          <li>Datasets with profiles MUST have an altitude variable or a 
            <a rel="help" href="#cdm_altitude_proxy">cdm_altitude_proxy</a> variable.
          <li>If you can't make a dataset comply with all of the requirements for the ideal
            cdm_data_type, use "Point" (which has few requirements) or "Other" 
            (which has no requirements) instead.
          <li>This information is used by ERDDAP in various ways, for example, when making
            .ncCF files (.nc files which comply with the 
            Contiguous Ragged Array Representations associated with the dataset's cdm_data_type,
            as defined in the newly ratified 
            <a rel="help" href="http://cf-pcmdi.llnl.gov/documents/cf-conventions/1.6/cf-conventions.html#discrete-sampling-geometries">Discrete&nbsp;Sampling&nbsp;Geometries</a> chapter of the 
            <a rel="help" href="http://cf-pcmdi.llnl.gov/documents/cf-conventions/1.6/cf-conventions.html">CF 1.6</a>
               metadata conventions,
            which were previously named "CF Point Observation Conventions").
          <li>Hint: Usually, a good starting point for <a rel="help" href="#subsetVariables">subsetVariables</a>
            is the combined values of the cdm_..._variables.  
            For example, for TimeSeriesProfile, start with the 
            cdm_timeseries_variables plus the cdm_profile_variables.
          </ul>
        </ul>

      <li><a name="contributor_name"><b>contributor_name</b></a> 
        (from the
        <a rel="help" href="http://www.unidata.ucar.edu/software/netcdf-java/formats/DataDiscoveryAttConvention.html">ACDD</a> 
        metadata standard) 
        is the RECOMMENDED way to identify a person, organization, or project 
        which contributed to this dataset (e.g., the original creator of the data,
        before it was reprocessd by the creator of this dataset).
        If "contributor" doesn't really apply to a dataset, omit this attribute.
        Compared to <a rel="help" href="#creator_name">creator_name</a>, this is more
        focused on the funding source.

      <li><a name="contributor_role"><b>contributor_role</b></a> 
        (from the
        <a rel="help" href="http://www.unidata.ucar.edu/software/netcdf-java/formats/DataDiscoveryAttConvention.html">ACDD</a> 
        metadata standard) 
        is the RECOMMENDED way to identify the role of 
        <a rel="help" href="#creator_name">contributor_name</a>, 
        e.g., <tt>Source of Level 2b data</tt>.
        If "contributor" doesn't really apply to a dataset, omit this attribute.

      <li><a name="coverage_content_type"><b>coverage_content_type</b></a> 
        (from the
        <a rel="help" href="http://en.wikipedia.org/wiki/Geospatial_metadata">ISO 19115</a> 
        metadata standard) 
        is the RECOMMENDED way to identify the type of gridded data (in EDDGrid datasets). 
        The only allowed values are auxiliaryInformation, image, modelResult, 
        physicalMeasurement (the default when ISO 19115 metadata is generated), 
        qualityInformation, referenceInformation, and thematicClassification.
        (Don't use this tag for EDDTable datasets.)

      <li><a name="creator_name"><b>creator_name</b></a> 
        (from the
        <a rel="help" href="http://www.unidata.ucar.edu/software/netcdf-java/formats/DataDiscoveryAttConvention.html">ACDD</a> 
        metadata standard) 
        is the RECOMMENDED way to identify the person, organization, or project 
        (if not a specific person or organization), 
        most responsible for the creation (or most recent reprocessing) of this data.
        If the data was extensively reprocessed (e.g., satellite data from level 2 to level 3 or 4),
        then usually the reprocessor is listed as the creator and
        the original creator is listed via <a rel="help" href="#contributor_name">contributor_name</a>.
        Compared to <a rel="help" href="#project">project</a>, this is more flexible,
        since it may identify a person, an organization, or a project.

      <li><a name="creator_email"><b>creator_email</b></a> 
        (from the
        <a rel="help" href="http://www.unidata.ucar.edu/software/netcdf-java/formats/DataDiscoveryAttConvention.html">ACDD</a> 
        metadata standard) 
        is the RECOMMENDED way to identify an email address 
        (correctly formatted, e.g., john_smith@great.org) 
        that provides a way to contact the creator.

      <li><a name="creator_url"><b>creator_url</b></a> 
        (from the
        <a rel="help" href="http://www.unidata.ucar.edu/software/netcdf-java/formats/DataDiscoveryAttConvention.html">ACDD</a> 
        metadata standard) 
        is the RECOMMENDED way to identify a URL for organization that created the dataset, 
        or a URL with 
        the creator's information about this dataset (but that is more the purpose of
        <a rel="help" href="#infoUrl">infoUrl</a>).
        
      <li><a name="date_created"><b>date_created</b></a> 
        (from the
        <a rel="help" href="http://www.unidata.ucar.edu/software/netcdf-java/formats/DataDiscoveryAttConvention.html">ACDD</a> 
        metadata standard) 
        is the RECOMMENDED way to identify the date on which the data was created 
        (e.g., processed into this form), 
        in ISO 8601 format, e.g., <tt>2010-01-30</tt>.

      <li><a name="date_modified"><b>date_modified</b></a> 
        (from the
        <a rel="help" href="http://www.unidata.ucar.edu/software/netcdf-java/formats/DataDiscoveryAttConvention.html">ACDD</a> 
        metadata standard) 
        is the RECOMMENDED way to identify the date on which the data was last modified 
        (e.g., when an error was fixed or when the latest data was added), 
        in ISO 8601 format, e.g., <tt>2012-03-15</tt>.

      <li><a name="date_issued"><b>date_issued</b></a> 
        (from the
        <a rel="help" href="http://www.unidata.ucar.edu/software/netcdf-java/formats/DataDiscoveryAttConvention.html">ACDD</a> 
        metadata standard) 
        is the RECOMMENDED way to identify the date on which the data was made available to others, 
        in ISO 8601 format, e.g., <tt>2012-03-15</tt>.
        For example, the dataset may have a <a rel="help" href="#date_created">date_created</a> of
        <tt>2010-01-30</tt>, but was only made publicly available <tt>2010-07-30</tt>.

      <li><a name="featureType"><b>featureType</b></a> 
        (from the
        <a rel="help" href="http://cf-pcmdi.llnl.gov/documents/cf-conventions/1.6/cf-conventions.html">CF</a>
        metadata standard) 
        is IGNORED and/or REPLACED.  If the dataset's <a rel="help" href="#cdm_data_type"><tt>cdm_data_type</tt></a>
        is appropriate, ERDDAP will automatically use it to create a
        <tt>featureType</tt> attribute.  So there is no need for you to add it.

      <li><a name="globalDrawLandMask"><b>drawLandMask</b></a> - 
        This is a RECOMMENDED global attribute used by ERDDAP (and no metadata 
        standards) which specifies the default value for the "Draw Land Mask" option on the dataset's
        Make A Graph form and for the <tt>&amp;.land</tt> parameter in a URL requesting 
        a graph/map of the data.
        (However, if drawLandMask is specified in a 
            <a rel="help" href="#variableAttributes">variable's attributes</a>, that value has precedence.)
        <ul>
        <li>This specifies whether the land mask on a map is drawn "over" or "under" the grid data.
          "over" is recommended for oceanographic data (so that grid data over land is obscured
          by the landmask). "under" is recommended for all other data.
        <li>If any other value (or no value) is specified, the drawLandMask value from 
            <a rel="help" href="http://coastwatch.pfeg.noaa.gov/erddap/download/setup.html#setup.xml">setup.xml</a>
          is used.  If none is specified there, "over" is the default.
        </ul>

      <li><a name="history"><b>history</b></a> 
        (from the
        <a rel="help" href="http://cf-pcmdi.llnl.gov/documents/cf-conventions/1.6/cf-conventions.html">CF</a> 
        and
        <a rel="help" href="http://www.unidata.ucar.edu/software/netcdf-java/formats/DataDiscoveryAttConvention.html">ACDD</a> 
        metadata standards) 
        is a RECOMMENDED multi-line string global attribute with a line for
         every processing step that the data has undergone.
         <ul>
         <li>Ideally, each line has an ISO 8601:2004(E) formatted date+timeZ 
           (for example, <tt>1985-01-31T15:31:00Z</tt>) 
           followed by a description of the processing step.
         <li>ERDDAP creates this if it doesn't already exist.
         <li>If it already exists, ERDDAP will append new information to the existing information.
         <li><tt>history</tt> is important because it allows clients to backtrack to the original source of the data.
         </ul>

      <li><a name="infoUrl"><b>infoUrl</b></a> 
        is a REQUIRED global attribute with the URL of a web page with more
        information about this dataset (usually at the source institution's web site).
        <ul>
        <li>Either the dataset's global <a rel="help" href="#globalAttributes">sourceAttributes</a> or its 
          global <tt>&lt;addAttributes&gt;</tt> MUST 
          include this attribute.
        <li><tt>infoUrl</tt> is important because it allows clients to find out more about the data
          from the original source.
        <li>ERDDAP displays a link to the infoUrl on the dataset's Data Access Form, Make A Graph
          web page, and other web pages.
        <li>If the URL has a query part (after the "?"), it MUST be already 
          <a rel="help" href="http://en.wikipedia.org/wiki/Percent-encoding">percent encoded</a>.
          In practice, this can be very minimal percent encoding: 
          all you have to do is convert special characters in the right-hand-side values of
          any constraints: % into %25, &amp; into %26, " into %22, = into %3D, + into %2B,
          and space into %20 (or +) and convert all characters above #126 to their %HH form
          (where HH is the 2-digit hex value).
          Unicode characters above #255 must be UTF-8 encoded and then each byte must be
          converted to %HH form (ask a programmer for help).
        <li>Since datasets.xml is an XML file, you MUST also encode '&amp;', '&lt;', and '&gt;' in the
          URL as '&amp;amp;', '&amp;lt;', and '&amp;gt;'.
        <li><tt>infoUrl</tt> is unique to ERDDAP. It is not from any metadata standard.
        </ul>

      <li><a name="institution"><b>institution</b></a> 
        (from the
        <a rel="help" href="http://cf-pcmdi.llnl.gov/documents/cf-conventions/1.6/cf-conventions.html">CF</a>
        and
        <a rel="help" href="http://www.unidata.ucar.edu/software/netcdf-java/formats/DataDiscoveryAttConvention.html">ACDD</a> 
        metadata standards) 
        is a REQUIRED global attribute with the short version of the
        name of the institution which is the source of this data (usually an acronym,
        usually &lt;20 characters).
        <ul>
        <li>Either the dataset's global <a rel="help" href="#globalAttributes">sourceAttributes</a> or its 
           global <tt>&lt;addAttributes&gt;</tt> MUST 
           include this attribute.
        <li>ERDDAP displays the institution whenever it displays a list of datasets.
           If an institution is longer than 20 characters, only the first 20 characters
           will be visible in the list of datasets (but the whole institution can be seen
           by putting the mouse cursor over the adjacent "?" icon).
        <li>If you add <tt>institution</tt> to the list of <tt>&lt;categoryAttributes&gt;</tt> 
          in ERDDAP's 
           <a rel="help" href="http://coastwatch.pfeg.noaa.gov/erddap/download/setup.html#setup.xml">setup.xml</a> file,
          users can easily find datasets from the same institution via ERDDAP's 
          "Search for Datasets by Category" on the home page.
        </ul>

      <li><a name="keywords"><b>keywords</b></a> 
        (from the
        <a rel="help" href="http://www.unidata.ucar.edu/software/netcdf-java/formats/DataDiscoveryAttConvention.html">ACDD</a> 
        metadata standard) 
        is a RECOMMENDED comma-separated list of words 
        and short phrases (e.g.,
        <a rel="help" href="http://gcmd.nasa.gov/Resources/valids/archives/keyword_list.html">GCMD Science Keywords</a>) 
        that describe the dataset in a general way, and not assuming any other knowledge of the
        dataset (e.g., for oceanographic data, include <tt>ocean</tt>).

      <li><a name="keywords_vocabulary"><b>keywords_vocabulary</b></a> 
        (from the
        <a rel="help" href="http://www.unidata.ucar.edu/software/netcdf-java/formats/DataDiscoveryAttConvention.html">ACDD</a> 
        metadata standard) 
        is a RECOMMENDED attribute: 
        if you are following a guideline for the words/phrases in your <tt>keywords</tt> attribute
        (e.g., GCMD Science Keywords), put the name of that guideline here.

      <li><a name="license"><b>license</b></a> 
        (from the
        <a rel="help" href="http://www.unidata.ucar.edu/software/netcdf-java/formats/DataDiscoveryAttConvention.html">ACDD</a> 
        metadata standard) 
        is a STRONGLY RECOMMENDED global attribute with the license and/or usage
        restrictions.
        <ul>
        <li>If "<tt>[standard]</tt>" occurs in the attribute value, it will be replaced by the
          standard ERDDAP license from the <tt>&lt;standardLicense&gt;</tt> tag in 
           <a rel="help" href="http://coastwatch.pfeg.noaa.gov/erddap/download/setup.html#messages.xml">messages.xml</a>.
        </ul>

      <li><a name="processing_level"><b>processing_level</b></a> 
        (from the
        <a rel="help" href="http://www.unidata.ucar.edu/software/netcdf-java/formats/DataDiscoveryAttConvention.html">ACDD</a> 
        metadata standard) 
        is a RECOMMENDED textual description of the processing 
        (e.g., <a rel="help" href="http://en.wikipedia.org/wiki/Remote_sensing#Data_processing_levels">NASA
        satellite data processing levels</a>, e.g., <tt>Level 3</tt>)
        or quality control level (e.g., <tt>Science Quality</tt>) of the data.

      <li><a name="project"><b>project</b></a> 
        (from the
        <a rel="help" href="http://www.unidata.ucar.edu/software/netcdf-java/formats/DataDiscoveryAttConvention.html">ACDD</a> 
        metadata standard) 
        is an OPTIONAL attribute to identify the project (e.g., GTSPP) that the dataset is part of.
        If the dataset isn't part of a project, don't use this attribute.
        Compared to <a rel="help" href="#creator_name">creator_name</a>, this is 
        focused on the project (not a person or an organization, which may
        be involved in multiple projects).

      <li><a name="publisher_name"><b>publisher_name</b></a> 
        (from the
        <a rel="help" href="http://www.unidata.ucar.edu/software/netcdf-java/formats/DataDiscoveryAttConvention.html">ACDD</a> 
        metadata standard) 
        is the RECOMMENDED way to identify the person, organization, or project 
        which is publishing this dataset.
        For example, you are the publisher if another person or group <a rel="help" href="#creator_name">created</a>
        the dataset and you are just re-serving it via ERDDAP.
        If "publisher" doesn't really apply to a dataset, omit this attribute.
        Compared to <a rel="help" href="#creator_name">creator_name</a>, the publisher
        probably didn't significantly modify or reprocess the data; the publisher
        is just making the data available in a new venue.

      <li><a name="publisher_email"><b>publisher_email</b></a> 
        (from the
        <a rel="help" href="http://www.unidata.ucar.edu/software/netcdf-java/formats/DataDiscoveryAttConvention.html">ACDD</a> 
        metadata standard) 
        is the RECOMMENDED way to identify an email address 
        (correctly formatted, e.g., john_smith@great.org) 
        that provides a way to contact the publisher.
        If "publisher" doesn't really apply to a dataset, omit this attribute.

      <li><a name="publisher_url"><b>publisher_url</b></a> 
        (from the
        <a rel="help" href="http://www.unidata.ucar.edu/software/netcdf-java/formats/DataDiscoveryAttConvention.html">ACDD</a> 
        metadata standard) 
        is the RECOMMENDED way to identify a URL for the organization that created the dataset, 
        or a URL with the publisher's information about this dataset 
        (but that is more the purpose of
        <a rel="help" href="#infoUrl">infoUrl</a>).
        If "publisher" doesn't really apply to a dataset, omit this attribute.
        
      <li><a name="sourceUrlAttribute"><b>sourceUrl</b></a> 
        is a global attribute with the URL of the source
        of the data.
        <ul>
        <li>ERDDAP usually creates this global attribute automatically.
          Two exceptions are EDDTableFromHyraxFiles and EDDTableFromThreddsFiles.
        <li><tt>sourceUrl</tt> is important because it allows clients to backtrack to the original source of the data.
        <li><tt>sourceUrl</tt> is unique to ERDDAP. It is not from any metadata standard.
        </ul>

      <li><a name="standard_name_vocabulary"><b>standard_name_vocabulary</b></a> 
        (from the
        <a rel="help" href="http://www.unidata.ucar.edu/software/netcdf-java/formats/DataDiscoveryAttConvention.html">ACDD</a> 
        metadata standard) 
        is a RECOMMENDED attribute to identify 
        the name of the controlled vocabulary 
        from which variable 
        <a rel="help" href="#standard_name">standard_name</a>s 
        are taken (e.g., <tt>CF-19</tt> for version 19 of the 
        <a rel="help" href="http://cf-pcmdi.llnl.gov/documents/cf-standard-names/standard-name-table/current/cf-standard-name-table.html/">CF standard name table</a>).

      <li><a name="subsetVariables"><b>subsetVariables</b></a> (for EDDTable datasets only) 
        is a RECOMMENDED global attribute that lets you specify
        a comma-separated list of destinationNames of variables which have a limited number of
        values (stated another way: variables for which each of the values has many duplicates).
        If this attribute is present, the dataset will have a .subset web page (and a link to it
        on every dataset list) which lets users quickly and easily select various subsets of the data.
        <ul>
        <li>Each time a dataset is loaded, ERDDAP
          loads and caches all of the distinct() subsetVariable data.
          Then, all user requests for distinct() subsetVariable data will be very fast.
        <li>The order of the destinationNames you specify determines the sort order on the .subset web page,
          so you will usually specify the most important variables first, then the least important.
          For example, for datasets with time series data for several stations, you might use, e.g.,
          <br><tt>&lt;att name="subsetVariables"&gt;station_id, longitude,
            latitude&lt;/att&gt;</tt>
          <br>so that the values are sorted by station_id.
        <li>If the number of distinct combinations of these variables is greater than about 1,000,000,
          you should consider restricting the subsetVariables that you specify to reduce the 
          number of distinct combinations to below 1,000,000; otherwise, the .subset web pages
          may be generated slowly.
        <li>If the number of distinct values of any one subset variable is greater than about 20,000,
          you should consider not including that variable in the list of subsetVariables;
          otherwise, it takes a long time to transmit the .subset, .graph, and .html web pages.
        <li>You should test each dataset to see if the subsetVariables setting is okay.
          If the source data server is slow and it takes too long (or fails) to download the data,
          either reduce the number of variables specified or remove the subsetVariables global attribute.
        <li>SubsetVariables is very useful. So if your dataset is suitable, please create a subsetVariables
          attribute.
        <li>EDDTableFromSOS automatically adds 
          <br><tt>&lt;att name="subsetVariables"&gt;station_id, longitude, latitude&lt;/att&gt;</tt>
          <br>when the dataset is created.
        <li>Possible warning: if a user using the .subset web page selects a value which
          has a carriageReturn or newline character, .subset will fail.
          ERDDAP can't work around this issue because of some HTML details. In any case, it is
          almost always a good idea to remove the carriageReturn and newline characters
          from the data.
          To help you fix the problem, if the EDDTable.subsetVariablesDataTable method in ERDDAP
          detects data values that will cause trouble, it will email a warning with a list of 
          offending values to the emailEverythingTo email addresses specified in setup.xml.
          That way, you know what needs to be fixed.
        <li>Pre-generated subset tables.  Normally, when ERDDAP loads a dataset, it requests
          the distinct() subset variables data table from the data source, 
          just via a normal data request.
          In some cases, this data is not available from the data source or retrieving from the
          data source may be hard on the data source server.
          If so, you can supply a table with the information in a .json or .csv file
          with the name [tomcat]/content/erddap/subset/[datasetID].json (or .csv).
          If present, ERDDAP will read it once when the dataset is loaded and use it as the 
          source of the subset data.
          <ul>
          <li>If there is an error while reading it, the dataset will fail to load.
          <li>It MUST have exact same column names (e.g., same case) as 
            <tt>&lt;subsetVariables&gt;</tt>, 
            but the columns MAY be in any order.
          <li>It MAY have extra columns (they'll be removed and newly redundant rows will be removed).
          <li>TimeStamp columns should have ISO 8601:2004(E) formatted date+timeZ strings
           (for example, <tt>1985-01-31T15:31:00Z</tt>).
          <li>Missing values should be missing values (not fake numbers like -99).
          <li>.json files may be a little harder to create but deal with Unicode characters well.
            .json files are easy to create if you create them with ERDDAP.
          <li>.csv files are easy to work with, but suitable for ISO 8859-1 characters only.
            .csv files MUST have column names on the first row and data on subsequent rows.
          </ul>
        </ul>

      <li><a name="summary"><b>summary</b></a> 
        (from the
        <a rel="help" href="http://cf-pcmdi.llnl.gov/documents/cf-conventions/1.6/cf-conventions.html">CF</a>
        and 
        <a rel="help" href="http://www.unidata.ucar.edu/software/netcdf-java/formats/DataDiscoveryAttConvention.html">ACDD</a> 
        metadata standards) 
        is a REQUIRED global attribute with a long description of the 
        dataset (usually &lt;500 characters).
        <ul>
        <li>Either the dataset's global <a rel="help" href="#globalAttributes">sourceAttributes</a> or its 
          global <tt>&lt;addAttributes&gt;</tt> MUST 
          include this attribute.
        <li><tt>summary</tt> is important because it allows clients to read a description of the dataset 
          that has more information than the title.
        <li>ERDDAP displays the summary on the dataset's Data Access Form, Make A Graph web page,
          and other web pages.
        </ul>

      <li><a name="title"><b>title</b></a> 
        (from the
        <a rel="help" href="http://cf-pcmdi.llnl.gov/documents/cf-conventions/1.6/cf-conventions.html">CF</a>
        and
        <a rel="help" href="http://www.unidata.ucar.edu/software/netcdf-java/formats/DataDiscoveryAttConvention.html">ACDD</a> 
        metadata standards) 
        is a REQUIRED global attribute with the short description of the dataset
        (usually &lt;80 characters).
        <ul>
        <li>Either the dataset's global <a rel="help" href="#globalAttributes">sourceAttributes</a> or its 
          global <tt>&lt;addAttributes&gt;</tt> MUST 
          include this attribute.
        <li><tt>title</tt> is important because every list of datasets presented by ERDDAP
          (other than search
          results) lists the datasets in alphabetical order, by title. 
          So if you want to specify the order of datasets, or have some datasets grouped together, 
          you have to create titles with that in mind.
          Many lists of datasets (e.g., in response to a category search), show a subset
          of the full list and in a different order.
          So the title for each dataset should stand on its own.
        <li>If a title is longer than 80 characters, only the first and last 40 characters will be 
          visible in the list of datasets (but the whole title can be seen by putting the mouse
          cursor over the adjacent "?" icon).
          <br>&nbsp;
        </ul>
      </ul> <!-- end of global attributes -->

  <li><a name="axisVariable"><tt><b>&lt;axisVariable&gt;</b></tt></a> 
    is a REQUIRED tag within a EDDGrid <tt>&lt;dataset&gt;</tt> tag, which is used to describe
    a dimension (also called "axis") shared by the data variables in an EDDGrid dataset.
    It is not allowed for EDDTable datasets.
    <ul>
    <li>All data variables in an EDDGrid dataset MUST use (share) all of the axis variables.
      (<a rel="help" href="#dataStructures">Why?</a> <a rel="help" href="#differentDimensions">What if they don't?</a>)
    <li>There MUST be an axis variable for each dimension.
     Axis variables MUST be specified in the order that the data variables use them.
    <li>There MUST be 1 or more instances of this tag.
    <li><tt>&lt;axisVariable&gt;</tt> supports the following subtags:
      <ul>
      <li><tt>&lt;sourceName&gt;</tt> - the data source's name for the variable. 
      This is the name that ERDDAP will use when requesting data from the data source. 
      This is the name that ERDDAP will look for when data is returned from the data source.
      This is case sensitive.
      This is REQUIRED.
      <li><tt>&lt;destinationName&gt;</tt> is the name for the variable that will be shown to and used by ERDDAP users. 
        <ul>
        <li>This is OPTIONAL. If absent, the sourceName is used.
        <li>This is useful because it allows you to change a cryptic or odd sourceName.
        <li>destinationName is case sensitive.
        <li>destinationNames MUST start with a letter (A-Z, a-z) and MUST be followed by 0 or more
            characters (A-Z, a-z, 0-9, and _).  ('-' was allowed before ERDDAP version 1.10.)
            This restriction allows axis variable names to be used as variable names in a
            programming language (such as Matlab).
        </ul>
      <li><a rel="help" href="#globalAttributes"><tt>&lt;addAttributes&gt;</tt></a>  
        defines an OPTIONAL set of attributes 
        (<i>name</i> = <i>value</i>)
        which are added to the source's attributes for a variable, to make the combined
        attributes for a variable. 
      </ul>
    <li>If the variable's <a rel="help" href="#variableAttributes">sourceAttributes</a> or 
      <tt>&lt;addAttributes&gt;</tt> include 
      <a rel="help" href="#scale_factor"><tt>scale_factor</tt>&nbsp;and/or&nbsp;<tt>add_offset</tt></a>      
      attributes, their values will be used to unpack the data from the source 
      before distribution to the client 
      <br>(resultValue = sourceValue * scale_factor + add_offset) .
      The unpacked variable will be of the same data type (e.g., float) as the 
      <tt>scale_factor</tt> and <tt>add_offset</tt> values.
    <li>An example is:  <pre>
&lt;axisVariable&gt;
  &lt;sourceName&gt;MT&lt;/sourceName&gt; 
  &lt;destinationName&gt;time&lt;/destinationName&gt;
  &lt;addAttributes&gt;
    &lt;att name="units"&gt;days since 1902-01-01 12:00:00Z&lt;/att&gt;
  &lt;/addAttributes&gt;
&lt;/axisVariable&gt; </pre>
    <li>In EDDGrid datasets, the <a rel="help" href="#LLAT">longitude, latitude, altitude, and time</a> axis variables
      are special.
      <br>&nbsp;
    </ul>


  <li><a name="dataVariable"><tt><b>&lt;dataVariable&gt;</b></tt></a> is a REQUIRED 
    (for almost all datasets) tag within the <tt>&lt;dataset&gt;</tt> tag which
    is used to describe a data variable.
    <ul>
    <li>There MUST be 1 or more instances of this tag.
    <li><tt>&lt;dataVariable&gt;</tt> supports the following subtags:
      <ul>
      <li><tt>&lt;sourceName&gt;</tt> - the data source's name for the variable. 
      This is the name that ERDDAP will use when requesting data from the data source. 
      This is the name that ERDDAP will look for when data is returned from the data source.
      This is case sensitive. 
      This is REQUIRED.
      <li><tt>&lt;destinationName&gt;</tt> - the name for the variable that will be shown to 
      and used by ERDDAP users. 
        <ul>
        <li>This is OPTIONAL. If absent, the sourceName is used.
        <li>This is useful because it allows you to change a cryptic or odd sourceName.
        <li>destinationName is case sensitive.
        <li>destinationNames MUST start with a letter (A-Z, a-z) and MUST be followed by 0 or
          more characters (A-Z, a-z, 0-9, and _).  ('-' was allowed before ERDDAP version 1.10.)
          This restriction allows data variable names to be used as variable names in a
          programming language (like Matlab).
        </ul>
      <li><a name="dataType"><tt>&lt;dataType&gt;</tt></a> - specifies the data type coming from the source.
        <ul>
        <li>This is REQUIRED by some dataset types and IGNORED by others. 
          Dataset types that require this for their dataVariables are: 
          EDDGridFromXxxFiles, EDDTableFromXxxFiles,
          EDDTableFromMWFS, EDDTableFromNOS, EDDTableFromSOS.
          Other dataset types ignore this tag because they get the information from the source.
        <li>Valid values are: "double" (64-bit), "float" (32-bit), "long" (64-bit signed), 
          "int" (32-bit signed), "short" (16-bit signed), "byte" (8-bit signed),
          "char" (essentially: 16-bit unsigned), "boolean", and "String" (any length).
        <li><a name="booleanData">"boolean"</a> is a special case. 
          <ul>
          <li>Internally, ERDDAP doesn't support a boolean type because booleans can't store
            missing values.
          <li>Also, DAP doesn't support booleans, so there is no standard way to query boolean
            variables.
          <li>Specifying "boolean" for the dataType in datasets.xml will cause boolean values to
            be stored and represented as bytes: 0=false, 1=true.
          <li>Clients can specify constraints by using the numeric values (for example, "isAlive=1").
            But ERDDAP administrators need to use the "boolean" dataType in datasets.xml
            to tell ERDDAP how to interact with the data source.
          </ul>
        </ul>
      <li><a rel="help" href="#globalAttributes"><tt>&lt;addAttributes&gt;</tt></a> - defines a set of attributes 
        (<i>name</i> = <i>value</i>) which are
        added to the source's attributes for a variable, to make the combined attributes
        for a variable. This is OPTIONAL.
      </ul>

    <li>If the variable's <a rel="help" href="#variableAttributes">sourceAttributes</a> or 
      <tt>&lt;addAttributes&gt;</tt> include 
      <a rel="help" href="#scale_factor"><tt>scale_factor</tt>&nbsp;and/or&nbsp;<tt>add_offset</tt></a>
      attributes, their values will be used to unpack the data from
      the source before distribution to the client.
      The unpacked variable will be of the same data type (e.g., float) as the 
      <tt>scale_factor</tt> and <tt>add_offset</tt> values.
    <li>An example is:   <pre>
&lt;dataVariable&gt;
  &lt;sourceName&gt;waterTemperature&lt;/sourceName&gt;
  &lt;destinationName&gt;sea_water_temperature&lt;/destinationName&gt;
  &lt;dataType&gt;float&lt;/dataType&gt;
  &lt;addAttributes&gt;
    &lt;att name="ioos_category"&gt;Temperature&lt;/att&gt;
    &lt;att name="long_name"&gt;Sea Water Temperature&lt;/att&gt;
    &lt;att name="standard_name"&gt;sea_water_temperature&lt;/att&gt;
    &lt;att name="units"&gt;degree_C&lt;/att&gt;
  &lt;/addAttributes&gt;
&lt;/dataVariable&gt;  </pre>
    <li>In EDDTable datasets, <a rel="help" href="#LLAT">longitude, latitude, altitude, and time</a> data variables
      are special.
      <br>&nbsp;
    </ul> 

  <li><a name="variableAttributes"><b>Variable Attributes / Variable <tt>&lt;addAttributes&gt;</tt></b></a> - 
    <tt>&lt;addAttributes&gt;</tt> is an OPTIONAL tag within an <tt>&lt;axisVariable&gt;</tt> or 
      <tt>&lt;dataVariable&gt;</tt> 
    tag which is used to change the variable's attributes.
    <ul>
    <li><b>Use a variable's <tt>&lt;addAttributes&gt;</tt>
      to change the variable's attributes.</b>
      ERDDAP combines a variable's attributes from the dataset's source 
      (<tt><b>sourceAttributes</b></tt>)
      and the variable's <tt><b>addAttributes</b></tt> which you define in datasets.xml (which have priority) 
      to make the variable's "<b>combinedAttributes</b>", which are what ERDDAP users see. 
      Thus, you can use addAttributes to redefine the values of sourceAttributes, add new
      attributes, or remove attributes.
     <li>See the <a rel="help" href="#addAttributes"><tt><b>&lt;addAttributes&gt;</b></tt> information</a>
       which applies to 
       global and variable <tt><b>&lt;addAttributes&gt;</b></tt>.
    <li>ERDDAP looks for and uses many of these attributes in various ways.
      For example, the colorBar values are required to make a variable available via WMS,
      so that maps can be made with consistent colorBars.
    <li><a rel="help" href="#LLAT">The longitude, latitude, altitude, and time variables</a> get lots of appropriate
      metadata automatically 
      (e.g., units).
    <li>A sample <tt>&lt;addAttributes&gt;</tt> for a data variable is: <pre>
&lt;addAttributes&gt; 
  &lt;att name="colorBarMinimum" type="double"&gt;0&lt;/att&gt;
  &lt;att name="colorBarMaximum" type="double"&gt;32&lt;/att&gt;
  &lt;att name="data_min" type="double"&gt;10.34&lt;/att&gt;
  &lt;att name="data_max" type="double"&gt;17.91&lt;/att&gt;
  &lt;att name="ioos_category"&gt;Temperature&lt;/att&gt;
  &lt;att name="long_name"&gt;Sea Surface Temperature&lt;/att&gt;
  &lt;att name="numberOfObservations" /&gt; 
  &lt;att name="units"&gt;degree_C&lt;/att&gt;
&lt;/addAttributes&gt;</pre>
    <li>Supplying this information helps ERDDAP do a better job and helps users understand the datasets.
      Please take the time to do a good job with metadata attributes. The users will thank you.
    </ul>

    <p><b>Comments about variable attributes that are special in ERDDAP:</b>
    <br>&nbsp;
      <ul>

      <li><a name="actual_range"><b>actual_range</b></a> 
        (<a rel="help" href="http://www.cdc.noaa.gov/cdc/conventions/cdc_netcdf_standard.shtml">CDC COARDS</a>)
        is a RECOMMENDED variable attribute.
        <ul>
        <li>If present, it is an array of two values of the same data type as the variable,
          specifying the actual (not the theoretical or the allowed) minimum and maximum 
          values of the data for that variable.
        <li>If the data is packed with 
          <a rel="help" href="#scale_factor"><tt>scale_factor</tt>&nbsp;and/or&nbsp;<tt>add_offset</tt></a>,
          actual_range should have packed values.
        <li>If present, ERDDAP will extract the information and display it to the user on the
          Data Access Form and Make A Graph web pages for that dataset.
        <li>When a user selects a subset of data, ERDDAP modifies actual_range automatically,
           to reflect the subset's range.
        <li>See also <a rel="help" href="#data_min">data_min and data_max</a>.
        </ul>

      <li><a name="colorBar"><b>Color Bar Attributes</b></a> - 
        There are several OPTIONAL variable attributes which specify the suggested
        default attributes for a color bar (used to convert data values into colors on images)
        for this variable.
        <ul>
        <li>If present, this information is used as default information by griddap and tabledap
          whenever you request an image that uses a color bar.
        <li>For example, when latitude-longitude gridded data is plotted as a coverage on a map,
          the color bar specifies how the data values are converted to colors.
        <li>Having these values allows ERDDAP to create images which use a consistent color bar
          across different requests, even when the time or other dimension values vary.
        <li>These attribute names were created for use in ERDDAP. They are not from a metadata standard.
        <li><a name="WMS">WMS</a> - The main requirements for a variable to be accessible via ERDDAP's WMS
          server are: 
          <ul>
          <li>The dataset must be an EDDGrid... dataset.
          <li>The data variable MUST be a gridded variable.
          <li>The data variable MUST have longitude and latitude axis variables.
            (Other axis variables are OPTIONAL.)
          <li>There MUST be some longitude values between -180 and 180.
          <li>The colorBarMinimum and colorBarMaximum attributes MUST be specified.
             (Other color bar attributes are OPTIONAL.)
          </ul>
        <li>The attributes related to the color bar are:
          <ul>
          <li><tt><b>colorBarMinimum</b></tt> specifies the minimum value on the colorBar.
            <ul>
            <li>If the variable's data values are stored as packed numbers, specify the
              colorBarMinimum as an unpacked value.
            <li>Data values lower than colorBarMinimum are represented by the same color as
              colorBarMinimum values.
            <li>The attribute should be of type="double", regardless of the data variable's type.
            <li>The value is usually a nice round number. 
            <li>Best practices: We recommend a value slightly higher than the minimum data value.
            <li>There is no default value.
            </ul>
          <li><tt><b>colorBarMaximum</b></tt> specifies the maximum value on the colorBar.
            <ul>
            <li>If the variable's data values are stored as packed numbers, specify the
              colorBarMinimum as an unpacked value.
            <li>Data values higher than colorBarMaximum are represented by the same color as
              colorBarMaximum values.
            <li>The attribute should be of type="double", regardless of the data variable's type.
            <li>The value is usually a nice round number.
            <li>Best practices: We recommend a value slightly lower than the maximum data value.
            <li>There is no default value.
            </ul>
          <li><tt><b>colorBarPalette</b></tt> specifies the palette for the colorBar.
            <ul>
            <li>All ERDDAP installations support these standard palettes:
                <!--the standard palettes are listed in 'palettes' in Bob's messages.xml, 
                    EDDTable.java, EDDGrid.java, and setupDatasetsXml.html -->
              <tt>BlackBlueWhite, 
              BlackRedWhite, BlackWhite, BlueWhiteRed, LightRainbow, Ocean, Rainbow,
              RedWhiteBlue, ReverseRainbow, Topography, WhiteBlack, WhiteBlueBlack,</tt>
              and <tt>WhiteRedBlack</tt>.
            <li>If you have installed
              <a rel="help" href="http://coastwatch.pfeg.noaa.gov/erddap/download/setup.html#palettes">additional palettes</a>, you can refer to one of them.
            <li>If this attribute isn't present, the default is <tt>BlueWhiteRed</tt> if
              <tt>-1*colorBarMinimum = colorBarMaximum</tt>; otherwise the default is 
              <tt>Rainbow</tt>.
            </ul>
          <li><tt><b>colorBarScale</b></tt> specifies the scale for the colorBar.
            <ul>
            <li>Valid values are <tt>Linear</tt> and <tt>Log</tt>.
            <li>If the value is <tt>Log</tt>, colorBarMinimum must be greater than 0.
            <li>If this attribute isn't present, the default is <tt>Linear</tt>.
            </ul>
          <li><tt><b>colorBarContinuous</b></tt> specifies whether the colorBar 
            has a continuous palette
              of colors, or whether the colorBar has a few discrete colors.
            <ul>
            <li>Valid values are the strings <tt>true</tt> and <tt>false</tt>.
            <li>If this attribute isn't present, the default is <tt>true</tt>.
            </ul>
          </ul>
        <li>Example:<tt>
          <br> &nbsp; &lt;att name="colorBarMinimum" type="double"&gt;0&lt;/att&gt;
          <br> &nbsp; &lt;att name="colorBarMaximum" type="double"&gt;32&lt;/att&gt;
          <br> &nbsp; &lt;att name="colorBarPalette"&gt;Rainbow&lt;/att&gt;
          <br> &nbsp; &lt;att name="colorBarContinuous"&gt;true&lt;/att&gt;
          <br> &nbsp; &lt;att name="colorBarScale"&gt;Linear&lt;/att&gt; </tt>
        </ul>

      <li><a name="data_min"><tt><b>data_min</b></tt> and <tt><b>data_max</b></tt></a> - 
        These are RECOMMENDED variable attributes 
        defined in the 
        <a rel="help" href="http://woce.nodc.noaa.gov/wdiu/utils/netcdf/woce_conventions/report_nov_01_v3_mtg.htm">World Ocean Circulation</a>
          metadata description.
        <ul>
        <li>If present, they are of the same data type as the variable, 
          and specify the actual (not the theoretical or the allowed) minimum and maximum 
          values of the data for that variable.
        <li>If the data is packed with 
          <a rel="help" href="#scale_factor"><tt>scale_factor</tt>&nbsp;and/or&nbsp;<tt>add_offset</tt></a>,
          data_min and data_max should be packed values.
        <li>If present, ERDDAP will extract the information and display it to the user on the 
          Data Access Form and Make A Graph web pages for that dataset.
        <li>See also <a rel="help" href="#actual_range">actual_range</a>.
        </ul>

      <li><a name="variableDrawLandMask"><b>drawLandMask</b></a> - 
        This is an OPTIONAL variable attribute used by ERDDAP (and no metadata standards) 
        which specifies the default value for the "Draw Land Mask" option on the dataset's
        Make A Graph form and for the <tt>&amp;.land</tt> parameter in a URL requesting a 
        graph/map of the data.
        <ul>
        <li>This specifies whether the land mask on a map is drawn <tt>over</tt> or 
          <tt>under</tt> the grid data.
        <li><tt>over</tt> is recommended for oceanographic data 
          (so that grid data over land is obscured by the landmask).
        <li><tt>under</tt> is recommended for all other data.
        <li>If any other value (or no value) is specified, the drawLandMask value from the dataset's
          <a rel="help" href="#globalAttributes">global attributes</a> is used.
        </ul>

      <li><a name="ioos_category"><tt><b>ioos_category</b></tt></a> - 
        This is a REQUIRED variable attribute if <tt>&lt;variablesMustHaveIoosCategory&gt;</tt>
        is set to true in
          <a rel="help" href="http://coastwatch.pfeg.noaa.gov/erddap/download/setup.html#setup.xml">setup.xml</a>;
          otherwise, it is OPTIONAL.
        <ul>
        <li>(As of writing this) we aren't aware of formal definitions of these names.
        <li>The core names are from Zdenka Willis' .ppt "Integrated Ocean Observing System (IOOS)
           NOAA's Approach to Building an Initial Operating Capability" and from the
           <a rel="help" href="http://www.ioos.gov/library/us_ioos_blueprint_ver1.pdf">US IOOS Blueprint</a>.
        <li>Bob Simons added additional names (mostly based on the the names of scientific fields,
          e.g., Biology, Ecology, Meteorology, Statistics, Taxonomy) for other types of data.
        <li>There is some overlap and ambiguity -- do your best.
        <li>It is likely that this list will be revised in the future.
          If you have requests, please email <tt>bob.simons at noaa.gov</tt>.
        <li>The current valid values are <tt>Bathymetry, Biology, Bottom Character, 
          Colored Dissolved Organic Matter, Contaminants,
          Currents, Dissolved Nutrients, Dissolved O2, Ecology, Fish Abundance,
          Fish Species, Heat Flux, Hydrology, Ice Distribution, Identifier, Location,
          Meteorology, Ocean Color, Optical Properties, Other, Pathogens, pCO2,
          Phytoplankton Species, Pressure, Productivity, Quality, Salinity, Sea Level,
          Statistics, Stream Flow, Surface Waves, Taxonomy, Temperature, Time, 
          Total Suspended Matter, Unknown, Wind, 
          Zooplankton Species,</tt> and <tt>Zooplankton Abundance</tt>.
        <li>If you add ioos_category to the list of <tt>&lt;categoryAttributes&gt;</tt> 
          in ERDDAP's 
          <a rel="help" href="http://coastwatch.pfeg.noaa.gov/erddap/download/setup.html#setup.xml">setup.xml</a> 
            file, users can easily find datasets with similar data via ERDDAP's
          "Search for Datasets by Category" on the home page.
        </ul>

      <li><a name="long_name"><b>long_name</b></a> 
        (<a rel="help" href="http://ferret.wrc.noaa.gov/noaa_coop/coop_cdf_profile.html">COARDS</a>,
        <a rel="help" href="http://cf-pcmdi.llnl.gov/documents/cf-conventions/1.6/cf-conventions.html">CF</a>, 
        <a rel="help" href="http://www.unidata.ucar.edu/software/netcdf/docs/netcdf.html#Attribute-Conventions">netCDF</a> 
        and
        <a rel="help" href="http://www.unidata.ucar.edu/software/netcdf-java/formats/DataDiscoveryAttConvention.html">ACDD</a> 
        metadata standards) 
        is a RECOMMENDED variable attribute in ERDDAP.
        <ul>
        <li>ERDDAP uses the long_name for labeling axes on graphs.
        <li>Best practices: Capitalize the words in the long_name as if it were a title
          (capitalize the first word and all non-article words).
          Don't include the units in the long_name. 
          The long name shouldn't be very long (usually &lt;20 characters), but should be more
          descriptive than the destinationName, which is often very concise.
        <li>If "long_name" isn't defined in the 
          variable's <a rel="help" href="#variableAttributes">sourceAttributes</a> or 
          <tt>&lt;addAttributes&gt;</tt>, 
          ERDDAP will generate it by cleaning up the standard_name (if present) or the destinationName. 
        </ul>

      <li><a name="missing_value"><b>missing_value</b></a> (default = NaN)  and
        <a name="FillValue"><b>_FillValue</b></a> (default = NaN) 
        (<a rel="help" href="http://ferret.wrc.noaa.gov/noaa_coop/coop_cdf_profile.html">COARDS</a>,
        <a rel="help" href="http://cf-pcmdi.llnl.gov/documents/cf-conventions/1.6/cf-conventions.html">CF</a>, and
        <a rel="help" href="http://www.unidata.ucar.edu/software/netcdf/docs/netcdf.html#Attribute-Conventions">netCDF</a>)
        are variable attributes which describe a number
        (for example, -9999) which is used to represent a missing value.
        <ul>
        <li>ERDDAP supports missing_value and _FillValue, since some data sources assign
          slightly different meanings to them.
        <li>If present, they should be of the same data type as the variable.
        <li>If the data is packed with 
          <a rel="help" href="#scale_factor"><tt>scale_factor</tt>&nbsp;and/or&nbsp;<tt>add_offset</tt></a>,
          the missing_value and _FillValue values should be likewise packed.
        <li>If a variable uses these special numbers, the missing_value and/or _FillValue
          attributes are REQUIRED.
        <li>For some output data formats, ERDDAP will leave this special numbers intact.
        <li>For other output data formats, ERDDAP will replace these special numbers with NaN or "".
        </ul>

      <li><a name="scale_factor"><b>scale_factor</b></a> (default = 1) and 
        <a name="add_offset"><b>add_offset</b></a> (default = 0)
        (<a rel="help" href="http://ferret.wrc.noaa.gov/noaa_coop/coop_cdf_profile.html">COARDS</a>,
         <a rel="help" href="http://cf-pcmdi.llnl.gov/documents/cf-conventions/1.6/cf-conventions.html">CF</a>, and 
         <a rel="help" href="http://www.unidata.ucar.edu/software/netcdf/docs/netcdf.html#Attribute-Conventions">netCDF</a>)
        are OPTIONAL variable attributes which describe data which is packed in a 
        simpler data type via a simple transformation.
        <ul>
        <li>If present, their data type is different from the source data type and describes the
          data type of the destination values.
        <br>For example, a data source might have stored float data values with one decimal digit
          packed as short ints (int16), using scale_factor = 0.1 and add_offset = 0.
        <br>In that case, ERDDAP would unpack the data and present it to the user as float data values.
        <li>If present, ERDDAP will extract the values from these attributes,
          remove the attributes, and automatically unpack the data for the user:
        <br><tt>&nbsp;&nbsp;destinationValue = sourceValue * scale_factor + add_offset</tt>
        <br>Or, stated another way:
        <br><tt>&nbsp;&nbsp;unpackedValue = packedValue * scale_factor + add_offset</tt>
        </ul>

      <li><a name="standard_name"><b>standard_name</b></a> 
        (from the
        <a rel="help" href="http://www.unidata.ucar.edu/software/netcdf-java/formats/DataDiscoveryAttConvention.html">ACDD</a> 
        metadata standard) 
        is a RECOMMENDED variable attribute in ERDDAP.
        (<a rel="help" href="http://cf-pcmdi.llnl.gov/">CF</a> maintains a list of
          <a rel="help" href="http://cf-pcmdi.llnl.gov/documents/cf-standard-names/">CF standard names</a>)
        <ul>
        <li>If you add <tt>standard_name</tt> to variables' attributes and add 
          <tt>standard_name</tt> to the list of
          <tt>&lt;categoryAttributes&gt;</tt> in ERDDAP's 
            <a rel="help" href="http://coastwatch.pfeg.noaa.gov/erddap/download/setup.html#setup.xml">setup.xml</a> 
            file, users can easily find datasets with
          similar data via ERDDAP's "Search for Datasets by Category" on the home page.
        <li>Best practices: Part of the power of 
            <a rel="help" href="http://en.wikipedia.org/wiki/Controlled_vocabulary">controlled vocabularies</a>
            comes from using only the terms
          in the list. 
          So we recommend sticking to the terms defined in the controlled vocabulary,
          and we recommend against making up a term if there isn't an appropriate one in the list.
          If you need additional terms, see if the standards committee will add them to the
          controlled  vocabulary.
        </ul>
      <li><a name="time_precision"><b>time_precision</b></a> 
        <ul>
        <li>time_precision is an OPTIONAL attribute used by ERDDAP (and no metadata standards)
          for time and timestamp variables.           
          It specifies the precision to be used when displaying time values from the variable
          on web pages in ERDDAP.  The only data file output format that uses
          this is .htmlTable.
        <li>Valid values are <tt>1970-01, 1970-01-01, 1970-01-01T00Z,
          1970-01-01T00:00Z, 1970-01-01T00:00:00Z</tt> (the default), 
          <tt>1970-01-01T00:00:00.0Z, 1970-01-01T00:00:00.00Z, 1970-01-01T00:00:00.000Z</tt>.
          [<tt>1970</tt> is not an option because it is a single number,
          so ERDDAP can't know if it is a formatted time string (a year) or if it is 
          some number of seconds since 1970-01-01T00:00:00T.]
        <li>If time_precision isn't specified or the value isn't matched,
          the default value will be used.
        <li>Here, as in other parts of ERDDAP, any fields of the formatted time that are 
          not displayed are assumed to have the minimum value.  For example,
          <tt>1985-07, 1985-07-01, 1985-07-01T00Z, 1985-07-01T00:00Z,</tt> 
          and <tt>1985-07-01T00:00:00Z</tt> are all considered equivalent,
          although with different levels of precision implied.
          This matches the 
          <a rel="help" href="http://www.iso.org/iso/date_and_time_format">ISO 8601:2004 "extended" Time Format Specification</a>.
        <li><b>WARNING:</b> You should only use a limited time_precision to the extent that 
          <b>all</b> of the data values for the variable have only the minimum value 
          for all of the fields that are hidden.
          <ul>
          <li>For example, you can use a time_precision of <tt>1970-01-01</tt> 
            if all of the data vaules are like
            <tt>2005-03-04T00:00:00Z</tt> and <tt>2005-03-05T00:00:00Z</tt>. 
          <li>For example, don't use a time_precision of <tt>1970-01-01</tt> 
            if there are data values like <tt>2005-03-05T12:00:00Z</tt>,
            because the non-default hour value wouldn't be displayed.
            <br>Otherwise, if a user asks for all data with <tt>time=2005-03-05</tt>,
            the request will fail unexpectedly.
          </ul>
        </ul>

      <li><a name="units"><b>units</b></a> 
        (<a rel="help" href="http://ferret.wrc.noaa.gov/noaa_coop/coop_cdf_profile.html">COARDS</a>,
         <a rel="help" href="http://cf-pcmdi.llnl.gov/documents/cf-conventions/1.6/cf-conventions.html">CF</a>,
         <a rel="help" href="http://www.unidata.ucar.edu/software/netcdf/docs/netcdf.html#Attribute-Conventions">netCDF</a>
         and
        <a rel="help" href="http://www.unidata.ucar.edu/software/netcdf-java/formats/DataDiscoveryAttConvention.html">ACDD</a> 
        metadata standard) 
        defines the units of the data values. 
        <ul>
        <li>"units" is REQUIRED as either a sourceAttribute or an addAttribute for "time" variables
          and is STRONGLY RECOMMENDED for other variables whenever appropriate (which is
          almost always).
        <li>In general, we recommend 
          <a rel="help" href="http://www.unidata.ucar.edu/software/udunits/udunits-2/udunits2.html">UDUnits</a>-compatible
          units which is required by the 
          <a rel="help" href="http://ferret.wrc.noaa.gov/noaa_coop/coop_cdf_profile.html">COARDS</a> and
          <a rel="help" href="http://cf-pcmdi.llnl.gov/documents/cf-conventions/1.6/cf-conventions.html">CF</a>
          standards.
        <li>Another common standard is <a rel="help" href="http://aurora.regenstrief.org/~ucum/ucum.html">UCUM</a>
          - the Unified Code for Units of Measure.
          <a rel="help" href="http://www.opengeospatial.org/">OGC</a> services such as
            <a rel="help" href="http://www.opengeospatial.org/standards/sos">SOS</a>,
            <a rel="help" href="http://www.opengeospatial.org/standards/wcs">WCS</a>, and
            <a rel="help" href="http://www.opengeospatial.org/standards/wms">WMS</a>
            require UCUM and often refer to UCUM 
            as UOM (Units Of Measure).
        <li>We recommend that you use one units standard for all datasets in your ERDDAP.
          You should tell ERDDAP which standard you are using with 
          <tt>&lt;units_standard&gt;</tt>,
          in your
            <a rel="help" href="http://coastwatch.pfeg.noaa.gov/erddap/download/setup.html#setup.xml">setup.xml</a>
            file.
        <li><a name="timeUnits">For</a> time variables, either the variable's <a rel="help" href="#variableAttributes">sourceAttributes</a>
          or <tt>&lt;addAttributes&gt;</tt> (which is read first) MUST have 
            <tt>units</tt> which is either 
          <ul>
          <li>For time axis variables or time data variables with numeric data: 
            <a rel="help" href="http://www.unidata.ucar.edu/software/udunits/udunits-2/udunits2.html">UDUnits</a>-compatible
            string (with the format <tt><i>units</i> since <i>baseTime</i></tt>) describing how to
            interpret source time values (e.g., <tt>seconds since 1970-01-01T00:00:00Z</tt>),
            where the base time is an ISO 8601:2004(E) formatted date time string (YYYY-MM-DDThh:mm:ssZ).
          <li>For time data variables with String data: an org.joda.time.format.DateTimeFormat string
            (which is mostly compatible with java.text.SimpleDateFormat) describing how to interpret 
            string times  (e.g., the ISO8601TZ_FORMAT <tt>yyyy-MM-dd'T'HH:mm:ss'Z'</tt>).
            See 
              <a rel="help" href="http://joda-time.sourceforge.net/api-release/index.html">Joda Time</a> and
              <a rel="help" href="http://joda-time.sourceforge.net/apidocs/org/joda/time/format/DateTimeFormat.html">DateTimeFormat</a> .
          </ul>
          The main time data variable (for tabular datasets) and the main time axis variable
          (for gridded datasets) are recognized by the destinationName <tt>time</tt> and their
          <tt>units</tt> metadata (which must be suitable).

          <p>For tabular datasets, other variables can be timeStamp variables. They behave
          like the main time variable (converting the source's time format into 
          "seconds since 1970-01-01T00:00:00Z" and/or ISO 8601:2004(E) format), but have a
          different destinationName. TimeStamp variables are recognized by their "units"
          metadata, which must contain " since " (for numeric dateTimes) or "yy" or "YY"
          for formatted String dateTimes.
          But please still use the destinationName "time" for the main dateTime variable.

          <p>See <a rel="help" href="#LLAT">more information about time variables</a>.
          <br>ERDDAP has a utility to 
            <a rel="help" href="http://coastwatch.pfeg.noaa.gov/erddap/convert/time.html">Convert
            a Numeric Time to/from a String Time</a>.
          <br>See <a rel="help" href="http://coastwatch.pfeg.noaa.gov/erddap/convert/time.html#erddap">How
            ERDDAP Deals with Time</a>.
        </ul>
      </ul> <!-- end of variable attributes -->
  </ul>
</ul>


<br>&nbsp;
<hr>
<h2><a name="contact">Contact</a></h2> 
Questions, comments, suggestions?  Please send an email to 
  <tt>bob dot simons at noaa dot gov</tt>
and include the ERDDAP URL directly related to your question or comment.

<br>&nbsp;
<hr>
<p>ERDDAP, Version 1.38
<br><a rel="bookmark" href="http://coastwatch.pfeg.noaa.gov/erddap/legal.html">Disclaimers</a> | 
    <a rel="bookmark" href="http://coastwatch.pfeg.noaa.gov/erddap/legal.html#privacyPolicy">Privacy Policy</a>

</td>
</tr>
</table>
</body>
</html>