<!DOCTYPE html>
<html lang="en-US">
<head>
<title>Search Multiple ERDDAPs</title>
<meta charset="UTF-8">
<link rel="shortcut icon" href="https://coastwatch.pfeg.noaa.gov/erddap/images/favicon.ico">
<link href="https://coastwatch.pfeg.noaa.gov/erddap/images/erddap2.css" rel="stylesheet" type="text/css">
<meta name="viewport" content="width=device-width, initial-scale=1">
</head>

<body>

<script>
  //you can add, comment out, or remove ERDDAP URLs from this list
  var urls = [
    "https://coastwatch.pfeg.noaa.gov/erddap/",
    "https://apdrc.soest.hawaii.edu/erddap/",
    "https://www.ncei.noaa.gov/erddap/",
    "https://erddap.bco-dmo.org/erddap/",
    "https://erddap.emodnet-physics.eu/erddap/",
    "https://erddap.marine.ie/erddap/",
    "https://cwcgom.aoml.noaa.gov/erddap/",
    "http://erddap.sensors.ioos.us/erddap/",
    "http://erddap.axiomdatascience.com/erddap/",
    "http://www.neracoos.org/erddap/",
    "https://data.ioos.us/gliders/erddap/",
    "https://pae-paha.pacioos.hawaii.edu/erddap/",
    "https://catalogue.hakai.org/erddap/",
    "http://sccoos.org/erddap/",
    "http://erddap.secoora.org/erddap/",
    "https://ecowatch.ncddc.noaa.gov/erddap/",
    "http://osmc.noaa.gov/erddap/",
    "http://dap.onc.uvic.ca/erddap/",
    "https://oceanwatch.pifsc.noaa.gov/erddap/",
    "https://erddap-uncabled.oceanobservatories.org/uncabled/erddap/",
    "https://members.oceantrack.org/erddap/",
    "http://www.myroms.org:8080/erddap/",
    "http://tds.marine.rutgers.edu/erddap/",
    "https://comet.nefsc.noaa.gov/erddap/",
    "https://opendap.co-ops.nos.noaa.gov/erddap/",
    "http://gcoos5.geos.tamu.edu:6060/erddap/",
    "http://gcoos4.tamu.edu:8080/erddap/",
    "https://coastwatch.glerl.noaa.gov/erddap/",
    "http://sfbaynutrients.sfei.org/erddap/",
    "https://spraydata.ucsd.edu/erddap/",
    "https://salishsea.eos.ubc.ca/erddap/",
    "https://erddap.ichec.ie/erddap/",
    "https://www.smartatlantic.ca/erddap/",
    "http://bmlsc.ucdavis.edu:8080/erddap/",
    "https://erddap.griidc.org/erddap/",
    "https://geoport.usgs.esipfed.org/erddap/",
    "https://upwell.pfeg.noaa.gov/erddap/", 
    ];
</script>

<table class="compact nowrap" style="width:100%; background-color:#128CB5;"> 
  <tr> 
    <td style="text-align:center; width:80px;"><a rel="bookmark"
      href="https://www.noaa.gov/"><img 
      title="National Oceanic and Atmospheric Administration" 
      src="https://coastwatch.pfeg.noaa.gov/erddap/images/noaab.png" alt="NOAA"
      style="vertical-align:middle;"></a></td> 
    <td style="text-align:left; font-size:x-large; color:#FFFFFF; ">
      <strong>ERDDAP</strong>
      <br><small><small><small>Easier access to scientific data</small></small></small>
      </td> 
    <td style="text-align:right; font-size:small;"> 
      &nbsp; &nbsp;
      <br>Brought to you by 
      <a title="National Oceanic and Atmospheric Administration" rel="bookmark"
      href="https://www.noaa.gov">NOAA</a>  
      <a title="National Marine Fisheries Service" rel="bookmark"
      href="https://www.fisheries.noaa.gov">NMFS</a>  
      <a title="Southwest Fisheries Science Center" rel="bookmark"
      href="https://swfsc.noaa.gov">SWFSC</a> 
      <a title="Environmental Research Division" rel="bookmark"
      href="https://www.fisheries.noaa.gov/about/environmental-research-division-southwest-fisheries-science-center">ERD</a>  
      &nbsp; &nbsp;
      </td> 
  </tr> 
</table>

<!-- Big HTML tooltips are generated with wz_tooltip from 
    http://wztip.info/index.php/Main_Page (LGPL license) -->
<script src="https://coastwatch.pfeg.noaa.gov/erddap/images/wz_tooltip.js"></script>

<script>
//https://stackoverflow.com/questions/1219860/html-encoding-lost-when-attribute-read-from-input-field
function htmlEncode(value){
  var vl=value.length;
  if (vl==0)
      return "";
  var result=[];
  for (var i=0; i<vl; i++) {
      var ch=value.charAt(i);
      result.push(ch=="&"?  "&amp;"  :
                  ch=="\""? "&quot;" :
                  ch=="\'"? "&#39;"  :
                  ch=="<"?  "&lt;"   :
                  ch==">"?  "&gt;"   : 
                  ch);
  }
  return result.join("");
}
function convertJsonToTable(jsonTable) {
    var html=[];
    var tColNames = jsonTable.table.columnNames;
    var tRows=jsonTable.table.rows;
    var nCols=tColNames.length;
    var nRows=tRows.length;
    var summaryCol = tColNames.indexOf("Summary");
    var po = tColNames.indexOf("Make A Graph");
    if (po>=0) tColNames[po] = "graph";
    for (c=0; c<nCols; c++) {
        po = tColNames[c].indexOf(" ");
        if (po>0) tColNames[c] = tColNames[c].substring(0,po) + tColNames[c].substring(po+1);
    }
    html.push("<p><table class=\"erd nowrap commonBGColor\">\n<tr><th>");
    html.push(tColNames.join("</th><th>"));
    html.push("</th></tr>\n");
    
    for (r=0; r<nRows; r++) {
        html.push("<tr>");
        for (c=0; c<nCols; c++) {
            var ts = tRows[r][c];
            if (ts.startsWith("http")) {
                html.push("<td><a href=\"" + htmlEncode(ts) + "\">" + tColNames[c] + "</a></td>");
            } else if (c==summaryCol) {
                ts = htmlEncode(ts + "\n");
                ts = ts.replace(/&#39;/g, "\\'");  //tricky
                ts = ts.replace(/\n/g, "<br>"); //tricky
                //console.log(ts);
                html.push("<td><img src=\"https://coastwatch.pfeg.noaa.gov/erddap/images/QuestionMark.jpg\" alt=\"?\" onmouseover=\"Tip('<div class=&quot;standard_max_width&quot;>" +  
                ts + 
                "</div>')\" onmouseout=\"UnTip()\" ></td>");
            } else if (ts.length > 104) {
                if (ts.length > 204) {
                    po = ts.substring(0,200).lastIndexOf(' ');
                    if (po<170) po=200;
                    ts = ts.substring(0, po + 1) + "<br>" + ts.substring(po + 1);
                }
                po = ts.substring(0,100).lastIndexOf(' ');
                if (po<70) po=100;
                ts = ts.substring(0, po + 1) + "<br>" + ts.substring(po + 1);
                ts = htmlEncode(ts);
                ts = ts.replace(/&lt;br&gt;/g, "<br>");
                html.push("<td>" + ts + "</td>");
            } else {
                html.push("<td>" + htmlEncode(ts) + "</td>");
            }
        }
        html.push("</tr>\n");
    }
    html.push("</table><p>&nbsp;\n");
    document.getElementById('results').innerHTML += html.join("");
}
</script>

<h1>Search Multiple ERDDAPs <img src="https://coastwatch.pfeg.noaa.gov/erddap/images/QuestionMark.jpg" alt="?" onmouseover="Tip('<div class=&quot;standard_max_width&quot;><strong>Information About This Web Page</strong><ul><li>This web page let\'s you search ~25 ERDDAPs for matching datasets.<li>The results from each ERDDAP will be appended at the bottom of the page, in separate tables, in the order that they arrive.<li>This is a stand-alone web page. All the work is done in your browser, by your browser.<li>If an error occurs (e.g., an ERDDAP doesn\'t respond or has no matching datasets), this web page doesn\'t display the error.<li>You can download and modify this web page in a text editor.<br>Notably, you can modify the list of ERDDAPs that are searched <br>(see \'var urls\' near the top).<br>You can then use your copy of this web page by opening it in your browser<br>(^O in Chrome).<li>Comments/questions/suggestions? Email them to bob.simons @ noaa.gov .</ul>v2.02.00</div>')" onmouseout="UnTip()" ></h1>

<form name="form1" method="GET"
  action="javascript:void(0);"  >

<!-- Do a Full Text Search for Datasets -->
Do a full text search for datasets: 
<input type="text" name="searchFor" value=""
  title="Like Google search, enter space-separated word(s), for example, &#x22;noaa wind&#x22;." 
  size="50" maxlength="500"  
  ><img src="https://coastwatch.pfeg.noaa.gov/erddap/images/QuestionMark.jpg" alt="&#x3f;" onmouseover="Tip('<div class=&quot;standard_max_width&quot;><strong>Search Hints</strong><ul><li>This is a Google-like search of the datasets\&#39; metadata:&nbsp;&nbsp;Type the words you want to search for, with spaces between the words.&nbsp;&nbsp;ERDDAP will search for the words separately, not as a phrase. <li>To search for a phrase, put double quotes around the phrase (for example, <kbd>&quot;wind speed&quot;</kbd>). <li>To exclude datasets with a specific word, use <kbd>-<i>excludedWord</i></kbd> . To exclude datasets with a specific phrase, use <kbd>-&quot;<i>excluded phrase</i>&quot;</kbd> . <li>Don\&#39;t use <kbd>AND</kbd> between search terms. It is implied. The results will include only the datasets that have all of the specified words and phrases (and none of the excluded words and phrases) in the dataset\&#39;s metadata (data about the dataset). <li>Searches are not case-sensitive. <li>To find just grid or just table datasets, include <kbd>protocol=griddap</kbd> or <kbd>protocol=tabledap</kbd> in your search. <li>Most ERDDAPs use searchEngine=original. <li>In most ERDDAPs, you can search for any part of a word. For example, searching for <kbd>spee</kbd> will find datasets with <kbd>speed</kbd> and datasets with <kbd>WindSpeed</kbd>. <li>In most ERDDAPs, the last word in a phrase may be a partial word. For&nbsp;&nbsp;example, to find datasets from a specific website (usually the start of the datasetID), include (for example) <kbd>&quot;datasetID=<i>erd</i>&quot;</kbd> in your search. </ul></div>')" onmouseout="UnTip()" >
<button type="button" name="submit1" onclick=
'
try {
  document.getElementById("results").innerHTML = "<h2>Results</h2>";

  var sf = encodeURIComponent(form1.searchFor.value);
  //Creating a Dynamic Script Tag https://www.w3schools.com/js/js_json_jsonp.asp 
  for (var i=0; i<urls.length; i++) {
      var sc=document.createElement("script");
      sc.src=urls[i] + "search/index.json?page=1&itemsPerPage=100000&searchFor=" + sf + "&.jsonp=convertJsonToTable";
      document.body.appendChild(sc);
  }
} catch (e) {alert(e);}
'
   ><strong>Submit</strong></button>

<!-- Do an Advanced Search -->
<p>Or, do an advanced search: 
<input type="text" name="advancedSearchFor" 
  value="page=1&itemsPerPage=100000&searchFor=sst&cdm_data_type=timeseries&institution=%28ANY%29&ioos_category=%28ANY%29&keywords=%28ANY%29&minLat=-90&maxLat=90&minLon=-180&maxLon=360&minTime=now-20years&maxTime=now"
  title="" 
  size="50" maxlength="500"  
  ><img src="https://coastwatch.pfeg.noaa.gov/erddap/images/QuestionMark.jpg" alt="&#x3f;" onmouseover="Tip('<div class=&quot;standard_max_width&quot;><strong>Advanced Search Instructions</strong><br>&nbsp;<br>Modify the built-in sample query. Or:<ol><li>In any ERDDAP, do an Advanced Search. <li>Copy and paste the end of the advanced search URL that ERDDAP generated (the part after the \'?\') into this text field. <li>Modify that query if you want to. Special characters must be percent-encoded.<li>Click on Submit.</ol></div>')" onmouseout="UnTip()" >
<button type="button" name="submit2" onclick=
'
try {
  document.getElementById("results").innerHTML = "<h2>Results</h2>";

  var sf = form1.advancedSearchFor.value;  //already encoded
  //Creating a Dynamic Script Tag https://www.w3schools.com/js/js_json_jsonp.asp 
  for (var i=0; i<urls.length; i++) {
      var sc=document.createElement("script");
      sc.src=urls[i] + "search/advanced.json?" + sf + "&.jsonp=convertJsonToTable";
      document.body.appendChild(sc);
  }
} catch (e) {alert(e);}
'
   ><strong>Submit</strong></button>

</form>


<div id="results"></div>

</body>
</html>
